



<!DOCTYPE html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="mongodb nodejs组件中文文档">
      
      
      
        <meta name="author" content="Nosy">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="zh">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.5">
    
    
      
        <title>接口 - Mongoose文档</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.bcabdff3.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="indigo" data-md-color-accent="indigo">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Mongoose文档" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Mongoose文档
              </span>
              <span class="md-header-nav__topic">
                接口
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/wohugb/mongoose-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/mongoose-docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="前言" class="md-tabs__link">
        前言
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../guide/Schemas/" title="指南" class="md-tabs__link">
          指南
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" title="API" class="md-tabs__link md-tabs__link--active">
          API
        </a>
      
    </li>
  

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Mongoose文档
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/wohugb/mongoose-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/mongoose-docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="前言" class="md-nav__link">
      前言
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../QuickStart/" title="快速开始" class="md-nav__link">
      快速开始
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      指南
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        指南
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Schemas/" title="模式" class="md-nav__link">
      模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Connections/" title="连接" class="md-nav__link">
      连接
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Models/" title="楷模" class="md-nav__link">
      楷模
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Documents/" title="文件" class="md-nav__link">
      文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Queries/" title="查询" class="md-nav__link">
      查询
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Validation/" title="验证" class="md-nav__link">
      验证
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Middleware/" title="中间件" class="md-nav__link">
      中间件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Populate/" title="填充" class="md-nav__link">
      填充
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Discriminators/" title="鉴" class="md-nav__link">
      鉴
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/Plugins/" title="插件" class="md-nav__link">
      插件
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        接口
      </label>
    
    <a href="./" title="接口" class="md-nav__link md-nav__link--active">
      接口
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema" title="Schema()" class="md-nav__link">
    Schema()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypechildschemas" title="Schema.prototype.childSchemas" class="md-nav__link">
    Schema.prototype.childSchemas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeobj" title="Schema.prototype.obj" class="md-nav__link">
    Schema.prototype.obj
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeclone" title="Schema.prototype.clone()" class="md-nav__link">
    Schema.prototype.clone()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeadd" title="Schema.prototype.add()" class="md-nav__link">
    Schema.prototype.add()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_1" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemareserved" title="Schema.reserved" class="md-nav__link">
    Schema.reserved
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepath" title="Schema.prototype.path()" class="md-nav__link">
    Schema.prototype.path()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeeachpath" title="Schema.prototype.eachPath()" class="md-nav__link">
    Schema.prototype.eachPath()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_1" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototyperequiredpaths" title="Schema.prototype.requiredPaths()" class="md-nav__link">
    Schema.prototype.requiredPaths()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_2" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepathtype" title="Schema.prototype.pathType()" class="md-nav__link">
    Schema.prototype.pathType()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_3" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypequeue" title="Schema.prototype.queue()" class="md-nav__link">
    Schema.prototype.queue()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_6" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepre" title="Schema.prototype.pre()" class="md-nav__link">
    Schema.prototype.pre()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_7" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_4" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepost" title="Schema.prototype.post()" class="md-nav__link">
    Schema.prototype.post()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_8" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeplugin" title="Schema.prototype.plugin()" class="md-nav__link">
    Schema.prototype.plugin()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_9" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypemethod" title="Schema.prototype.method()" class="md-nav__link">
    Schema.prototype.method()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_10" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_5" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypestatic" title="Schema.prototype.static()" class="md-nav__link">
    Schema.prototype.static()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_11" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_6" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeindex" title="Schema.prototype.index()" class="md-nav__link">
    Schema.prototype.index()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_12" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_7" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeset" title="Schema.prototype.set()" class="md-nav__link">
    Schema.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_13" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_8" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeget" title="Schema.prototype.get()" class="md-nav__link">
    Schema.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_14" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#indextypes" title="indexTypes" class="md-nav__link">
    indexTypes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeindexes" title="Schema.prototype.indexes()" class="md-nav__link">
    Schema.prototype.indexes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypevirtual" title="Schema.prototype.virtual()" class="md-nav__link">
    Schema.prototype.virtual()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_15" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_4" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypevirtualpath" title="Schema.prototype.virtualpath()" class="md-nav__link">
    Schema.prototype.virtualpath()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_16" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_5" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototyperemove" title="Schema.prototype.remove()" class="md-nav__link">
    Schema.prototype.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_17" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeloadclass" title="Schema.prototype.loadClass()" class="md-nav__link">
    Schema.prototype.loadClass()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_18" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schematypes" title="Schema.Types" class="md-nav__link">
    Schema.Types
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_9" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" title="Types:" class="md-nav__link">
    Types:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection" title="Connection()" class="md-nav__link">
    Connection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_19" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypereadystate" title="Connection.prototype.readyState" class="md-nav__link">
    Connection.prototype.readyState
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_10" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypecollections" title="Connection.prototype.collections" class="md-nav__link">
    Connection.prototype.collections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypedb" title="Connection.prototype.db" class="md-nav__link">
    Connection.prototype.db
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypeconfig" title="Connection.prototype.config" class="md-nav__link">
    Connection.prototype.config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypecreatecollection" title="Connection.prototype.createCollection()" class="md-nav__link">
    Connection.prototype.createCollection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_20" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_6" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypedropcollection" title="Connection.prototype.dropCollection()" class="md-nav__link">
    Connection.prototype.dropCollection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_21" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_7" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypedropdatabase" title="Connection.prototype.dropDatabase()" class="md-nav__link">
    Connection.prototype.dropDatabase()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_22" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_8" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypeclose" title="Connection.prototype.close()" class="md-nav__link">
    Connection.prototype.close()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_23" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_9" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypecollection" title="Connection.prototype.collection()" class="md-nav__link">
    Connection.prototype.collection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_24" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_10" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypemodel" title="Connection.prototype.model()" class="md-nav__link">
    Connection.prototype.model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_25" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_11" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_11" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypemodelnames" title="Connection.prototype.modelNames()" class="md-nav__link">
    Connection.prototype.modelNames()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_12" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeschema" title="Document.prototype.schema" class="md-nav__link">
    Document.prototype.schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisnew" title="Document.prototype.isNew" class="md-nav__link">
    Document.prototype.isNew
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeid" title="Document.prototype.id" class="md-nav__link">
    Document.prototype.id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note_1" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeerrors" title="Document.prototype.errors" class="md-nav__link">
    Document.prototype.errors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeinit" title="Document.prototype.init()" class="md-nav__link">
    Document.prototype.init()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_26" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeupdate" title="Document.prototype.update()" class="md-nav__link">
    Document.prototype.update()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_27" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_13" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_12" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options" title="Valid options:" class="md-nav__link">
    Valid options:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeset" title="Document.prototype.$set()" class="md-nav__link">
    Document.prototype.$set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_28" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeset_1" title="Document.prototype.set()" class="md-nav__link">
    Document.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_29" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_13" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeget" title="Document.prototype.get()" class="md-nav__link">
    Document.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_30" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_14" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypemarkmodified" title="Document.prototype.markModified()" class="md-nav__link">
    Document.prototype.markModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_31" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_15" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeunmarkmodified" title="Document.prototype.unmarkModified()" class="md-nav__link">
    Document.prototype.unmarkModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_32" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_16" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeignore" title="Document.prototype.$ignore()" class="md-nav__link">
    Document.prototype.$ignore()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_33" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_17" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypemodifiedpaths" title="Document.prototype.modifiedPaths()" class="md-nav__link">
    Document.prototype.modifiedPaths()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_14" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeismodified" title="Document.prototype.isModified()" class="md-nav__link">
    Document.prototype.isModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_34" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_15" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_18" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdefault" title="Document.prototype.$isDefault()" class="md-nav__link">
    Document.prototype.$isDefault()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_35" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_16" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_19" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdeleted" title="Document.prototype.$isDeleted()" class="md-nav__link">
    Document.prototype.$isDeleted()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_36" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_17" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_20" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdirectmodified" title="Document.prototype.isDirectModified()" class="md-nav__link">
    Document.prototype.isDirectModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_37" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_18" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_21" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisinit" title="Document.prototype.isInit()" class="md-nav__link">
    Document.prototype.isInit()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_38" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_19" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisselected" title="Document.prototype.isSelected()" class="md-nav__link">
    Document.prototype.isSelected()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_39" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_20" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_22" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdirectselected" title="Document.prototype.isDirectSelected()" class="md-nav__link">
    Document.prototype.isDirectSelected()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_40" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_21" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_23" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypevalidate" title="Document.prototype.validate()" class="md-nav__link">
    Document.prototype.validate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_41" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_22" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_24" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypevalidatesync" title="Document.prototype.validateSync()" class="md-nav__link">
    Document.prototype.validateSync()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_42" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_23" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_25" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeinvalidate" title="Document.prototype.invalidate()" class="md-nav__link">
    Document.prototype.invalidate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_43" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_24" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypemarkvalid" title="Document.prototype.$markValid()" class="md-nav__link">
    Document.prototype.$markValid()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_44" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypesave" title="Document.prototype.save()" class="md-nav__link">
    Document.prototype.save()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_45" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_25" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_26" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_27" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypetoobject" title="Document.prototype.toObject()" class="md-nav__link">
    Document.prototype.toObject()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_46" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_26" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_1" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gettersvirtuals" title="Getters/Virtuals" class="md-nav__link">
    Getters/Virtuals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transform" title="Transform" class="md-nav__link">
    Transform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_28" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypetojson" title="Document.prototype.toJSON()" class="md-nav__link">
    Document.prototype.toJSON()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_47" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_27" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeinspect" title="Document.prototype.inspect()" class="md-nav__link">
    Document.prototype.inspect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypetostring" title="Document.prototype.toString()" class="md-nav__link">
    Document.prototype.toString()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeequals" title="Document.prototype.equals()" class="md-nav__link">
    Document.prototype.equals()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_48" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_28" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypepopulate" title="Document.prototype.populate()" class="md-nav__link">
    Document.prototype.populate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_49" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_29" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_29" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeexecpopulate" title="Document.prototype.execPopulate()" class="md-nav__link">
    Document.prototype.execPopulate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_30" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_30" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypepopulated" title="Document.prototype.populated()" class="md-nav__link">
    Document.prototype.populated()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_50" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_31" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_31" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypedepopulate" title="Document.prototype.depopulate()" class="md-nav__link">
    Document.prototype.depopulate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_51" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_32" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_32" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" title="Model()" class="md-nav__link">
    Model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_52" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypedb" title="Model.prototype.db" class="md-nav__link">
    Model.prototype.db
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypecollection" title="Model.prototype.collection" class="md-nav__link">
    Model.prototype.collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypemodelname" title="Model.prototype.modelName" class="md-nav__link">
    Model.prototype.modelName
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypewhere" title="Model.prototype.$where" class="md-nav__link">
    Model.prototype.$where
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypebasemodelname" title="Model.prototype.baseModelName" class="md-nav__link">
    Model.prototype.baseModelName
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypesave" title="Model.prototype.save()" class="md-nav__link">
    Model.prototype.save()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_53" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_33" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_33" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_34" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypeincrement" title="Model.prototype.increment()" class="md-nav__link">
    Model.prototype.increment()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_35" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototyperemove" title="Model.prototype.remove()" class="md-nav__link">
    Model.prototype.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_54" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_34" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_36" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_37" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypemodel" title="Model.prototype.model()" class="md-nav__link">
    Model.prototype.model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_55" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_38" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldiscriminator" title="Model.discriminator()" class="md-nav__link">
    Model.discriminator()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_56" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_39" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelinit" title="Model.init()" class="md-nav__link">
    Model.init()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_57" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_40" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelensureindexes" title="Model.ensureIndexes()" class="md-nav__link">
    Model.ensureIndexes()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_58" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_35" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_41" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_42" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelcreateindexes" title="Model.createIndexes()" class="md-nav__link">
    Model.createIndexes()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_59" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_36" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypeschema" title="Model.prototype.schema" class="md-nav__link">
    Model.prototype.schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypebase" title="Model.prototype.base" class="md-nav__link">
    Model.prototype.base
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypediscriminators" title="Model.prototype.discriminators" class="md-nav__link">
    Model.prototype.discriminators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeltranslatealiases" title="Model.translateAliases()" class="md-nav__link">
    Model.translateAliases()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_60" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_37" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_43" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_5" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelremove" title="Model.remove()" class="md-nav__link">
    Model.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_61" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_38" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_44" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_6" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldeleteone" title="Model.deleteOne()" class="md-nav__link">
    Model.deleteOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_62" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_39" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_45" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_7" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldeletemany" title="Model.deleteMany()" class="md-nav__link">
    Model.deleteMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_63" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_40" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_46" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_8" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfind" title="Model.find()" class="md-nav__link">
    Model.find()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_64" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_41" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindbyid" title="Model.findById()" class="md-nav__link">
    Model.findById()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_65" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_42" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_47" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindone" title="Model.findOne()" class="md-nav__link">
    Model.findOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_66" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_43" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_48" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelcount" title="Model.count()" class="md-nav__link">
    Model.count()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_67" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_44" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_49" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldistinct" title="Model.distinct()" class="md-nav__link">
    Model.distinct()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_68" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_45" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_50" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelwhere" title="Model.where()" class="md-nav__link">
    Model.where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_69" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_46" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypewhere_1" title="Model.prototype.$where()" class="md-nav__link">
    Model.prototype.$where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_70" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_47" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindoneandupdate" title="Model.findOneAndUpdate()" class="md-nav__link">
    Model.findOneAndUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_71" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_48" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_2" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_1" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_9" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_51" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_10" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindbyidandupdate" title="Model.findByIdAndUpdate()" class="md-nav__link">
    Model.findByIdAndUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_72" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_49" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_3" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_2" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_11" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_52" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_12" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindoneandremove" title="Model.findOneAndRemove()" class="md-nav__link">
    Model.findOneAndRemove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_73" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_50" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_4" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_3" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindbyidandremove" title="Model.findByIdAndRemove()" class="md-nav__link">
    Model.findByIdAndRemove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_74" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_51" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_5" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_4" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelcreate" title="Model.create()" class="md-nav__link">
    Model.create()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_75" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_52" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_53" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelwatch" title="Model.watch()" class="md-nav__link">
    Model.watch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_76" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_53" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_54" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelinsertmany" title="Model.insertMany()" class="md-nav__link">
    Model.insertMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_77" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_54" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_55" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelbulkwrite" title="Model.bulkWrite()" class="md-nav__link">
    Model.bulkWrite()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_78" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_55" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_56" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelhydrate" title="Model.hydrate()" class="md-nav__link">
    Model.hydrate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_79" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_56" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_57" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelupdate" title="Model.update()" class="md-nav__link">
    Model.update()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_80" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_57" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_5" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options_1" title="Valid options:" class="md-nav__link">
    Valid options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_13" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_58" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_14" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_15" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_16" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelupdatemany" title="Model.updateMany()" class="md-nav__link">
    Model.updateMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_81" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_58" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelupdateone" title="Model.updateOne()" class="md-nav__link">
    Model.updateOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_82" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_59" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelreplaceone" title="Model.replaceOne()" class="md-nav__link">
    Model.replaceOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_83" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_60" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelmapreduce" title="Model.mapReduce()" class="md-nav__link">
    Model.mapReduce()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_84" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_61" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_59" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-options" title="Other options:" class="md-nav__link">
    Other options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#out-options" title="* out options:" class="md-nav__link">
    * out options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_60" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelaggregate" title="Model.aggregate()" class="md-nav__link">
    Model.aggregate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_85" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_62" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_61" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_17" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelgeosearch" title="Model.geoSearch()" class="md-nav__link">
    Model.geoSearch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_86" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_63" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_62" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_6" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelpopulate" title="Model.populate()" class="md-nav__link">
    Model.populate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_87" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_64" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options" title="Available options:" class="md-nav__link">
    Available options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_6" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query" title="Query()" class="md-nav__link">
    Query()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_88" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_63" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeusegeowithin" title="Query.prototype.use$geoWithin" class="md-nav__link">
    Query.prototype.use$geoWithin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypetoconstructor" title="Query.prototype.toConstructor()" class="md-nav__link">
    Query.prototype.toConstructor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_65" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_64" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypewhere" title="Query.prototype.$where()" class="md-nav__link">
    Query.prototype.$where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_89" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_66" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_65" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_18" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypewhere_1" title="Query.prototype.where()" class="md-nav__link">
    Query.prototype.where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_90" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_67" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_66" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeequals" title="Query.prototype.equals()" class="md-nav__link">
    Query.prototype.equals()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_91" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_68" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_67" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeor" title="Query.prototype.or()" class="md-nav__link">
    Query.prototype.or()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_92" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_69" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_68" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypenor" title="Query.prototype.nor()" class="md-nav__link">
    Query.prototype.nor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_93" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_70" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_69" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeand" title="Query.prototype.and()" class="md-nav__link">
    Query.prototype.and()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_94" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_71" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_70" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypegt" title="Query.prototype.gt()" class="md-nav__link">
    Query.prototype.gt()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_95" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_71" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypegte" title="Query.prototype.gte()" class="md-nav__link">
    Query.prototype.gte()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_96" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypelt" title="Query.prototype.lt()" class="md-nav__link">
    Query.prototype.lt()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_97" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypelte" title="Query.prototype.lte()" class="md-nav__link">
    Query.prototype.lte()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_98" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypene" title="Query.prototype.ne()" class="md-nav__link">
    Query.prototype.ne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_99" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypein" title="Query.prototype.in()" class="md-nav__link">
    Query.prototype.in()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_100" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypenin" title="Query.prototype.nin()" class="md-nav__link">
    Query.prototype.nin()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_101" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeall" title="Query.prototype.all()" class="md-nav__link">
    Query.prototype.all()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_102" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypesize" title="Query.prototype.size()" class="md-nav__link">
    Query.prototype.size()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_103" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_72" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototyperegex" title="Query.prototype.regex()" class="md-nav__link">
    Query.prototype.regex()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_104" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemaxdistance" title="Query.prototype.maxDistance()" class="md-nav__link">
    Query.prototype.maxDistance()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_105" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemod" title="Query.prototype.mod()" class="md-nav__link">
    Query.prototype.mod()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_106" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_72" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_73" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeexists" title="Query.prototype.exists()" class="md-nav__link">
    Query.prototype.exists()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_107" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_73" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_74" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeelemmatch" title="Query.prototype.elemMatch()" class="md-nav__link">
    Query.prototype.elemMatch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_108" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_74" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_75" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypewithin" title="Query.prototype.within()" class="md-nav__link">
    Query.prototype.within()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_75" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_76" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_19" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_20" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeslice" title="Query.prototype.slice()" class="md-nav__link">
    Query.prototype.slice()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_109" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_76" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_77" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypelimit" title="Query.prototype.limit()" class="md-nav__link">
    Query.prototype.limit()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_110" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_78" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_21" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeskip" title="Query.prototype.skip()" class="md-nav__link">
    Query.prototype.skip()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_111" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_79" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_22" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemaxscan" title="Query.prototype.maxScan()" class="md-nav__link">
    Query.prototype.maxScan()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_112" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_80" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_23" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypebatchsize" title="Query.prototype.batchSize()" class="md-nav__link">
    Query.prototype.batchSize()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_113" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_81" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_24" title="Note" class="md-nav__link">
    Note
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_114" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_82" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_25" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypesnapshot" title="Query.prototype.snapshot()" class="md-nav__link">
    Query.prototype.snapshot()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_77" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_83" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_26" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypehint" title="Query.prototype.hint()" class="md-nav__link">
    Query.prototype.hint()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_115" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_78" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_84" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_27" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeselect" title="Query.prototype.select()" class="md-nav__link">
    Query.prototype.select()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_116" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_79" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_85" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeslaveok" title="Query.prototype.slaveOk()" class="md-nav__link">
    Query.prototype.slaveOk()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_117" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_80" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_86" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototyperead" title="Query.prototype.read()" class="md-nav__link">
    Query.prototype.read()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_118" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_81" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preferences" title="Preferences:" class="md-nav__link">
    Preferences:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_87" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemerge" title="Query.prototype.merge()" class="md-nav__link">
    Query.prototype.merge()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_119" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_82" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypesetoptions" title="Query.prototype.setOptions()" class="md-nav__link">
    Query.prototype.setOptions()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_120" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_7" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-following-options-are-for-all-operations" title="The following options are for all operations" class="md-nav__link">
    The following options are for all operations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#queryprototypegetquery" title="Query.prototype.getQuery()" class="md-nav__link">
    Query.prototype.getQuery()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_83" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_88" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypegetupdate" title="Query.prototype.getUpdate()" class="md-nav__link">
    Query.prototype.getUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_84" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_89" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypelean" title="Query.prototype.lean()" class="md-nav__link">
    Query.prototype.lean()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_121" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_85" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_90" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeerror" title="Query.prototype.error()" class="md-nav__link">
    Query.prototype.error()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_122" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_91" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_92" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypemongooseoptions" title="Query.prototype.mongooseOptions()" class="md-nav__link">
    Query.prototype.mongooseOptions()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_123" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefind" title="Query.prototype.find()" class="md-nav__link">
    Query.prototype.find()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_124" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_86" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_93" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypemerge_1" title="Query.prototype.merge()" class="md-nav__link">
    Query.prototype.merge()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_125" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_87" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecollation" title="Query.prototype.collation()" class="md-nav__link">
    Query.prototype.collation()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_126" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_88" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefindone" title="Query.prototype.findOne()" class="md-nav__link">
    Query.prototype.findOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_127" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_89" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_94" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecount" title="Query.prototype.count()" class="md-nav__link">
    Query.prototype.count()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_128" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_90" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_95" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypedistinct" title="Query.prototype.distinct()" class="md-nav__link">
    Query.prototype.distinct()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_129" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_91" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_96" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypesort" title="Query.prototype.sort()" class="md-nav__link">
    Query.prototype.sort()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_130" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_92" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_97" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_28" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototyperemove" title="Query.prototype.remove()" class="md-nav__link">
    Query.prototype.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_131" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_93" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_98" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_29" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypedeleteone" title="Query.prototype.deleteOne()" class="md-nav__link">
    Query.prototype.deleteOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_132" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_94" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_99" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypedeletemany" title="Query.prototype.deleteMany()" class="md-nav__link">
    Query.prototype.deleteMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_133" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_95" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_100" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefindoneandupdate" title="Query.prototype.findOneAndUpdate()" class="md-nav__link">
    Query.prototype.findOneAndUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_134" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_96" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options_1" title="Available options" class="md-nav__link">
    Available options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-signature" title="Callback Signature" class="md-nav__link">
    Callback Signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_7" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefindoneandremove" title="Query.prototype.findOneAndRemove()" class="md-nav__link">
    Query.prototype.findOneAndRemove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_135" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_97" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options_2" title="Available options" class="md-nav__link">
    Available options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-signature_1" title="Callback Signature" class="md-nav__link">
    Callback Signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_8" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeupdate" title="Query.prototype.update()" class="md-nav__link">
    Query.prototype.update()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_136" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_98" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_101" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options_2" title="Valid options:" class="md-nav__link">
    Valid options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_30" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_31" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeupdatemany" title="Query.prototype.updateMany()" class="md-nav__link">
    Query.prototype.updateMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_137" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_99" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeupdateone" title="Query.prototype.updateOne()" class="md-nav__link">
    Query.prototype.updateOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_138" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_100" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypereplaceone" title="Query.prototype.replaceOne()" class="md-nav__link">
    Query.prototype.replaceOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_139" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_101" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeexec" title="Query.prototype.exec()" class="md-nav__link">
    Query.prototype.exec()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_140" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_102" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_9" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypethen" title="Query.prototype.then()" class="md-nav__link">
    Query.prototype.then()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_141" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_103" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecatch" title="Query.prototype.catch()" class="md-nav__link">
    Query.prototype.catch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_142" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_104" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypepopulate" title="Query.prototype.populate()" class="md-nav__link">
    Query.prototype.populate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_143" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_105" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_102" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecast" title="Query.prototype.cast()" class="md-nav__link">
    Query.prototype.cast()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_144" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_106" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_32" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecursor" title="Query.prototype.cursor()" class="md-nav__link">
    Query.prototype.cursor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_145" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_107" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_103" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options_3" title="Valid options" class="md-nav__link">
    Valid options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypemaxscan_1" title="Query.prototype.maxscan()" class="md-nav__link">
    Query.prototype.maxscan()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypetailable" title="Query.prototype.tailable()" class="md-nav__link">
    Query.prototype.tailable()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_146" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_104" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_33" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeintersects" title="Query.prototype.intersects()" class="md-nav__link">
    Query.prototype.intersects()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_147" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_108" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_105" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_34" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_35" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypegeometry" title="Query.prototype.geometry()" class="md-nav__link">
    Query.prototype.geometry()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_148" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_109" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_106" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_36" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypenear" title="Query.prototype.near()" class="md-nav__link">
    Query.prototype.near()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_149" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_110" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_107" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypenearsphere" title="Query.prototype.nearSphere()" class="md-nav__link">
    Query.prototype.nearSphere()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_108" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_109" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypepolygon" title="Query.prototype.polygon()" class="md-nav__link">
    Query.prototype.polygon()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_150" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_111" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_110" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypebox" title="Query.prototype.box()" class="md-nav__link">
    Query.prototype.box()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_151" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_112" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_111" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecircle" title="Query.prototype.circle()" class="md-nav__link">
    Query.prototype.circle()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_152" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_113" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_112" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecenter" title="Query.prototype.center()" class="md-nav__link">
    Query.prototype.center()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecentersphere" title="Query.prototype.centerSphere()" class="md-nav__link">
    Query.prototype.centerSphere()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_153" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_114" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_113" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeselected" title="Query.prototype.selected()" class="md-nav__link">
    Query.prototype.selected()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_115" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeselectedinclusively" title="Query.prototype.selectedInclusively()" class="md-nav__link">
    Query.prototype.selectedInclusively()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_116" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeselectedexclusively" title="Query.prototype.selectedExclusively()" class="md-nav__link">
    Query.prototype.selectedExclusively()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_117" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregate" title="Aggregate()" class="md-nav__link">
    Aggregate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_154" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_114" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_37" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypemodel" title="Aggregate.prototype.model()" class="md-nav__link">
    Aggregate.prototype.model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_155" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_118" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeappend" title="Aggregate.prototype.append()" class="md-nav__link">
    Aggregate.prototype.append()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_156" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_119" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_10" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeaddfields" title="Aggregate.prototype.addFields()" class="md-nav__link">
    Aggregate.prototype.addFields()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_157" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_120" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_11" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeproject" title="Aggregate.prototype.project()" class="md-nav__link">
    Aggregate.prototype.project()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_158" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_121" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_12" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypegroup" title="Aggregate.prototype.group()" class="md-nav__link">
    Aggregate.prototype.group()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_159" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_122" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_13" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypematch" title="Aggregate.prototype.match()" class="md-nav__link">
    Aggregate.prototype.match()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_160" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_123" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_14" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeskip" title="Aggregate.prototype.skip()" class="md-nav__link">
    Aggregate.prototype.skip()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_161" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_124" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_15" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypelimit" title="Aggregate.prototype.limit()" class="md-nav__link">
    Aggregate.prototype.limit()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_162" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_125" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_16" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypenear" title="Aggregate.prototype.near()" class="md-nav__link">
    Aggregate.prototype.near()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_163" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_126" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_38" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_17" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeunwind" title="Aggregate.prototype.unwind()" class="md-nav__link">
    Aggregate.prototype.unwind()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_164" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_127" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_18" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypelookup" title="Aggregate.prototype.lookup()" class="md-nav__link">
    Aggregate.prototype.lookup()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_165" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_128" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_19" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypegraphlookup" title="Aggregate.prototype.graphLookup()" class="md-nav__link">
    Aggregate.prototype.graphLookup()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_166" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_129" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_20" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypesample" title="Aggregate.prototype.sample()" class="md-nav__link">
    Aggregate.prototype.sample()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_167" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_130" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_21" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypesort" title="Aggregate.prototype.sort()" class="md-nav__link">
    Aggregate.prototype.sort()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_168" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_131" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_22" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototyperead" title="Aggregate.prototype.read()" class="md-nav__link">
    Aggregate.prototype.read()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_169" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_115" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeexplain" title="Aggregate.prototype.explain()" class="md-nav__link">
    Aggregate.prototype.explain()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_170" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_132" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_116" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeallowdiskuse" title="Aggregate.prototype.allowDiskUse()" class="md-nav__link">
    Aggregate.prototype.allowDiskUse()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_171" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_117" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeoption" title="Aggregate.prototype.option()" class="md-nav__link">
    Aggregate.prototype.option()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_172" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_133" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_118" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypecursor" title="Aggregate.prototype.cursor()" class="md-nav__link">
    Aggregate.prototype.cursor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_173" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_119" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeaddcursorflag" title="Aggregate.prototype.addCursorFlag()" class="md-nav__link">
    Aggregate.prototype.addCursorFlag()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_174" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_120" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypecollation" title="Aggregate.prototype.collation()" class="md-nav__link">
    Aggregate.prototype.collation()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_175" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_121" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypefacet" title="Aggregate.prototype.facet()" class="md-nav__link">
    Aggregate.prototype.facet()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_176" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_134" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_122" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypepipeline" title="Aggregate.prototype.pipeline()" class="md-nav__link">
    Aggregate.prototype.pipeline()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_135" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_123" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeexec" title="Aggregate.prototype.exec()" class="md-nav__link">
    Aggregate.prototype.exec()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_177" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_136" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_124" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypethen" title="Aggregate.prototype.then()" class="md-nav__link">
    Aggregate.prototype.then()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_178" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_137" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_125" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematype" title="SchemaType()" class="md-nav__link">
    SchemaType()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_179" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_126" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypedefault" title="SchemaType.prototype.default()" class="md-nav__link">
    SchemaType.prototype.default()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_180" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_138" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_127" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_128" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeindex" title="SchemaType.prototype.index()" class="md-nav__link">
    SchemaType.prototype.index()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_181" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_139" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_129" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_39" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeunique" title="SchemaType.prototype.unique()" class="md-nav__link">
    SchemaType.prototype.unique()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_182" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_140" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_130" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypetext" title="SchemaType.prototype.text()" class="md-nav__link">
    SchemaType.prototype.text()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_183" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_141" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_131" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypesparse" title="SchemaType.prototype.sparse()" class="md-nav__link">
    SchemaType.prototype.sparse()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_184" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_142" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_132" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeset" title="SchemaType.prototype.set()" class="md-nav__link">
    SchemaType.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_185" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_143" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_133" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeget" title="SchemaType.prototype.get()" class="md-nav__link">
    SchemaType.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_186" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_144" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_134" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypevalidate" title="SchemaType.prototype.validate()" class="md-nav__link">
    SchemaType.prototype.validate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_187" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_145" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_23" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-message-templates" title="Error message templates:" class="md-nav__link">
    Error message templates:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-validation" title="Asynchronous validation:" class="md-nav__link">
    Asynchronous validation:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototyperequired" title="SchemaType.prototype.required()" class="md-nav__link">
    SchemaType.prototype.required()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_188" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_146" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_135" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeselect" title="SchemaType.prototype.select()" class="md-nav__link">
    SchemaType.prototype.select()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_189" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_147" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_136" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtype" title="VirtualType()" class="md-nav__link">
    VirtualType()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_137" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeget" title="VirtualType.prototype.get()" class="md-nav__link">
    VirtualType.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_190" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_148" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_138" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeset" title="VirtualType.prototype.set()" class="md-nav__link">
    VirtualType.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_191" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_149" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_139" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeapplygetters" title="VirtualType.prototype.applyGetters()" class="md-nav__link">
    VirtualType.prototype.applyGetters()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_192" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_150" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeapplysetters" title="VirtualType.prototype.applySetters()" class="md-nav__link">
    VirtualType.prototype.applySetters()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_193" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_151" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerror" title="MongooseError()" class="md-nav__link">
    MongooseError()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_194" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrormessages" title="MongooseError.messages" class="md-nav__link">
    MongooseError.messages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrordocumentnotfounderror" title="MongooseError.DocumentNotFoundError" class="md-nav__link">
    MongooseError.DocumentNotFoundError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorcasterror" title="MongooseError.CastError" class="md-nav__link">
    MongooseError.CastError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorvalidationerror" title="MongooseError.ValidationError" class="md-nav__link">
    MongooseError.ValidationError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorvalidatorerror" title="MongooseError.ValidatorError" class="md-nav__link">
    MongooseError.ValidatorError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorversionerror" title="MongooseError.VersionError" class="md-nav__link">
    MongooseError.VersionError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerroroverwritemodelerror" title="MongooseError.OverwriteModelError" class="md-nav__link">
    MongooseError.OverwriteModelError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrormissingschemaerror" title="MongooseError.MissingSchemaError" class="md-nav__link">
    MongooseError.MissingSchemaError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrordivergentarrayerror" title="MongooseError.DivergentArrayError" class="md-nav__link">
    MongooseError.DivergentArrayError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Schema/" title="架构" class="md-nav__link">
      架构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Connection/" title="架构" class="md-nav__link">
      架构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Document/" title="文件" class="md-nav__link">
      文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Model/" title="模型" class="md-nav__link">
      模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Query/" title="询问" class="md-nav__link">
      询问
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Aggregate/" title="骨料" class="md-nav__link">
      骨料
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="SchemaType/" title="架构类型" class="md-nav__link">
      架构类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="VirtualType/" title="虚拟类型" class="md-nav__link">
      虚拟类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="Error/" title="错误" class="md-nav__link">
      错误
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../VersionCompatibility/" title="版本兼容性" class="md-nav__link">
      版本兼容性
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../FAQ/" title="常问问题" class="md-nav__link">
      常问问题
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema" title="Schema()" class="md-nav__link">
    Schema()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypechildschemas" title="Schema.prototype.childSchemas" class="md-nav__link">
    Schema.prototype.childSchemas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeobj" title="Schema.prototype.obj" class="md-nav__link">
    Schema.prototype.obj
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeclone" title="Schema.prototype.clone()" class="md-nav__link">
    Schema.prototype.clone()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeadd" title="Schema.prototype.add()" class="md-nav__link">
    Schema.prototype.add()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_1" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemareserved" title="Schema.reserved" class="md-nav__link">
    Schema.reserved
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepath" title="Schema.prototype.path()" class="md-nav__link">
    Schema.prototype.path()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeeachpath" title="Schema.prototype.eachPath()" class="md-nav__link">
    Schema.prototype.eachPath()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_1" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototyperequiredpaths" title="Schema.prototype.requiredPaths()" class="md-nav__link">
    Schema.prototype.requiredPaths()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_2" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepathtype" title="Schema.prototype.pathType()" class="md-nav__link">
    Schema.prototype.pathType()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_3" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypequeue" title="Schema.prototype.queue()" class="md-nav__link">
    Schema.prototype.queue()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_6" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepre" title="Schema.prototype.pre()" class="md-nav__link">
    Schema.prototype.pre()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_7" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_4" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypepost" title="Schema.prototype.post()" class="md-nav__link">
    Schema.prototype.post()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_8" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeplugin" title="Schema.prototype.plugin()" class="md-nav__link">
    Schema.prototype.plugin()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_9" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypemethod" title="Schema.prototype.method()" class="md-nav__link">
    Schema.prototype.method()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_10" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_5" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypestatic" title="Schema.prototype.static()" class="md-nav__link">
    Schema.prototype.static()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_11" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_6" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeindex" title="Schema.prototype.index()" class="md-nav__link">
    Schema.prototype.index()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_12" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_7" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeset" title="Schema.prototype.set()" class="md-nav__link">
    Schema.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_13" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_8" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeget" title="Schema.prototype.get()" class="md-nav__link">
    Schema.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_14" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#indextypes" title="indexTypes" class="md-nav__link">
    indexTypes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeindexes" title="Schema.prototype.indexes()" class="md-nav__link">
    Schema.prototype.indexes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypevirtual" title="Schema.prototype.virtual()" class="md-nav__link">
    Schema.prototype.virtual()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_15" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_4" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypevirtualpath" title="Schema.prototype.virtualpath()" class="md-nav__link">
    Schema.prototype.virtualpath()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_16" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_5" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototyperemove" title="Schema.prototype.remove()" class="md-nav__link">
    Schema.prototype.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_17" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemaprototypeloadclass" title="Schema.prototype.loadClass()" class="md-nav__link">
    Schema.prototype.loadClass()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_18" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schematypes" title="Schema.Types" class="md-nav__link">
    Schema.Types
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_9" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" title="Types:" class="md-nav__link">
    Types:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection" title="Connection()" class="md-nav__link">
    Connection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_19" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypereadystate" title="Connection.prototype.readyState" class="md-nav__link">
    Connection.prototype.readyState
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_10" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypecollections" title="Connection.prototype.collections" class="md-nav__link">
    Connection.prototype.collections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypedb" title="Connection.prototype.db" class="md-nav__link">
    Connection.prototype.db
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypeconfig" title="Connection.prototype.config" class="md-nav__link">
    Connection.prototype.config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypecreatecollection" title="Connection.prototype.createCollection()" class="md-nav__link">
    Connection.prototype.createCollection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_20" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_6" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypedropcollection" title="Connection.prototype.dropCollection()" class="md-nav__link">
    Connection.prototype.dropCollection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_21" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_7" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypedropdatabase" title="Connection.prototype.dropDatabase()" class="md-nav__link">
    Connection.prototype.dropDatabase()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_22" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_8" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypeclose" title="Connection.prototype.close()" class="md-nav__link">
    Connection.prototype.close()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_23" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_9" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypecollection" title="Connection.prototype.collection()" class="md-nav__link">
    Connection.prototype.collection()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_24" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_10" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypemodel" title="Connection.prototype.model()" class="md-nav__link">
    Connection.prototype.model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_25" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_11" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_11" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connectionprototypemodelnames" title="Connection.prototype.modelNames()" class="md-nav__link">
    Connection.prototype.modelNames()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_12" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeschema" title="Document.prototype.schema" class="md-nav__link">
    Document.prototype.schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisnew" title="Document.prototype.isNew" class="md-nav__link">
    Document.prototype.isNew
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeid" title="Document.prototype.id" class="md-nav__link">
    Document.prototype.id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note_1" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeerrors" title="Document.prototype.errors" class="md-nav__link">
    Document.prototype.errors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeinit" title="Document.prototype.init()" class="md-nav__link">
    Document.prototype.init()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_26" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeupdate" title="Document.prototype.update()" class="md-nav__link">
    Document.prototype.update()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_27" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_13" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_12" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options" title="Valid options:" class="md-nav__link">
    Valid options:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeset" title="Document.prototype.$set()" class="md-nav__link">
    Document.prototype.$set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_28" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeset_1" title="Document.prototype.set()" class="md-nav__link">
    Document.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_29" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_13" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeget" title="Document.prototype.get()" class="md-nav__link">
    Document.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_30" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_14" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypemarkmodified" title="Document.prototype.markModified()" class="md-nav__link">
    Document.prototype.markModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_31" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_15" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeunmarkmodified" title="Document.prototype.unmarkModified()" class="md-nav__link">
    Document.prototype.unmarkModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_32" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_16" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeignore" title="Document.prototype.$ignore()" class="md-nav__link">
    Document.prototype.$ignore()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_33" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_17" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypemodifiedpaths" title="Document.prototype.modifiedPaths()" class="md-nav__link">
    Document.prototype.modifiedPaths()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_14" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeismodified" title="Document.prototype.isModified()" class="md-nav__link">
    Document.prototype.isModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_34" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_15" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_18" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdefault" title="Document.prototype.$isDefault()" class="md-nav__link">
    Document.prototype.$isDefault()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_35" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_16" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_19" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdeleted" title="Document.prototype.$isDeleted()" class="md-nav__link">
    Document.prototype.$isDeleted()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_36" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_17" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_20" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdirectmodified" title="Document.prototype.isDirectModified()" class="md-nav__link">
    Document.prototype.isDirectModified()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_37" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_18" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_21" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisinit" title="Document.prototype.isInit()" class="md-nav__link">
    Document.prototype.isInit()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_38" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_19" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisselected" title="Document.prototype.isSelected()" class="md-nav__link">
    Document.prototype.isSelected()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_39" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_20" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_22" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeisdirectselected" title="Document.prototype.isDirectSelected()" class="md-nav__link">
    Document.prototype.isDirectSelected()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_40" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_21" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_23" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypevalidate" title="Document.prototype.validate()" class="md-nav__link">
    Document.prototype.validate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_41" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_22" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_24" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypevalidatesync" title="Document.prototype.validateSync()" class="md-nav__link">
    Document.prototype.validateSync()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_42" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_23" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_25" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeinvalidate" title="Document.prototype.invalidate()" class="md-nav__link">
    Document.prototype.invalidate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_43" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_24" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypemarkvalid" title="Document.prototype.$markValid()" class="md-nav__link">
    Document.prototype.$markValid()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_44" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypesave" title="Document.prototype.save()" class="md-nav__link">
    Document.prototype.save()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_45" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_25" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_26" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_27" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypetoobject" title="Document.prototype.toObject()" class="md-nav__link">
    Document.prototype.toObject()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_46" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_26" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_1" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gettersvirtuals" title="Getters/Virtuals" class="md-nav__link">
    Getters/Virtuals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transform" title="Transform" class="md-nav__link">
    Transform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_28" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypetojson" title="Document.prototype.toJSON()" class="md-nav__link">
    Document.prototype.toJSON()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_47" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_27" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeinspect" title="Document.prototype.inspect()" class="md-nav__link">
    Document.prototype.inspect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypetostring" title="Document.prototype.toString()" class="md-nav__link">
    Document.prototype.toString()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeequals" title="Document.prototype.equals()" class="md-nav__link">
    Document.prototype.equals()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_48" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_28" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypepopulate" title="Document.prototype.populate()" class="md-nav__link">
    Document.prototype.populate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_49" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_29" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_29" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypeexecpopulate" title="Document.prototype.execPopulate()" class="md-nav__link">
    Document.prototype.execPopulate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_30" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_30" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypepopulated" title="Document.prototype.populated()" class="md-nav__link">
    Document.prototype.populated()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_50" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_31" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_31" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentprototypedepopulate" title="Document.prototype.depopulate()" class="md-nav__link">
    Document.prototype.depopulate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_51" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_32" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_32" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" title="Model()" class="md-nav__link">
    Model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_52" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypedb" title="Model.prototype.db" class="md-nav__link">
    Model.prototype.db
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypecollection" title="Model.prototype.collection" class="md-nav__link">
    Model.prototype.collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypemodelname" title="Model.prototype.modelName" class="md-nav__link">
    Model.prototype.modelName
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypewhere" title="Model.prototype.$where" class="md-nav__link">
    Model.prototype.$where
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypebasemodelname" title="Model.prototype.baseModelName" class="md-nav__link">
    Model.prototype.baseModelName
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypesave" title="Model.prototype.save()" class="md-nav__link">
    Model.prototype.save()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_53" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_33" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_33" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_34" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypeincrement" title="Model.prototype.increment()" class="md-nav__link">
    Model.prototype.increment()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_35" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototyperemove" title="Model.prototype.remove()" class="md-nav__link">
    Model.prototype.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_54" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_34" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_36" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_37" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypemodel" title="Model.prototype.model()" class="md-nav__link">
    Model.prototype.model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_55" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_38" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldiscriminator" title="Model.discriminator()" class="md-nav__link">
    Model.discriminator()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_56" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_39" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelinit" title="Model.init()" class="md-nav__link">
    Model.init()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_57" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_40" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelensureindexes" title="Model.ensureIndexes()" class="md-nav__link">
    Model.ensureIndexes()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_58" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_35" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_41" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_42" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelcreateindexes" title="Model.createIndexes()" class="md-nav__link">
    Model.createIndexes()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_59" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_36" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypeschema" title="Model.prototype.schema" class="md-nav__link">
    Model.prototype.schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypebase" title="Model.prototype.base" class="md-nav__link">
    Model.prototype.base
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypediscriminators" title="Model.prototype.discriminators" class="md-nav__link">
    Model.prototype.discriminators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeltranslatealiases" title="Model.translateAliases()" class="md-nav__link">
    Model.translateAliases()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_60" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_37" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_43" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_5" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelremove" title="Model.remove()" class="md-nav__link">
    Model.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_61" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_38" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_44" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_6" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldeleteone" title="Model.deleteOne()" class="md-nav__link">
    Model.deleteOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_62" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_39" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_45" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_7" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldeletemany" title="Model.deleteMany()" class="md-nav__link">
    Model.deleteMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_63" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_40" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_46" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_8" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfind" title="Model.find()" class="md-nav__link">
    Model.find()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_64" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_41" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindbyid" title="Model.findById()" class="md-nav__link">
    Model.findById()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_65" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_42" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_47" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindone" title="Model.findOne()" class="md-nav__link">
    Model.findOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_66" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_43" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_48" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelcount" title="Model.count()" class="md-nav__link">
    Model.count()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_67" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_44" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_49" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeldistinct" title="Model.distinct()" class="md-nav__link">
    Model.distinct()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_68" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_45" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_50" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelwhere" title="Model.where()" class="md-nav__link">
    Model.where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_69" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_46" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelprototypewhere_1" title="Model.prototype.$where()" class="md-nav__link">
    Model.prototype.$where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_70" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_47" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindoneandupdate" title="Model.findOneAndUpdate()" class="md-nav__link">
    Model.findOneAndUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_71" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_48" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_2" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_1" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_9" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_51" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_10" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindbyidandupdate" title="Model.findByIdAndUpdate()" class="md-nav__link">
    Model.findByIdAndUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_72" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_49" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_3" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_2" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_11" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_52" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_12" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindoneandremove" title="Model.findOneAndRemove()" class="md-nav__link">
    Model.findOneAndRemove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_73" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_50" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_4" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_3" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelfindbyidandremove" title="Model.findByIdAndRemove()" class="md-nav__link">
    Model.findByIdAndRemove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_74" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_51" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_5" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_4" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelcreate" title="Model.create()" class="md-nav__link">
    Model.create()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_75" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_52" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_53" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelwatch" title="Model.watch()" class="md-nav__link">
    Model.watch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_76" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_53" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_54" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelinsertmany" title="Model.insertMany()" class="md-nav__link">
    Model.insertMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_77" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_54" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_55" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelbulkwrite" title="Model.bulkWrite()" class="md-nav__link">
    Model.bulkWrite()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_78" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_55" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_56" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelhydrate" title="Model.hydrate()" class="md-nav__link">
    Model.hydrate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_79" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_56" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_57" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelupdate" title="Model.update()" class="md-nav__link">
    Model.update()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_80" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_57" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_5" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options_1" title="Valid options:" class="md-nav__link">
    Valid options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_13" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_58" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_14" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_15" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_16" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelupdatemany" title="Model.updateMany()" class="md-nav__link">
    Model.updateMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_81" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_58" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelupdateone" title="Model.updateOne()" class="md-nav__link">
    Model.updateOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_82" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_59" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelreplaceone" title="Model.replaceOne()" class="md-nav__link">
    Model.replaceOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_83" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_60" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelmapreduce" title="Model.mapReduce()" class="md-nav__link">
    Model.mapReduce()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_84" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_61" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_59" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-options" title="Other options:" class="md-nav__link">
    Other options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#out-options" title="* out options:" class="md-nav__link">
    * out options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_60" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelaggregate" title="Model.aggregate()" class="md-nav__link">
    Model.aggregate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_85" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_62" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_61" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_17" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelgeosearch" title="Model.geoSearch()" class="md-nav__link">
    Model.geoSearch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_86" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_63" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_62" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_6" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelpopulate" title="Model.populate()" class="md-nav__link">
    Model.populate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_87" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_64" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options" title="Available options:" class="md-nav__link">
    Available options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_6" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query" title="Query()" class="md-nav__link">
    Query()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_88" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_63" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeusegeowithin" title="Query.prototype.use$geoWithin" class="md-nav__link">
    Query.prototype.use$geoWithin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypetoconstructor" title="Query.prototype.toConstructor()" class="md-nav__link">
    Query.prototype.toConstructor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_65" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_64" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypewhere" title="Query.prototype.$where()" class="md-nav__link">
    Query.prototype.$where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_89" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_66" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_65" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_18" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypewhere_1" title="Query.prototype.where()" class="md-nav__link">
    Query.prototype.where()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_90" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_67" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_66" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeequals" title="Query.prototype.equals()" class="md-nav__link">
    Query.prototype.equals()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_91" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_68" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_67" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeor" title="Query.prototype.or()" class="md-nav__link">
    Query.prototype.or()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_92" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_69" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_68" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypenor" title="Query.prototype.nor()" class="md-nav__link">
    Query.prototype.nor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_93" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_70" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_69" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeand" title="Query.prototype.and()" class="md-nav__link">
    Query.prototype.and()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_94" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_71" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_70" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypegt" title="Query.prototype.gt()" class="md-nav__link">
    Query.prototype.gt()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_95" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_71" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypegte" title="Query.prototype.gte()" class="md-nav__link">
    Query.prototype.gte()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_96" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypelt" title="Query.prototype.lt()" class="md-nav__link">
    Query.prototype.lt()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_97" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypelte" title="Query.prototype.lte()" class="md-nav__link">
    Query.prototype.lte()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_98" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypene" title="Query.prototype.ne()" class="md-nav__link">
    Query.prototype.ne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_99" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypein" title="Query.prototype.in()" class="md-nav__link">
    Query.prototype.in()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_100" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypenin" title="Query.prototype.nin()" class="md-nav__link">
    Query.prototype.nin()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_101" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeall" title="Query.prototype.all()" class="md-nav__link">
    Query.prototype.all()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_102" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypesize" title="Query.prototype.size()" class="md-nav__link">
    Query.prototype.size()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_103" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_72" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototyperegex" title="Query.prototype.regex()" class="md-nav__link">
    Query.prototype.regex()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_104" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemaxdistance" title="Query.prototype.maxDistance()" class="md-nav__link">
    Query.prototype.maxDistance()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_105" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemod" title="Query.prototype.mod()" class="md-nav__link">
    Query.prototype.mod()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_106" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_72" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_73" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeexists" title="Query.prototype.exists()" class="md-nav__link">
    Query.prototype.exists()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_107" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_73" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_74" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeelemmatch" title="Query.prototype.elemMatch()" class="md-nav__link">
    Query.prototype.elemMatch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_108" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_74" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_75" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypewithin" title="Query.prototype.within()" class="md-nav__link">
    Query.prototype.within()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_75" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_76" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_19" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_20" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeslice" title="Query.prototype.slice()" class="md-nav__link">
    Query.prototype.slice()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_109" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_76" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_77" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypelimit" title="Query.prototype.limit()" class="md-nav__link">
    Query.prototype.limit()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_110" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_78" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_21" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeskip" title="Query.prototype.skip()" class="md-nav__link">
    Query.prototype.skip()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_111" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_79" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_22" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemaxscan" title="Query.prototype.maxScan()" class="md-nav__link">
    Query.prototype.maxScan()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_112" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_80" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_23" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypebatchsize" title="Query.prototype.batchSize()" class="md-nav__link">
    Query.prototype.batchSize()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_113" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_81" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_24" title="Note" class="md-nav__link">
    Note
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_114" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_82" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_25" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypesnapshot" title="Query.prototype.snapshot()" class="md-nav__link">
    Query.prototype.snapshot()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_77" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_83" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_26" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypehint" title="Query.prototype.hint()" class="md-nav__link">
    Query.prototype.hint()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_115" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_78" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_84" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_27" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeselect" title="Query.prototype.select()" class="md-nav__link">
    Query.prototype.select()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_116" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_79" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_85" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypeslaveok" title="Query.prototype.slaveOk()" class="md-nav__link">
    Query.prototype.slaveOk()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_117" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_80" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_86" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototyperead" title="Query.prototype.read()" class="md-nav__link">
    Query.prototype.read()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_118" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_81" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preferences" title="Preferences:" class="md-nav__link">
    Preferences:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_87" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypemerge" title="Query.prototype.merge()" class="md-nav__link">
    Query.prototype.merge()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_119" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_82" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryprototypesetoptions" title="Query.prototype.setOptions()" class="md-nav__link">
    Query.prototype.setOptions()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_120" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options_7" title="Options:" class="md-nav__link">
    Options:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-following-options-are-for-all-operations" title="The following options are for all operations" class="md-nav__link">
    The following options are for all operations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#queryprototypegetquery" title="Query.prototype.getQuery()" class="md-nav__link">
    Query.prototype.getQuery()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_83" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_88" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypegetupdate" title="Query.prototype.getUpdate()" class="md-nav__link">
    Query.prototype.getUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_84" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_89" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypelean" title="Query.prototype.lean()" class="md-nav__link">
    Query.prototype.lean()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_121" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_85" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_90" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeerror" title="Query.prototype.error()" class="md-nav__link">
    Query.prototype.error()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_122" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_91" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_92" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypemongooseoptions" title="Query.prototype.mongooseOptions()" class="md-nav__link">
    Query.prototype.mongooseOptions()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_123" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefind" title="Query.prototype.find()" class="md-nav__link">
    Query.prototype.find()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_124" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_86" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_93" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypemerge_1" title="Query.prototype.merge()" class="md-nav__link">
    Query.prototype.merge()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_125" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_87" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecollation" title="Query.prototype.collation()" class="md-nav__link">
    Query.prototype.collation()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_126" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_88" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefindone" title="Query.prototype.findOne()" class="md-nav__link">
    Query.prototype.findOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_127" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_89" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_94" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecount" title="Query.prototype.count()" class="md-nav__link">
    Query.prototype.count()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_128" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_90" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_95" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypedistinct" title="Query.prototype.distinct()" class="md-nav__link">
    Query.prototype.distinct()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_129" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_91" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_96" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypesort" title="Query.prototype.sort()" class="md-nav__link">
    Query.prototype.sort()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_130" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_92" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_97" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_28" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototyperemove" title="Query.prototype.remove()" class="md-nav__link">
    Query.prototype.remove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_131" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_93" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_98" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_29" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypedeleteone" title="Query.prototype.deleteOne()" class="md-nav__link">
    Query.prototype.deleteOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_132" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_94" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_99" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypedeletemany" title="Query.prototype.deleteMany()" class="md-nav__link">
    Query.prototype.deleteMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_133" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_95" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_100" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefindoneandupdate" title="Query.prototype.findOneAndUpdate()" class="md-nav__link">
    Query.prototype.findOneAndUpdate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_134" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_96" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options_1" title="Available options" class="md-nav__link">
    Available options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-signature" title="Callback Signature" class="md-nav__link">
    Callback Signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_7" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypefindoneandremove" title="Query.prototype.findOneAndRemove()" class="md-nav__link">
    Query.prototype.findOneAndRemove()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_135" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_97" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options_2" title="Available options" class="md-nav__link">
    Available options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-signature_1" title="Callback Signature" class="md-nav__link">
    Callback Signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_8" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeupdate" title="Query.prototype.update()" class="md-nav__link">
    Query.prototype.update()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_136" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_98" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_101" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options_2" title="Valid options:" class="md-nav__link">
    Valid options:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_30" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_31" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeupdatemany" title="Query.prototype.updateMany()" class="md-nav__link">
    Query.prototype.updateMany()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_137" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_99" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeupdateone" title="Query.prototype.updateOne()" class="md-nav__link">
    Query.prototype.updateOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_138" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_100" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypereplaceone" title="Query.prototype.replaceOne()" class="md-nav__link">
    Query.prototype.replaceOne()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_139" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_101" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeexec" title="Query.prototype.exec()" class="md-nav__link">
    Query.prototype.exec()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_140" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_102" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_9" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypethen" title="Query.prototype.then()" class="md-nav__link">
    Query.prototype.then()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_141" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_103" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecatch" title="Query.prototype.catch()" class="md-nav__link">
    Query.prototype.catch()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_142" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_104" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypepopulate" title="Query.prototype.populate()" class="md-nav__link">
    Query.prototype.populate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_143" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_105" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_102" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecast" title="Query.prototype.cast()" class="md-nav__link">
    Query.prototype.cast()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_144" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_106" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_32" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecursor" title="Query.prototype.cursor()" class="md-nav__link">
    Query.prototype.cursor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_145" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_107" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_103" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-options_3" title="Valid options" class="md-nav__link">
    Valid options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypemaxscan_1" title="Query.prototype.maxscan()" class="md-nav__link">
    Query.prototype.maxscan()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypetailable" title="Query.prototype.tailable()" class="md-nav__link">
    Query.prototype.tailable()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_146" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_104" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_33" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeintersects" title="Query.prototype.intersects()" class="md-nav__link">
    Query.prototype.intersects()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_147" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_108" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_105" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_34" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_35" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypegeometry" title="Query.prototype.geometry()" class="md-nav__link">
    Query.prototype.geometry()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_148" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_109" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_106" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_36" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypenear" title="Query.prototype.near()" class="md-nav__link">
    Query.prototype.near()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_149" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_110" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_107" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypenearsphere" title="Query.prototype.nearSphere()" class="md-nav__link">
    Query.prototype.nearSphere()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_108" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_109" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypepolygon" title="Query.prototype.polygon()" class="md-nav__link">
    Query.prototype.polygon()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_150" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_111" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_110" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypebox" title="Query.prototype.box()" class="md-nav__link">
    Query.prototype.box()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_151" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_112" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_111" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecircle" title="Query.prototype.circle()" class="md-nav__link">
    Query.prototype.circle()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_152" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_113" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_112" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecenter" title="Query.prototype.center()" class="md-nav__link">
    Query.prototype.center()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypecentersphere" title="Query.prototype.centerSphere()" class="md-nav__link">
    Query.prototype.centerSphere()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_153" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_114" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_113" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeselected" title="Query.prototype.selected()" class="md-nav__link">
    Query.prototype.selected()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_115" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeselectedinclusively" title="Query.prototype.selectedInclusively()" class="md-nav__link">
    Query.prototype.selectedInclusively()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_116" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queryprototypeselectedexclusively" title="Query.prototype.selectedExclusively()" class="md-nav__link">
    Query.prototype.selectedExclusively()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_117" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregate" title="Aggregate()" class="md-nav__link">
    Aggregate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_154" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_114" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_37" title="Note:" class="md-nav__link">
    Note:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypemodel" title="Aggregate.prototype.model()" class="md-nav__link">
    Aggregate.prototype.model()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_155" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_118" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeappend" title="Aggregate.prototype.append()" class="md-nav__link">
    Aggregate.prototype.append()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_156" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_119" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_10" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeaddfields" title="Aggregate.prototype.addFields()" class="md-nav__link">
    Aggregate.prototype.addFields()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_157" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_120" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_11" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeproject" title="Aggregate.prototype.project()" class="md-nav__link">
    Aggregate.prototype.project()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_158" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_121" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_12" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypegroup" title="Aggregate.prototype.group()" class="md-nav__link">
    Aggregate.prototype.group()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_159" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_122" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_13" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypematch" title="Aggregate.prototype.match()" class="md-nav__link">
    Aggregate.prototype.match()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_160" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_123" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_14" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeskip" title="Aggregate.prototype.skip()" class="md-nav__link">
    Aggregate.prototype.skip()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_161" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_124" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_15" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypelimit" title="Aggregate.prototype.limit()" class="md-nav__link">
    Aggregate.prototype.limit()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_162" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_125" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_16" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypenear" title="Aggregate.prototype.near()" class="md-nav__link">
    Aggregate.prototype.near()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_163" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_126" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_38" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_17" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeunwind" title="Aggregate.prototype.unwind()" class="md-nav__link">
    Aggregate.prototype.unwind()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_164" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_127" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_18" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypelookup" title="Aggregate.prototype.lookup()" class="md-nav__link">
    Aggregate.prototype.lookup()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_165" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_128" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_19" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypegraphlookup" title="Aggregate.prototype.graphLookup()" class="md-nav__link">
    Aggregate.prototype.graphLookup()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_166" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_129" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_20" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypesample" title="Aggregate.prototype.sample()" class="md-nav__link">
    Aggregate.prototype.sample()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_167" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_130" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_21" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypesort" title="Aggregate.prototype.sort()" class="md-nav__link">
    Aggregate.prototype.sort()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_168" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_131" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_22" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototyperead" title="Aggregate.prototype.read()" class="md-nav__link">
    Aggregate.prototype.read()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_169" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_115" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeexplain" title="Aggregate.prototype.explain()" class="md-nav__link">
    Aggregate.prototype.explain()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_170" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_132" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_116" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeallowdiskuse" title="Aggregate.prototype.allowDiskUse()" class="md-nav__link">
    Aggregate.prototype.allowDiskUse()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_171" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_117" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeoption" title="Aggregate.prototype.option()" class="md-nav__link">
    Aggregate.prototype.option()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_172" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_133" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_118" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypecursor" title="Aggregate.prototype.cursor()" class="md-nav__link">
    Aggregate.prototype.cursor()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_173" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_119" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeaddcursorflag" title="Aggregate.prototype.addCursorFlag()" class="md-nav__link">
    Aggregate.prototype.addCursorFlag()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_174" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_120" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypecollation" title="Aggregate.prototype.collation()" class="md-nav__link">
    Aggregate.prototype.collation()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_175" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_121" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypefacet" title="Aggregate.prototype.facet()" class="md-nav__link">
    Aggregate.prototype.facet()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_176" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_134" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_122" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypepipeline" title="Aggregate.prototype.pipeline()" class="md-nav__link">
    Aggregate.prototype.pipeline()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#returns_135" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_123" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypeexec" title="Aggregate.prototype.exec()" class="md-nav__link">
    Aggregate.prototype.exec()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_177" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_136" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_124" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregateprototypethen" title="Aggregate.prototype.then()" class="md-nav__link">
    Aggregate.prototype.then()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_178" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_137" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_125" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematype" title="SchemaType()" class="md-nav__link">
    SchemaType()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_179" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_126" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypedefault" title="SchemaType.prototype.default()" class="md-nav__link">
    SchemaType.prototype.default()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_180" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_138" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_127" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_128" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeindex" title="SchemaType.prototype.index()" class="md-nav__link">
    SchemaType.prototype.index()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_181" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_139" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_129" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_39" title="NOTE:" class="md-nav__link">
    NOTE:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeunique" title="SchemaType.prototype.unique()" class="md-nav__link">
    SchemaType.prototype.unique()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_182" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_140" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_130" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypetext" title="SchemaType.prototype.text()" class="md-nav__link">
    SchemaType.prototype.text()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_183" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_141" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_131" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypesparse" title="SchemaType.prototype.sparse()" class="md-nav__link">
    SchemaType.prototype.sparse()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_184" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_142" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_132" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeset" title="SchemaType.prototype.set()" class="md-nav__link">
    SchemaType.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_185" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_143" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_133" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeget" title="SchemaType.prototype.get()" class="md-nav__link">
    SchemaType.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_186" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_144" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_134" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypevalidate" title="SchemaType.prototype.validate()" class="md-nav__link">
    SchemaType.prototype.validate()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_187" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_145" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_23" title="Examples:" class="md-nav__link">
    Examples:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-message-templates" title="Error message templates:" class="md-nav__link">
    Error message templates:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-validation" title="Asynchronous validation:" class="md-nav__link">
    Asynchronous validation:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototyperequired" title="SchemaType.prototype.required()" class="md-nav__link">
    SchemaType.prototype.required()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_188" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_146" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_135" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schematypeprototypeselect" title="SchemaType.prototype.select()" class="md-nav__link">
    SchemaType.prototype.select()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_189" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_147" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_136" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtype" title="VirtualType()" class="md-nav__link">
    VirtualType()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_137" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeget" title="VirtualType.prototype.get()" class="md-nav__link">
    VirtualType.prototype.get()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_190" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_148" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_138" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeset" title="VirtualType.prototype.set()" class="md-nav__link">
    VirtualType.prototype.set()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_191" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_149" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_139" title="Example:" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeapplygetters" title="VirtualType.prototype.applyGetters()" class="md-nav__link">
    VirtualType.prototype.applyGetters()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_192" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_150" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualtypeprototypeapplysetters" title="VirtualType.prototype.applySetters()" class="md-nav__link">
    VirtualType.prototype.applySetters()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_193" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns_151" title="Returns:" class="md-nav__link">
    Returns:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerror" title="MongooseError()" class="md-nav__link">
    MongooseError()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_194" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrormessages" title="MongooseError.messages" class="md-nav__link">
    MongooseError.messages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrordocumentnotfounderror" title="MongooseError.DocumentNotFoundError" class="md-nav__link">
    MongooseError.DocumentNotFoundError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorcasterror" title="MongooseError.CastError" class="md-nav__link">
    MongooseError.CastError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorvalidationerror" title="MongooseError.ValidationError" class="md-nav__link">
    MongooseError.ValidationError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorvalidatorerror" title="MongooseError.ValidatorError" class="md-nav__link">
    MongooseError.ValidatorError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrorversionerror" title="MongooseError.VersionError" class="md-nav__link">
    MongooseError.VersionError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerroroverwritemodelerror" title="MongooseError.OverwriteModelError" class="md-nav__link">
    MongooseError.OverwriteModelError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrormissingschemaerror" title="MongooseError.MissingSchemaError" class="md-nav__link">
    MongooseError.MissingSchemaError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongooseerrordivergentarrayerror" title="MongooseError.DivergentArrayError" class="md-nav__link">
    MongooseError.DivergentArrayError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="mongoose-v501-api-docs">Mongoose v5.0.1: API docs<a class="headerlink" href="#mongoose-v501-api-docs" title="Permanent link">&para;</a></h1>
<p><a href="http://mongoosejs.com/docs/api.html" title="Permalink to Mongoose v5.0.1: API docs">Source</a></p>
<hr />
<hr />
<h3 id="schema"><a href="http://mongoosejs.com#schema_Schema">Schema()</a><a class="headerlink" href="#schema" title="Permanent link">&para;</a></h3>
<h5 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h5>
<p>Schema constructor.</p>
<h4 id="example">Example:<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">child</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">age</span><span class="o">:</span> <span class="n">Number</span><span class="p">,</span> <span class="n">children</span><span class="o">:</span> <span class="cp">[</span><span class="nx">child</span><span class="cp">]</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">Tree</span> <span class="o">=</span> <span class="nt">mongoose</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;Tree&#39;</span><span class="o">,</span> <span class="nt">schema</span><span class="o">);</span>


<span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">autoIndex</span><span class="o">:</span> <span class="n">false</span> <span class="p">}</span><span class="o">)</span>
</pre></div>


<h4 id="options">Options:<a class="headerlink" href="#options" title="Permanent link">&para;</a></h4>
<h4 id="note">Note:<a class="headerlink" href="#note" title="Permanent link">&para;</a></h4>
<p><em>When nesting schemas, (<code>children</code> in the example above), always declare the child schema first before passing it into its parent.</em></p>
<hr />
<h3 id="schemaprototypechildschemas"><a href="http://mongoosejs.com#schema_Schema-childSchemas">Schema.prototype.childSchemas</a><a class="headerlink" href="#schemaprototypechildschemas" title="Permanent link">&para;</a></h3>
<p>Array of child schemas (from document arrays and single nested subdocs) and their corresponding compiled models. Each element of the array is an object with 2 properties: <code>schema</code> and <code>model</code>.</p>
<p>This property is typically only useful for plugin authors and advanced users. You do not need to interact with this property at all to use mongoose.</p>
<hr />
<h3 id="schemaprototypeobj"><a href="http://mongoosejs.com#schema_Schema-obj">Schema.prototype.obj</a><a class="headerlink" href="#schemaprototypeobj" title="Permanent link">&para;</a></h3>
<p>The original object passed to the schema constructor</p>
<h4 id="example_1">Example:<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">add</span><span class="o">(</span><span class="p">{</span> <span class="n">b</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">obj</span><span class="o">;</span>
</pre></div>


<hr />
<h3 id="schemaprototypeclone"><a href="http://mongoosejs.com#schema_Schema-clone">Schema.prototype.clone()</a><a class="headerlink" href="#schemaprototypeclone" title="Permanent link">&para;</a></h3>
<h5 id="returns">Returns:<a class="headerlink" href="#returns" title="Permanent link">&para;</a></h5>
<ul>
<li>«Schema» the cloned schema</li>
</ul>
<p>Returns a deep copy of the schema</p>
<hr />
<h3 id="schemaprototypeadd"><a href="http://mongoosejs.com#schema_Schema-add">Schema.prototype.add()</a><a class="headerlink" href="#schemaprototypeadd" title="Permanent link">&para;</a></h3>
<h5 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h5>
<p>Adds key path / schema type pairs to this schema.</p>
<h4 id="example_2">Example:<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">ToySchema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">;</span>
<span class="nt">ToySchema</span><span class="p">.</span><span class="nc">add</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="kc">color</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="n">price</span><span class="o">:</span> <span class="s1">&#39;number&#39;</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="schemareserved"><a href="http://mongoosejs.com#reserved_reserved">Schema.reserved</a><a class="headerlink" href="#schemareserved" title="Permanent link">&para;</a></h3>
<p>Reserved document keys.</p>
<p>Keys in this object are names that are rejected in schema declarations b/c they conflict with mongoose functionality. Using these key name will throw an error.</p>
<div class="codehilite"><pre><span></span>on, emit, _events, db, get, set, init, isNew, errors, schema, options, modelName, collection, _pres, _posts, toObject
</pre></div>


<p><em>NOTE:</em> Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.</p>
<div class="codehilite"><pre><span></span>var schema = new Schema(..);
 schema.methods.init = function () {}
</pre></div>


<hr />
<h3 id="schemaprototypepath"><a href="http://mongoosejs.com#schema_Schema-path">Schema.prototype.path()</a><a class="headerlink" href="#schemaprototypepath" title="Permanent link">&para;</a></h3>
<h5 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">&para;</a></h5>
<p>Gets/sets schema paths.</p>
<p>Sets a path (if arity 2) Gets a path (if arity 1)</p>
<h4 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>schema.path(&#39;name&#39;)
schema.path(&#39;name&#39;, Number)
</pre></div>


<hr />
<h3 id="schemaprototypeeachpath"><a href="http://mongoosejs.com#schema_Schema-eachPath">Schema.prototype.eachPath()</a><a class="headerlink" href="#schemaprototypeeachpath" title="Permanent link">&para;</a></h3>
<h5 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">&para;</a></h5>
<ul>
<li>fn «Function» callback function</li>
</ul>
<h5 id="returns_1">Returns:<a class="headerlink" href="#returns_1" title="Permanent link">&para;</a></h5>
<p>Iterates the schemas paths similar to Array#forEach.</p>
<p>The callback is passed the pathname and schemaType as arguments on each iteration.</p>
<hr />
<h3 id="schemaprototyperequiredpaths"><a href="http://mongoosejs.com#schema_Schema-requiredPaths">Schema.prototype.requiredPaths()</a><a class="headerlink" href="#schemaprototyperequiredpaths" title="Permanent link">&para;</a></h3>
<h5 id="parameters_4">Parameters<a class="headerlink" href="#parameters_4" title="Permanent link">&para;</a></h5>
<ul>
<li>invalidate «Boolean» refresh the cache</li>
</ul>
<h5 id="returns_2">Returns:<a class="headerlink" href="#returns_2" title="Permanent link">&para;</a></h5>
<p>Returns an Array of path strings that are required by this schema.</p>
<hr />
<h3 id="schemaprototypepathtype"><a href="http://mongoosejs.com#schema_Schema-pathType">Schema.prototype.pathType()</a><a class="headerlink" href="#schemaprototypepathtype" title="Permanent link">&para;</a></h3>
<h5 id="parameters_5">Parameters<a class="headerlink" href="#parameters_5" title="Permanent link">&para;</a></h5>
<h5 id="returns_3">Returns:<a class="headerlink" href="#returns_3" title="Permanent link">&para;</a></h5>
<p>Returns the pathType of <code>path</code> for this schema.</p>
<p>Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.</p>
<hr />
<h3 id="schemaprototypequeue"><a href="http://mongoosejs.com#schema_Schema-queue">Schema.prototype.queue()</a><a class="headerlink" href="#schemaprototypequeue" title="Permanent link">&para;</a></h3>
<h5 id="parameters_6">Parameters<a class="headerlink" href="#parameters_6" title="Permanent link">&para;</a></h5>
<ul>
<li>args «Array» arguments to pass to the method</li>
</ul>
<p>Adds a method call to the queue.</p>
<hr />
<h3 id="schemaprototypepre"><a href="http://mongoosejs.com#schema_Schema-pre">Schema.prototype.pre()</a><a class="headerlink" href="#schemaprototypepre" title="Permanent link">&para;</a></h3>
<h5 id="parameters_7">Parameters<a class="headerlink" href="#parameters_7" title="Permanent link">&para;</a></h5>
<p>Defines a pre hook for the document.</p>
<h4 id="example_4">Example<a class="headerlink" href="#example_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var toySchema = new Schema(..);

toySchema.pre(&#39;save&#39;, function (next) {
  if (!this.created) this.created = new Date;
  next();
})

toySchema.pre(&#39;validate&#39;, function (next) {
  if (this.name !== &#39;Woody&#39;) this.name = &#39;Woody&#39;;
  next();
})
</pre></div>


<hr />
<h3 id="schemaprototypepost"><a href="http://mongoosejs.com#schema_Schema-post">Schema.prototype.post()</a><a class="headerlink" href="#schemaprototypepost" title="Permanent link">&para;</a></h3>
<h5 id="parameters_8">Parameters<a class="headerlink" href="#parameters_8" title="Permanent link">&para;</a></h5>
<p>Defines a post hook for the document</p>
<div class="codehilite"><pre><span></span>var schema = new Schema(..);
schema.post(&#39;save&#39;, function (doc) {
  console.log(&#39;this fired after a document was saved&#39;);
});

schema.post(&#39;find&#39;, function(docs) {
  console.log(&#39;this fired after you run a find query&#39;);
});

var Model = mongoose.model(&#39;Model&#39;, schema);

var m = new Model(..);
m.save(function(err) {
  console.log(&#39;this fires after the `post` hook&#39;);
});

m.find(function(err, docs) {
  console.log(&#39;this fires after the post find hook&#39;);
});
</pre></div>


<hr />
<h3 id="schemaprototypeplugin"><a href="http://mongoosejs.com#schema_Schema-plugin">Schema.prototype.plugin()</a><a class="headerlink" href="#schemaprototypeplugin" title="Permanent link">&para;</a></h3>
<h5 id="parameters_9">Parameters<a class="headerlink" href="#parameters_9" title="Permanent link">&para;</a></h5>
<p>Registers a plugin for this schema.</p>
<hr />
<h3 id="schemaprototypemethod"><a href="http://mongoosejs.com#schema_Schema-method">Schema.prototype.method()</a><a class="headerlink" href="#schemaprototypemethod" title="Permanent link">&para;</a></h3>
<h5 id="parameters_10">Parameters<a class="headerlink" href="#parameters_10" title="Permanent link">&para;</a></h5>
<p>Adds an instance method to documents constructed from Models compiled from this schema.</p>
<h4 id="example_5">Example<a class="headerlink" href="#example_5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var schema = kittySchema = new Schema(..);

schema.method(&#39;meow&#39;, function () {
  console.log(&#39;meeeeeoooooooooooow&#39;);
})

var Kitty = mongoose.model(&#39;Kitty&#39;, schema);

var fizz = new Kitty;
fizz.meow();
</pre></div>


<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.</p>
<div class="codehilite"><pre><span></span>schema.method({
    purr: function () {}
  , scratch: function () {}
});


fizz.purr();
fizz.scratch();
</pre></div>


<hr />
<h3 id="schemaprototypestatic"><a href="http://mongoosejs.com#schema_Schema-static">Schema.prototype.static()</a><a class="headerlink" href="#schemaprototypestatic" title="Permanent link">&para;</a></h3>
<h5 id="parameters_11">Parameters<a class="headerlink" href="#parameters_11" title="Permanent link">&para;</a></h5>
<p>Adds static "class" methods to Models compiled from this schema.</p>
<h4 id="example_6">Example<a class="headerlink" href="#example_6" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(..);</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">static</span><span class="o">(</span><span class="s1">&#39;findByName&#39;</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">name</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">return</span> <span class="err">this.find({</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span> <span class="p">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">);</span>
<span class="err">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">Drink</span> <span class="o">=</span> <span class="nt">mongoose</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;Drink&#39;</span><span class="o">,</span> <span class="nt">schema</span><span class="o">);</span>
<span class="nt">Drink</span><span class="p">.</span><span class="nc">findByName</span><span class="o">(</span><span class="s1">&#39;sanpellegrino&#39;</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">drinks</span><span class="o">)</span> <span class="p">{</span>

<span class="p">}</span><span class="o">);</span>
</pre></div>


<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.</p>
<hr />
<h3 id="schemaprototypeindex"><a href="http://mongoosejs.com#schema_Schema-index">Schema.prototype.index()</a><a class="headerlink" href="#schemaprototypeindex" title="Permanent link">&para;</a></h3>
<h5 id="parameters_12">Parameters<a class="headerlink" href="#parameters_12" title="Permanent link">&para;</a></h5>
<ul>
<li>[options.expires=null] «String» Mongoose-specific syntactic sugar, uses <a href="https://www.npmjs.com/package/ms">ms</a> to convert <code>expires</code> option into seconds for the <code>expireAfterSeconds</code> in the above link.</li>
</ul>
<p>Defines an index (most likely compound) for this schema.</p>
<h4 id="example_7">Example<a class="headerlink" href="#example_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>schema.index({ first: 1, last: -1 })
</pre></div>


<hr />
<h3 id="schemaprototypeset"><a href="http://mongoosejs.com#schema_Schema-set">Schema.prototype.set()</a><a class="headerlink" href="#schemaprototypeset" title="Permanent link">&para;</a></h3>
<h5 id="parameters_13">Parameters<a class="headerlink" href="#parameters_13" title="Permanent link">&para;</a></h5>
<ul>
<li>[value] «Object» if not passed, the current option value is returned</li>
</ul>
<p>Sets/gets a schema option.</p>
<h4 id="example_8">Example<a class="headerlink" href="#example_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>schema.set(&#39;strict&#39;);
schema.set(&#39;strict&#39;, false);
schema.set(&#39;strict&#39;);
</pre></div>


<hr />
<h3 id="schemaprototypeget"><a href="http://mongoosejs.com#schema_Schema-get">Schema.prototype.get()</a><a class="headerlink" href="#schemaprototypeget" title="Permanent link">&para;</a></h3>
<h5 id="parameters_14">Parameters<a class="headerlink" href="#parameters_14" title="Permanent link">&para;</a></h5>
<ul>
<li>key «String» option name</li>
</ul>
<hr />
<h3 id="indextypes"><a href="http://mongoosejs.com#indextypes_indexTypes">indexTypes</a><a class="headerlink" href="#indextypes" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="schemaprototypeindexes"><a href="http://mongoosejs.com#schema_Schema-indexes">Schema.prototype.indexes()</a><a class="headerlink" href="#schemaprototypeindexes" title="Permanent link">&para;</a></h3>
<p>Compiles indexes from fields and schema-level indexes</p>
<hr />
<h3 id="schemaprototypevirtual"><a href="http://mongoosejs.com#schema_Schema-virtual">Schema.prototype.virtual()</a><a class="headerlink" href="#schemaprototypevirtual" title="Permanent link">&para;</a></h3>
<h5 id="parameters_15">Parameters<a class="headerlink" href="#parameters_15" title="Permanent link">&para;</a></h5>
<h5 id="returns_4">Returns:<a class="headerlink" href="#returns_4" title="Permanent link">&para;</a></h5>
<p>Creates a virtual type with the given name.</p>
<hr />
<h3 id="schemaprototypevirtualpath"><a href="http://mongoosejs.com#schema_Schema-virtualpath">Schema.prototype.virtualpath()</a><a class="headerlink" href="#schemaprototypevirtualpath" title="Permanent link">&para;</a></h3>
<h5 id="parameters_16">Parameters<a class="headerlink" href="#parameters_16" title="Permanent link">&para;</a></h5>
<h5 id="returns_5">Returns:<a class="headerlink" href="#returns_5" title="Permanent link">&para;</a></h5>
<p>Returns the virtual type with the given <code>name</code>.</p>
<hr />
<h3 id="schemaprototyperemove"><a href="http://mongoosejs.com#schema_Schema-remove">Schema.prototype.remove()</a><a class="headerlink" href="#schemaprototyperemove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_17">Parameters<a class="headerlink" href="#parameters_17" title="Permanent link">&para;</a></h5>
<p>Removes the given <code>path</code> (or [<code>paths</code>]).</p>
<hr />
<h3 id="schemaprototypeloadclass"><a href="http://mongoosejs.com#schema_Schema-loadClass">Schema.prototype.loadClass()</a><a class="headerlink" href="#schemaprototypeloadclass" title="Permanent link">&para;</a></h3>
<h5 id="parameters_18">Parameters<a class="headerlink" href="#parameters_18" title="Permanent link">&para;</a></h5>
<p>Loads an ES6 class into a schema. Maps setters + getters, static methods, and instance methods to schema virtuals, statics, and methods.</p>
<hr />
<h3 id="schematypes"><a href="http://mongoosejs.com#types_Types">Schema.Types</a><a class="headerlink" href="#schematypes" title="Permanent link">&para;</a></h3>
<p>The various built-in Mongoose Schema Types.</p>
<h4 id="example_9">Example:<a class="headerlink" href="#example_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var mongoose = require(&#39;mongoose&#39;);
var ObjectId = mongoose.Schema.Types.ObjectId;
</pre></div>


<h4 id="types">Types:<a class="headerlink" href="#types" title="Permanent link">&para;</a></h4>
<p>Using this exposed access to the <code>Mixed</code> SchemaType, we can use them in our schema.</p>
<div class="codehilite"><pre><span></span>var Mixed = mongoose.Schema.Types.Mixed;
new mongoose.Schema({ _user: Mixed })
</pre></div>


<hr />
<hr />
<h3 id="connection"><a href="http://mongoosejs.com#connection_Connection">Connection()</a><a class="headerlink" href="#connection" title="Permanent link">&para;</a></h3>
<h5 id="parameters_19">Parameters<a class="headerlink" href="#parameters_19" title="Permanent link">&para;</a></h5>
<ul>
<li>base «Mongoose» a mongoose instance</li>
</ul>
<p>Connection constructor</p>
<p>For practical reasons, a Connection equals a Db.</p>
<hr />
<h3 id="connectionprototypereadystate"><a href="http://mongoosejs.com#connection_Connection-readyState">Connection.prototype.readyState</a><a class="headerlink" href="#connectionprototypereadystate" title="Permanent link">&para;</a></h3>
<p>Connection ready state</p>
<ul>
<li>0 = disconnected</li>
<li>1 = connected</li>
<li>2 = connecting</li>
<li>3 = disconnecting</li>
</ul>
<p>Each state change emits its associated event name.</p>
<h4 id="example_10">Example<a class="headerlink" href="#example_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>conn.on(&#39;connected&#39;, callback);
conn.on(&#39;disconnected&#39;, callback);
</pre></div>


<hr />
<h3 id="connectionprototypecollections"><a href="http://mongoosejs.com#connection_Connection-collections">Connection.prototype.collections</a><a class="headerlink" href="#connectionprototypecollections" title="Permanent link">&para;</a></h3>
<p>A hash of the collections associated with this connection</p>
<hr />
<h3 id="connectionprototypedb"><a href="http://mongoosejs.com#connection_Connection-db">Connection.prototype.db</a><a class="headerlink" href="#connectionprototypedb" title="Permanent link">&para;</a></h3>
<p>The mongodb.Db instance, set when the connection is opened</p>
<hr />
<h3 id="connectionprototypeconfig"><a href="http://mongoosejs.com#connection_Connection-config">Connection.prototype.config</a><a class="headerlink" href="#connectionprototypeconfig" title="Permanent link">&para;</a></h3>
<p>A hash of the global options that are associated with this connection</p>
<hr />
<h3 id="connectionprototypecreatecollection"><a href="http://mongoosejs.com#connection_Connection-createCollection">Connection.prototype.createCollection()</a><a class="headerlink" href="#connectionprototypecreatecollection" title="Permanent link">&para;</a></h3>
<h5 id="parameters_20">Parameters<a class="headerlink" href="#parameters_20" title="Permanent link">&para;</a></h5>
<h5 id="returns_6">Returns:<a class="headerlink" href="#returns_6" title="Permanent link">&para;</a></h5>
<hr />
<h3 id="connectionprototypedropcollection"><a href="http://mongoosejs.com#connection_Connection-dropCollection">Connection.prototype.dropCollection()</a><a class="headerlink" href="#connectionprototypedropcollection" title="Permanent link">&para;</a></h3>
<h5 id="parameters_21">Parameters<a class="headerlink" href="#parameters_21" title="Permanent link">&para;</a></h5>
<h5 id="returns_7">Returns:<a class="headerlink" href="#returns_7" title="Permanent link">&para;</a></h5>
<p>Helper for <code>dropCollection()</code>. Will delete the given collection, including all documents and indexes.</p>
<hr />
<h3 id="connectionprototypedropdatabase"><a href="http://mongoosejs.com#connection_Connection-dropDatabase">Connection.prototype.dropDatabase()</a><a class="headerlink" href="#connectionprototypedropdatabase" title="Permanent link">&para;</a></h3>
<h5 id="parameters_22">Parameters<a class="headerlink" href="#parameters_22" title="Permanent link">&para;</a></h5>
<h5 id="returns_8">Returns:<a class="headerlink" href="#returns_8" title="Permanent link">&para;</a></h5>
<p>Helper for <code>dropDatabase()</code>. Deletes the given database, including all collections, documents, and indexes.</p>
<hr />
<h3 id="connectionprototypeclose"><a href="http://mongoosejs.com#connection_Connection-close">Connection.prototype.close()</a><a class="headerlink" href="#connectionprototypeclose" title="Permanent link">&para;</a></h3>
<h5 id="parameters_23">Parameters<a class="headerlink" href="#parameters_23" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional</li>
</ul>
<h5 id="returns_9">Returns:<a class="headerlink" href="#returns_9" title="Permanent link">&para;</a></h5>
<hr />
<h3 id="connectionprototypecollection"><a href="http://mongoosejs.com#connection_Connection-collection">Connection.prototype.collection()</a><a class="headerlink" href="#connectionprototypecollection" title="Permanent link">&para;</a></h3>
<h5 id="parameters_24">Parameters<a class="headerlink" href="#parameters_24" title="Permanent link">&para;</a></h5>
<ul>
<li>[options] «Object» optional collection options</li>
</ul>
<h5 id="returns_10">Returns:<a class="headerlink" href="#returns_10" title="Permanent link">&para;</a></h5>
<ul>
<li>«Collection» collection instance</li>
</ul>
<p>Retrieves a collection, creating it if not cached.</p>
<p>Not typically needed by applications. Just talk to your collection through your model.</p>
<hr />
<h3 id="connectionprototypemodel"><a href="http://mongoosejs.com#connection_Connection-model">Connection.prototype.model()</a><a class="headerlink" href="#connectionprototypemodel" title="Permanent link">&para;</a></h3>
<h5 id="parameters_25">Parameters<a class="headerlink" href="#parameters_25" title="Permanent link">&para;</a></h5>
<ul>
<li>[collection] «String» name of mongodb collection (optional) if not given it will be induced from model name</li>
</ul>
<h5 id="returns_11">Returns:<a class="headerlink" href="#returns_11" title="Permanent link">&para;</a></h5>
<ul>
<li>«Model» The compiled model</li>
</ul>
<p>Defines or retrieves a model.</p>
<div class="codehilite"><pre><span></span>var mongoose = require(&#39;mongoose&#39;);
var db = mongoose.createConnection(..);
db.model(&#39;Venue&#39;, new Schema(..));
var Ticket = db.model(&#39;Ticket&#39;, new Schema(..));
var Venue = db.model(&#39;Venue&#39;);
</pre></div>


<p><em>When no <code>collection</code> argument is passed, Mongoose produces a collection name by passing the model <code>name</code> to the <a href="http://mongoosejs.com#utils_exports.toCollectionName">utils.toCollectionName</a> method. This method pluralizes the name. If you don't like this behavior, either pass a collection name or set your schemas collection name option.</em></p>
<h4 id="example_11">Example:<a class="headerlink" href="#example_11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">collection</span><span class="p">:</span> <span class="s1">&#39;actor&#39;</span> <span class="p">}</span><span class="o">);</span>



<span class="nt">schema</span><span class="p">.</span><span class="nc">set</span><span class="o">(</span><span class="s1">&#39;collection&#39;</span><span class="o">,</span> <span class="s1">&#39;actor&#39;</span><span class="o">);</span>



<span class="nt">var</span> <span class="nt">collectionName</span> <span class="o">=</span> <span class="s1">&#39;actor&#39;</span>
<span class="nt">var</span> <span class="nt">M</span> <span class="o">=</span> <span class="nt">conn</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;Actor&#39;</span><span class="o">,</span> <span class="nt">schema</span><span class="o">,</span> <span class="nt">collectionName</span><span class="o">)</span>
</pre></div>


<hr />
<h3 id="connectionprototypemodelnames"><a href="http://mongoosejs.com#connection_Connection-modelNames">Connection.prototype.modelNames()</a><a class="headerlink" href="#connectionprototypemodelnames" title="Permanent link">&para;</a></h3>
<h5 id="returns_12">Returns:<a class="headerlink" href="#returns_12" title="Permanent link">&para;</a></h5>
<p>Returns an array of model names created on this connection.</p>
<hr />
<hr />
<h3 id="documentprototypeschema"><a href="http://mongoosejs.com#document_Document-schema">Document.prototype.schema</a><a class="headerlink" href="#documentprototypeschema" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="documentprototypeisnew"><a href="http://mongoosejs.com#document_Document-isNew">Document.prototype.isNew</a><a class="headerlink" href="#documentprototypeisnew" title="Permanent link">&para;</a></h3>
<p>Boolean flag specifying if the document is new.</p>
<hr />
<h3 id="documentprototypeid"><a href="http://mongoosejs.com#document_Document-id">Document.prototype.id</a><a class="headerlink" href="#documentprototypeid" title="Permanent link">&para;</a></h3>
<p>The string version of this documents _id.</p>
<h4 id="note_1">Note:<a class="headerlink" href="#note_1" title="Permanent link">&para;</a></h4>
<p>This getter exists on all documents by default. The getter can be disabled by setting the <code>id</code> <a href="http://mongoosejs.com/docs/guide.html#id">option</a> of its <code>Schema</code> to false at construction time.</p>
<div class="codehilite"><pre><span></span><span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">id</span><span class="p">:</span> <span class="n">false</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="documentprototypeerrors"><a href="http://mongoosejs.com#document_Document-errors">Document.prototype.errors</a><a class="headerlink" href="#documentprototypeerrors" title="Permanent link">&para;</a></h3>
<p>Hash containing current validation errors.</p>
<hr />
<h3 id="documentprototypeinit"><a href="http://mongoosejs.com#document_Document-init">Document.prototype.init()</a><a class="headerlink" href="#documentprototypeinit" title="Permanent link">&para;</a></h3>
<h5 id="parameters_26">Parameters<a class="headerlink" href="#parameters_26" title="Permanent link">&para;</a></h5>
<ul>
<li>doc «Object» document returned by mongo</li>
</ul>
<p>Initializes the document without setters or marking anything modified.</p>
<p>Called internally after a document is returned from mongodb.</p>
<hr />
<h3 id="documentprototypeupdate"><a href="http://mongoosejs.com#document_Document-update">Document.prototype.update()</a><a class="headerlink" href="#documentprototypeupdate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_27">Parameters<a class="headerlink" href="#parameters_27" title="Permanent link">&para;</a></h5>
<h5 id="returns_13">Returns:<a class="headerlink" href="#returns_13" title="Permanent link">&para;</a></h5>
<p>Sends an update command with this document <code>_id</code> as the query selector.</p>
<h4 id="example_12">Example:<a class="headerlink" href="#example_12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">weirdCar</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span><span class="err">$</span><span class="n">inc</span><span class="p">:</span> <span class="err">{</span><span class="n">wheels</span><span class="o">:</span><span class="mi">1</span><span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">w</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">);</span>
</pre></div>


<h4 id="valid-options">Valid options:<a class="headerlink" href="#valid-options" title="Permanent link">&para;</a></h4>
<hr />
<h3 id="documentprototypeset">Document.prototype.$set()<a class="headerlink" href="#documentprototypeset" title="Permanent link">&para;</a></h3>
<h5 id="parameters_28">Parameters<a class="headerlink" href="#parameters_28" title="Permanent link">&para;</a></h5>
<ul>
<li>[options] «Object» optionally specify options that modify the behavior of the set</li>
</ul>
<p>Alias for <code>set()</code>, used internally to avoid conflicts</p>
<hr />
<h3 id="documentprototypeset_1"><a href="http://mongoosejs.com#document_Document-set">Document.prototype.set()</a><a class="headerlink" href="#documentprototypeset_1" title="Permanent link">&para;</a></h3>
<h5 id="parameters_29">Parameters<a class="headerlink" href="#parameters_29" title="Permanent link">&para;</a></h5>
<ul>
<li>[options] «Object» optionally specify options that modify the behavior of the set</li>
</ul>
<p>Sets the value of a path, or many paths.</p>
<h4 id="example_13">Example:<a class="headerlink" href="#example_13" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">doc</span><span class="p">.</span><span class="nc">set</span><span class="o">(</span><span class="nt">path</span><span class="o">,</span> <span class="nt">value</span><span class="o">)</span>


<span class="nt">doc</span><span class="p">.</span><span class="nc">set</span><span class="o">(</span><span class="p">{</span>
    <span class="n">path</span>  <span class="p">:</span> <span class="n">value</span>
  <span class="p">,</span> <span class="n">path2</span> <span class="o">:</span> <span class="err">{</span>
       <span class="n">path</span>  <span class="o">:</span> <span class="n">value</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">)</span>


<span class="nt">doc</span><span class="p">.</span><span class="nc">set</span><span class="o">(</span><span class="nt">path</span><span class="o">,</span> <span class="nt">value</span><span class="o">,</span> <span class="nt">Number</span><span class="o">)</span>


<span class="nt">doc</span><span class="p">.</span><span class="nc">set</span><span class="o">(</span><span class="nt">path</span><span class="o">,</span> <span class="nt">value</span><span class="o">,</span> <span class="nt">String</span><span class="o">)</span>


<span class="nt">doc</span><span class="p">.</span><span class="nc">set</span><span class="o">(</span><span class="nt">path</span><span class="o">,</span> <span class="nt">value</span><span class="o">,</span> <span class="p">{</span> <span class="n">strict</span><span class="p">:</span> <span class="n">false</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="documentprototypeget"><a href="http://mongoosejs.com#document_Document-get">Document.prototype.get()</a><a class="headerlink" href="#documentprototypeget" title="Permanent link">&para;</a></h3>
<h5 id="parameters_30">Parameters<a class="headerlink" href="#parameters_30" title="Permanent link">&para;</a></h5>
<ul>
<li>[type] «Schema,String,Number,Buffer,*» optionally specify a type for on-the-fly attributes</li>
</ul>
<p>Returns the value of a path.</p>
<h4 id="example_14">Example<a class="headerlink" href="#example_14" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.get(&#39;age&#39;)


doc.get(&#39;age&#39;, String)
</pre></div>


<hr />
<h3 id="documentprototypemarkmodified"><a href="http://mongoosejs.com#document_Document-markModified">Document.prototype.markModified()</a><a class="headerlink" href="#documentprototypemarkmodified" title="Permanent link">&para;</a></h3>
<h5 id="parameters_31">Parameters<a class="headerlink" href="#parameters_31" title="Permanent link">&para;</a></h5>
<ul>
<li>[scope] «Document» the scope to run validators with</li>
</ul>
<p>Marks the path as having pending changes to write to the db.</p>
<p><em>Very helpful when using <a href="http://mongoosejs.com/schematypes.html#mixed">Mixed</a> types.</em></p>
<h4 id="example_15">Example:<a class="headerlink" href="#example_15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.mixed.type = &#39;changed&#39;;
doc.markModified(&#39;mixed.type&#39;);
doc.save()
</pre></div>


<hr />
<h3 id="documentprototypeunmarkmodified"><a href="http://mongoosejs.com#document_Document-unmarkModified">Document.prototype.unmarkModified()</a><a class="headerlink" href="#documentprototypeunmarkmodified" title="Permanent link">&para;</a></h3>
<h5 id="parameters_32">Parameters<a class="headerlink" href="#parameters_32" title="Permanent link">&para;</a></h5>
<ul>
<li>path «String» the path to unmark modified</li>
</ul>
<p>Clears the modified state on the specified path.</p>
<h4 id="example_16">Example:<a class="headerlink" href="#example_16" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.foo = &#39;bar&#39;;
doc.unmarkModified(&#39;foo&#39;);
doc.save()
</pre></div>


<hr />
<h3 id="documentprototypeignore">Document.prototype.$ignore()<a class="headerlink" href="#documentprototypeignore" title="Permanent link">&para;</a></h3>
<h5 id="parameters_33">Parameters<a class="headerlink" href="#parameters_33" title="Permanent link">&para;</a></h5>
<ul>
<li>path «String» the path to ignore</li>
</ul>
<p>Don't run validation on this path or persist changes to this path.</p>
<h4 id="example_17">Example:<a class="headerlink" href="#example_17" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.foo = null;
doc.$ignore(&#39;foo&#39;);
doc.save()
</pre></div>


<hr />
<h3 id="documentprototypemodifiedpaths"><a href="http://mongoosejs.com#document_Document-modifiedPaths">Document.prototype.modifiedPaths()</a><a class="headerlink" href="#documentprototypemodifiedpaths" title="Permanent link">&para;</a></h3>
<h5 id="returns_14">Returns:<a class="headerlink" href="#returns_14" title="Permanent link">&para;</a></h5>
<p>Returns the list of paths that have been modified.</p>
<hr />
<h3 id="documentprototypeismodified"><a href="http://mongoosejs.com#document_Document-isModified">Document.prototype.isModified()</a><a class="headerlink" href="#documentprototypeismodified" title="Permanent link">&para;</a></h3>
<h5 id="parameters_34">Parameters<a class="headerlink" href="#parameters_34" title="Permanent link">&para;</a></h5>
<ul>
<li>[path] «String» optional</li>
</ul>
<h5 id="returns_15">Returns:<a class="headerlink" href="#returns_15" title="Permanent link">&para;</a></h5>
<p>Returns true if this document was modified, else false.</p>
<p>If <code>path</code> is given, checks if a path or any full path containing <code>path</code> as part of its path chain has been modified.</p>
<h4 id="example_18">Example<a class="headerlink" href="#example_18" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.set(&#39;documents.0.title&#39;, &#39;changed&#39;);
doc.isModified()
doc.isModified(&#39;documents&#39;)
doc.isModified(&#39;documents.0.title&#39;)
doc.isModified(&#39;documents otherProp&#39;)
doc.isDirectModified(&#39;documents&#39;)
</pre></div>


<hr />
<h3 id="documentprototypeisdefault">Document.prototype.$isDefault()<a class="headerlink" href="#documentprototypeisdefault" title="Permanent link">&para;</a></h3>
<h5 id="parameters_35">Parameters<a class="headerlink" href="#parameters_35" title="Permanent link">&para;</a></h5>
<h5 id="returns_16">Returns:<a class="headerlink" href="#returns_16" title="Permanent link">&para;</a></h5>
<p>Checks if a path is set to its default.</p>
<h4 id="example_19">Example<a class="headerlink" href="#example_19" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">MyModel</span> <span class="o">=</span> <span class="nt">mongoose</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;test&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span> <span class="kc">default</span><span class="o">:</span> <span class="s1">&#39;Val &#39;</span><span class="p">}</span> <span class="err">}</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">m</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">MyModel</span><span class="o">();</span>
<span class="nt">m</span><span class="o">.$</span><span class="nt">isDefault</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="documentprototypeisdeleted">Document.prototype.$isDeleted()<a class="headerlink" href="#documentprototypeisdeleted" title="Permanent link">&para;</a></h3>
<h5 id="parameters_36">Parameters<a class="headerlink" href="#parameters_36" title="Permanent link">&para;</a></h5>
<ul>
<li>[val] «Boolean» optional, overrides whether mongoose thinks the doc is deleted</li>
</ul>
<h5 id="returns_17">Returns:<a class="headerlink" href="#returns_17" title="Permanent link">&para;</a></h5>
<ul>
<li>«Boolean» whether mongoose thinks this doc is deleted.</li>
</ul>
<p>Getter/setter, determines whether the document was removed or not.</p>
<h4 id="example_20">Example:<a class="headerlink" href="#example_20" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.remove(function (err, product) {
  product.isDeleted();
  product.remove();

  product.isDeleted(false);
  product.isDeleted();
  product.remove();
})
</pre></div>


<hr />
<h3 id="documentprototypeisdirectmodified"><a href="http://mongoosejs.com#document_Document-isDirectModified">Document.prototype.isDirectModified()</a><a class="headerlink" href="#documentprototypeisdirectmodified" title="Permanent link">&para;</a></h3>
<h5 id="parameters_37">Parameters<a class="headerlink" href="#parameters_37" title="Permanent link">&para;</a></h5>
<h5 id="returns_18">Returns:<a class="headerlink" href="#returns_18" title="Permanent link">&para;</a></h5>
<p>Returns true if <code>path</code> was directly set and modified, else false.</p>
<h4 id="example_21">Example<a class="headerlink" href="#example_21" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.set(&#39;documents.0.title&#39;, &#39;changed&#39;);
doc.isDirectModified(&#39;documents.0.title&#39;)
doc.isDirectModified(&#39;documents&#39;)
</pre></div>


<hr />
<h3 id="documentprototypeisinit"><a href="http://mongoosejs.com#document_Document-isInit">Document.prototype.isInit()</a><a class="headerlink" href="#documentprototypeisinit" title="Permanent link">&para;</a></h3>
<h5 id="parameters_38">Parameters<a class="headerlink" href="#parameters_38" title="Permanent link">&para;</a></h5>
<h5 id="returns_19">Returns:<a class="headerlink" href="#returns_19" title="Permanent link">&para;</a></h5>
<p>Checks if <code>path</code> was initialized.</p>
<hr />
<h3 id="documentprototypeisselected"><a href="http://mongoosejs.com#document_Document-isSelected">Document.prototype.isSelected()</a><a class="headerlink" href="#documentprototypeisselected" title="Permanent link">&para;</a></h3>
<h5 id="parameters_39">Parameters<a class="headerlink" href="#parameters_39" title="Permanent link">&para;</a></h5>
<h5 id="returns_20">Returns:<a class="headerlink" href="#returns_20" title="Permanent link">&para;</a></h5>
<p>Checks if <code>path</code> was selected in the source query which initialized this document.</p>
<h4 id="example_22">Example<a class="headerlink" href="#example_22" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Thing.findOne().select(&#39;name&#39;).exec(function (err, doc) {
   doc.isSelected(&#39;name&#39;)
   doc.isSelected(&#39;age&#39;)
})
</pre></div>


<hr />
<h3 id="documentprototypeisdirectselected"><a href="http://mongoosejs.com#document_Document-isDirectSelected">Document.prototype.isDirectSelected()</a><a class="headerlink" href="#documentprototypeisdirectselected" title="Permanent link">&para;</a></h3>
<h5 id="parameters_40">Parameters<a class="headerlink" href="#parameters_40" title="Permanent link">&para;</a></h5>
<h5 id="returns_21">Returns:<a class="headerlink" href="#returns_21" title="Permanent link">&para;</a></h5>
<p>Checks if <code>path</code> was explicitly selected. If no projection, always returns true.</p>
<h4 id="example_23">Example<a class="headerlink" href="#example_23" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Thing.findOne().select(&#39;nested.name&#39;).exec(function (err, doc) {
   doc.isDirectSelected(&#39;nested.name&#39;)
   doc.isDirectSelected(&#39;nested.otherName&#39;)
   doc.isDirectSelected(&#39;nested&#39;)
})
</pre></div>


<hr />
<h3 id="documentprototypevalidate"><a href="http://mongoosejs.com#document_Document-validate">Document.prototype.validate()</a><a class="headerlink" href="#documentprototypevalidate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_41">Parameters<a class="headerlink" href="#parameters_41" title="Permanent link">&para;</a></h5>
<ul>
<li>callback «Function» optional callback called after validation completes, passing an error if one occurred</li>
</ul>
<h5 id="returns_22">Returns:<a class="headerlink" href="#returns_22" title="Permanent link">&para;</a></h5>
<p>Executes registered validation rules for this document.</p>
<h4 id="note_2">Note:<a class="headerlink" href="#note_2" title="Permanent link">&para;</a></h4>
<p>This method is called <code>pre</code> save and if a validation rule is violated, <a href="http://mongoosejs.com#model_Model-save">save</a> is aborted and the error is returned to your <code>callback</code>.</p>
<h4 id="example_24">Example:<a class="headerlink" href="#example_24" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc.validate(function (err) {
  if (err) handleError(err);
  else
});
</pre></div>


<hr />
<h3 id="documentprototypevalidatesync"><a href="http://mongoosejs.com#document_Document-validateSync">Document.prototype.validateSync()</a><a class="headerlink" href="#documentprototypevalidatesync" title="Permanent link">&para;</a></h3>
<h5 id="parameters_42">Parameters<a class="headerlink" href="#parameters_42" title="Permanent link">&para;</a></h5>
<ul>
<li>pathsToValidate «Array,string» only validate the given paths</li>
</ul>
<h5 id="returns_23">Returns:<a class="headerlink" href="#returns_23" title="Permanent link">&para;</a></h5>
<ul>
<li>«MongooseError,undefined» MongooseError if there are errors during validation, or undefined if there is no error.</li>
</ul>
<p>Executes registered validation rules (skipping asynchronous validators) for this document.</p>
<h4 id="note_3">Note:<a class="headerlink" href="#note_3" title="Permanent link">&para;</a></h4>
<p>This method is useful if you need synchronous validation.</p>
<h4 id="example_25">Example:<a class="headerlink" href="#example_25" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var err = doc.validateSync();
if ( err ){
  handleError( err );
} else {

}
</pre></div>


<hr />
<h3 id="documentprototypeinvalidate"><a href="http://mongoosejs.com#document_Document-invalidate">Document.prototype.invalidate()</a><a class="headerlink" href="#documentprototypeinvalidate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_43">Parameters<a class="headerlink" href="#parameters_43" title="Permanent link">&para;</a></h5>
<ul>
<li>[kind] «String» optional <code>kind</code> property for the error</li>
</ul>
<h5 id="returns_24">Returns:<a class="headerlink" href="#returns_24" title="Permanent link">&para;</a></h5>
<ul>
<li>«ValidationError» the current ValidationError, with all currently invalidated paths</li>
</ul>
<p>Marks a path as invalid, causing validation to fail.</p>
<p>The <code>errorMsg</code> argument will become the message of the <code>ValidationError</code>.</p>
<p>The <code>value</code> argument (if passed) will be available through the <code>ValidationError.value</code> property.</p>
<div class="codehilite"><pre><span></span>doc.invalidate(&#39;size&#39;, &#39;must be less than 20&#39;, 14);

doc.validate(function (err) {
  console.log(err)

  { message: &#39;Validation failed&#39;,
    name: &#39;ValidationError&#39;,
    errors:
     { size:
        { message: &#39;must be less than 20&#39;,
          name: &#39;ValidatorError&#39;,
          path: &#39;size&#39;,
          type: &#39;user defined&#39;,
          value: 14 } } }
})
</pre></div>


<hr />
<h3 id="documentprototypemarkvalid">Document.prototype.$markValid()<a class="headerlink" href="#documentprototypemarkvalid" title="Permanent link">&para;</a></h3>
<h5 id="parameters_44">Parameters<a class="headerlink" href="#parameters_44" title="Permanent link">&para;</a></h5>
<ul>
<li>path «String» the field to mark as valid</li>
</ul>
<p>Marks a path as valid, removing existing validation errors.</p>
<hr />
<h3 id="documentprototypesave"><a href="http://mongoosejs.com#document_Document-save">Document.prototype.save()</a><a class="headerlink" href="#documentprototypesave" title="Permanent link">&para;</a></h3>
<h5 id="parameters_45">Parameters<a class="headerlink" href="#parameters_45" title="Permanent link">&para;</a></h5>
<ul>
<li>[fn] «Function» optional callback</li>
</ul>
<h5 id="returns_25">Returns:<a class="headerlink" href="#returns_25" title="Permanent link">&para;</a></h5>
<p>Saves this document.</p>
<h4 id="example_26">Example:<a class="headerlink" href="#example_26" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.sold = Date.now();
product.save(function (err, product, numAffected) {
  if (err) ..
})
</pre></div>


<p>The callback will receive three parameters</p>
<ol>
<li><code>err</code> if an error occurred</li>
<li><code>product</code> which is the saved <code>product</code></li>
<li><code>numAffected</code> will be 1 when the document was successfully persisted to MongoDB, otherwise 0. Unless you tweak mongoose's internals, you don't need to worry about checking this parameter for errors - checking <code>err</code> is sufficient to make sure your document was properly saved.</li>
</ol>
<p>As an extra measure of flow control, save will return a Promise.</p>
<h4 id="example_27">Example:<a class="headerlink" href="#example_27" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.save().then(function(product) {
   ...
});
</pre></div>


<hr />
<h3 id="documentprototypetoobject"><a href="http://mongoosejs.com#document_Document-toObject">Document.prototype.toObject()</a><a class="headerlink" href="#documentprototypetoobject" title="Permanent link">&para;</a></h3>
<h5 id="parameters_46">Parameters<a class="headerlink" href="#parameters_46" title="Permanent link">&para;</a></h5>
<h5 id="returns_26">Returns:<a class="headerlink" href="#returns_26" title="Permanent link">&para;</a></h5>
<p>Converts this document into a plain javascript object, ready for storage in MongoDB.</p>
<p>Buffers are converted to instances of <a href="http://mongodb.github.com/node-mongodb-native/api-bson-generated/binary.html">mongodb.Binary</a> for proper storage.</p>
<h4 id="options_1">Options:<a class="headerlink" href="#options_1" title="Permanent link">&para;</a></h4>
<ul>
<li><code>getters</code> apply all getters (path and virtual getters)</li>
<li><code>virtuals</code> apply virtual getters (can override <code>getters</code> option)</li>
<li><code>minimize</code> remove empty objects (defaults to true)</li>
<li><code>transform</code> a transform function to apply to the resulting document before returning</li>
<li><code>depopulate</code> depopulate any populated paths, replacing them with their original refs (defaults to false)</li>
<li><code>versionKey</code> whether to include the version key (defaults to true)</li>
</ul>
<h4 id="gettersvirtuals">Getters/Virtuals<a class="headerlink" href="#gettersvirtuals" title="Permanent link">&para;</a></h4>
<p>Example of only applying path getters</p>
<div class="codehilite"><pre><span></span>doc.toObject({ getters: true, virtuals: false })
</pre></div>


<p>Example of only applying virtual getters</p>
<div class="codehilite"><pre><span></span>doc.toObject({ virtuals: true })
</pre></div>


<p>Example of applying both path and virtual getters</p>
<div class="codehilite"><pre><span></span>doc.toObject({ getters: true })
</pre></div>


<p>To apply these options to every document of your schema by default, set your <a href="http://mongoosejs.com#schema_Schema">schemas</a> <code>toObject</code> option to the same argument.</p>
<div class="codehilite"><pre><span></span>schema.set(&#39;toObject&#39;, { virtuals: true })
</pre></div>


<h4 id="transform">Transform<a class="headerlink" href="#transform" title="Permanent link">&para;</a></h4>
<p>We may need to perform a transformation of the resulting object based on some criteria, say to remove some sensitive information or return a custom object. In this case we set the optional <code>transform</code> function.</p>
<p>Transform functions receive three arguments</p>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{}</span>
</pre></div>


<ul>
<li><code>doc</code> The mongoose document which is being converted</li>
<li><code>ret</code> The plain object representation which has been converted</li>
<li><code>options</code> The options in use (either schema options or the options passed inline)</li>
</ul>
<h4 id="example_28">Example<a class="headerlink" href="#example_28" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>if (!schema.options.toObject) schema.options.toObject = {};
schema.options.toObject.transform = function (doc, ret, options) {

  delete ret._id;
  return ret;
}


doc.toObject();


doc.toObject();
</pre></div>


<p>With transformations we can do a lot more than remove properties. We can even return completely new customized objects:</p>
<div class="codehilite"><pre><span></span>if (!schema.options.toObject) schema.options.toObject = {};
schema.options.toObject.transform = function (doc, ret, options) {
  return { movie: ret.name }
}


doc.toObject();


doc.toObject();
</pre></div>


<p><em>Note: if a transform function returns <code>undefined</code>, the return value will be ignored.</em></p>
<p>Transformations may also be applied inline, overridding any transform set in the options:</p>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">xform</span> <span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span> <span class="nx">inline</span>: <span class="kt">ret.name</span><span class="p">,</span> <span class="nx">custom</span>: <span class="kt">true</span> <span class="p">}</span>
<span class="p">}</span>


<span class="nx">doc</span><span class="p">.</span><span class="nx">toObject</span><span class="p">({</span> <span class="nx">transform</span>: <span class="kt">xform</span> <span class="p">});</span>
</pre></div>


<p>If you want to skip transformations, use <code>transform: false</code>:</p>
<div class="codehilite"><pre><span></span><span class="nt">if</span> <span class="o">(!</span><span class="nt">schema</span><span class="p">.</span><span class="nc">options</span><span class="p">.</span><span class="nc">toObject</span><span class="o">)</span> <span class="nt">schema</span><span class="p">.</span><span class="nc">options</span><span class="p">.</span><span class="nc">toObject</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">options</span><span class="p">.</span><span class="nc">toObject</span><span class="p">.</span><span class="nc">hide</span> <span class="o">=</span> <span class="s1">&#39;_id&#39;</span><span class="o">;</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">options</span><span class="p">.</span><span class="nc">toObject</span><span class="p">.</span><span class="nc">transform</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">doc</span><span class="o">,</span> <span class="nt">ret</span><span class="o">,</span> <span class="nt">options</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">if</span> <span class="err">(options.hide)</span> <span class="err">{</span>
    <span class="err">options.hide.split(&#39;</span> <span class="err">&#39;).forEach(function</span> <span class="err">(prop)</span> <span class="err">{</span>
      <span class="err">delete</span> <span class="err">ret</span><span class="cp">[</span><span class="nx">prop</span><span class="cp">]</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>
  <span class="err">}</span>
  <span class="nt">return</span> <span class="nt">ret</span><span class="o">;</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">doc</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Doc</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="s1">&#39;anId&#39;</span><span class="p">,</span> <span class="n">secret</span><span class="o">:</span> <span class="mi">47</span><span class="p">,</span> <span class="n">name</span><span class="o">:</span> <span class="s1">&#39;Wreck-it Ralph&#39;</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">doc</span><span class="p">.</span><span class="nc">toObject</span><span class="o">();</span>
<span class="nt">doc</span><span class="p">.</span><span class="nc">toObject</span><span class="o">(</span><span class="p">{</span> <span class="n">hide</span><span class="p">:</span> <span class="s1">&#39;secret _id&#39;</span><span class="p">,</span> <span class="k">transform</span><span class="o">:</span> <span class="n">false</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">doc</span><span class="p">.</span><span class="nc">toObject</span><span class="o">(</span><span class="p">{</span> <span class="n">hide</span><span class="p">:</span> <span class="s1">&#39;secret _id&#39;</span><span class="p">,</span> <span class="k">transform</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<p>Transforms are applied <em>only to the document and are not applied to sub-documents</em>.</p>
<p>Transforms, like all of these options, are also available for <code>toJSON</code>.</p>
<p>See <a href="http://mongoosejs.com/docs/guide.html#toObject">schema options</a> for some more details.</p>
<p><em>During save, no custom options are applied to the document before being sent to the database.</em></p>
<hr />
<h3 id="documentprototypetojson"><a href="http://mongoosejs.com#document_Document-toJSON">Document.prototype.toJSON()</a><a class="headerlink" href="#documentprototypetojson" title="Permanent link">&para;</a></h3>
<h5 id="parameters_47">Parameters<a class="headerlink" href="#parameters_47" title="Permanent link">&para;</a></h5>
<h5 id="returns_27">Returns:<a class="headerlink" href="#returns_27" title="Permanent link">&para;</a></h5>
<p>The return value of this method is used in calls to JSON.stringify(doc).</p>
<p>This method accepts the same options as <a href="http://mongoosejs.com#document_Document-toObject">Document#toObject</a>. To apply the options to every document of your schema by default, set your <a href="http://mongoosejs.com#schema_Schema">schemas</a> <code>toJSON</code> option to the same argument.</p>
<div class="codehilite"><pre><span></span>schema.set(&#39;toJSON&#39;, { virtuals: true })
</pre></div>


<p>See <a href="http://mongoosejs.com/docs/guide.html#toJSON">schema options</a> for details.</p>
<hr />
<h3 id="documentprototypeinspect"><a href="http://mongoosejs.com#document_Document-inspect">Document.prototype.inspect()</a><a class="headerlink" href="#documentprototypeinspect" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="documentprototypetostring"><a href="http://mongoosejs.com#document_Document-toString">Document.prototype.toString()</a><a class="headerlink" href="#documentprototypetostring" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="documentprototypeequals"><a href="http://mongoosejs.com#document_Document-equals">Document.prototype.equals()</a><a class="headerlink" href="#documentprototypeequals" title="Permanent link">&para;</a></h3>
<h5 id="parameters_48">Parameters<a class="headerlink" href="#parameters_48" title="Permanent link">&para;</a></h5>
<ul>
<li>doc «Document» a document to compare</li>
</ul>
<h5 id="returns_28">Returns:<a class="headerlink" href="#returns_28" title="Permanent link">&para;</a></h5>
<p>Returns true if the Document stores the same data as doc.</p>
<p>Documents are considered equal when they have matching <code>_id</code>s, unless neither document has an <code>_id</code>, in which case this function falls back to using <code>deepEqual()</code>.</p>
<hr />
<h3 id="documentprototypepopulate"><a href="http://mongoosejs.com#document_Document-populate">Document.prototype.populate()</a><a class="headerlink" href="#documentprototypepopulate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_49">Parameters<a class="headerlink" href="#parameters_49" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» When passed, population is invoked</li>
</ul>
<h5 id="returns_29">Returns:<a class="headerlink" href="#returns_29" title="Permanent link">&para;</a></h5>
<p>Populates document references, executing the <code>callback</code> when complete. If you want to use promises instead, use this function with <a href="http://mongoosejs.com#document_Document-execPopulate"><code>execPopulate()</code></a></p>
<h4 id="example_29">Example:<a class="headerlink" href="#example_29" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>doc
.populate(&#39;company&#39;)
.populate({
  path: &#39;notes&#39;,
  match: /airline/,
  select: &#39;text&#39;,
  model: &#39;modelName&#39;
  options: opts
}, function (err, user) {
  assert(doc._id === user._id)
})


doc.populate(path)
doc.populate(options);
doc.populate(path, callback)
doc.populate(options, callback);
doc.populate(callback);
doc.populate(options).execPopulate()
</pre></div>


<h4 id="note_4">NOTE:<a class="headerlink" href="#note_4" title="Permanent link">&para;</a></h4>
<p>Population does not occur unless a <code>callback</code> is passed <em>or</em> you explicitly call <code>execPopulate()</code>. Passing the same path a second time will overwrite the previous path options. See <a href="http://mongoosejs.com#model_Model.populate">Model.populate()</a> for explaination of options.</p>
<hr />
<h3 id="documentprototypeexecpopulate"><a href="http://mongoosejs.com#document_Document-execPopulate">Document.prototype.execPopulate()</a><a class="headerlink" href="#documentprototypeexecpopulate" title="Permanent link">&para;</a></h3>
<h5 id="returns_30">Returns:<a class="headerlink" href="#returns_30" title="Permanent link">&para;</a></h5>
<ul>
<li>«Promise» promise that resolves to the document when population is done</li>
</ul>
<p>Explicitly executes population and returns a promise. Useful for ES2015 integration.</p>
<h4 id="example_30">Example:<a class="headerlink" href="#example_30" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var promise = doc.
  populate(&#39;company&#39;).
  populate({
    path: &#39;notes&#39;,
    match: /airline/,
    select: &#39;text&#39;,
    model: &#39;modelName&#39;
    options: opts
  }).
  execPopulate();


doc.execPopulate().then(resolve, reject);
</pre></div>


<hr />
<h3 id="documentprototypepopulated"><a href="http://mongoosejs.com#document_Document-populated">Document.prototype.populated()</a><a class="headerlink" href="#documentprototypepopulated" title="Permanent link">&para;</a></h3>
<h5 id="parameters_50">Parameters<a class="headerlink" href="#parameters_50" title="Permanent link">&para;</a></h5>
<h5 id="returns_31">Returns:<a class="headerlink" href="#returns_31" title="Permanent link">&para;</a></h5>
<ul>
<li>«Array,ObjectId,Number,Buffer,String,undefined»</li>
</ul>
<p>Gets _id(s) used during population of the given <code>path</code>.</p>
<h4 id="example_31">Example:<a class="headerlink" href="#example_31" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.findOne().populate(&#39;author&#39;).exec(function (err, doc) {
  console.log(doc.author.name)
  console.log(doc.populated(&#39;author&#39;))
})
</pre></div>


<p>If the path was not populated, undefined is returned.</p>
<hr />
<h3 id="documentprototypedepopulate"><a href="http://mongoosejs.com#document_Document-depopulate">Document.prototype.depopulate()</a><a class="headerlink" href="#documentprototypedepopulate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_51">Parameters<a class="headerlink" href="#parameters_51" title="Permanent link">&para;</a></h5>
<h5 id="returns_32">Returns:<a class="headerlink" href="#returns_32" title="Permanent link">&para;</a></h5>
<p>Takes a populated field and returns it to its unpopulated state.</p>
<h4 id="example_32">Example:<a class="headerlink" href="#example_32" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.findOne().populate(&#39;author&#39;).exec(function (err, doc) {
  console.log(doc.author.name);
  console.log(doc.depopulate(&#39;author&#39;));
  console.log(doc.author);
})
</pre></div>


<p>If the path was not populated, this is a no-op.</p>
<hr />
<hr />
<h3 id="model"><a href="http://mongoosejs.com#model_Model">Model()</a><a class="headerlink" href="#model" title="Permanent link">&para;</a></h3>
<h5 id="parameters_52">Parameters<a class="headerlink" href="#parameters_52" title="Permanent link">&para;</a></h5>
<ul>
<li>doc «Object» values with which to create the document</li>
</ul>
<p>Model constructor</p>
<p>Provides the interface to MongoDB collections as well as creates document instances.</p>
<hr />
<h3 id="modelprototypedb"><a href="http://mongoosejs.com#model_Model-db">Model.prototype.db</a><a class="headerlink" href="#modelprototypedb" title="Permanent link">&para;</a></h3>
<p>Connection the model uses.</p>
<hr />
<h3 id="modelprototypecollection"><a href="http://mongoosejs.com#model_Model-collection">Model.prototype.collection</a><a class="headerlink" href="#modelprototypecollection" title="Permanent link">&para;</a></h3>
<p>Collection the model uses.</p>
<hr />
<h3 id="modelprototypemodelname"><a href="http://mongoosejs.com#model_Model-modelName">Model.prototype.modelName</a><a class="headerlink" href="#modelprototypemodelname" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="modelprototypewhere"><a href="http://mongoosejs.com#model_Model-$where">Model.prototype.$where</a><a class="headerlink" href="#modelprototypewhere" title="Permanent link">&para;</a></h3>
<p>Additional properties to attach to the query when calling <code>save()</code> and <code>isNew</code> is false.</p>
<hr />
<h3 id="modelprototypebasemodelname"><a href="http://mongoosejs.com#model_Model-baseModelName">Model.prototype.baseModelName</a><a class="headerlink" href="#modelprototypebasemodelname" title="Permanent link">&para;</a></h3>
<p>If this is a discriminator model, <code>baseModelName</code> is the name of the base model.</p>
<hr />
<h3 id="modelprototypesave"><a href="http://mongoosejs.com#model_Model-save">Model.prototype.save()</a><a class="headerlink" href="#modelprototypesave" title="Permanent link">&para;</a></h3>
<h5 id="parameters_53">Parameters<a class="headerlink" href="#parameters_53" title="Permanent link">&para;</a></h5>
<ul>
<li>[fn] «Function» optional callback</li>
</ul>
<h5 id="returns_33">Returns:<a class="headerlink" href="#returns_33" title="Permanent link">&para;</a></h5>
<p>Saves this document.</p>
<h4 id="example_33">Example:<a class="headerlink" href="#example_33" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.sold = Date.now();
product.save(function (err, product) {
  if (err) ..
})
</pre></div>


<p>The callback will receive three parameters</p>
<ol>
<li><code>err</code> if an error occurred</li>
<li><code>product</code> which is the saved <code>product</code></li>
</ol>
<p>As an extra measure of flow control, save will return a Promise.</p>
<h4 id="example_34">Example:<a class="headerlink" href="#example_34" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.save().then(function(product) {
   ...
});
</pre></div>


<hr />
<h3 id="modelprototypeincrement"><a href="http://mongoosejs.com#model_Model-increment">Model.prototype.increment()</a><a class="headerlink" href="#modelprototypeincrement" title="Permanent link">&para;</a></h3>
<p>Signal that we desire an increment of this documents version.</p>
<h4 id="example_35">Example:<a class="headerlink" href="#example_35" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.findById(id, function (err, doc) {
  doc.increment();
  doc.save(function (err) { .. })
})
</pre></div>


<hr />
<h3 id="modelprototyperemove"><a href="http://mongoosejs.com#model_Model-remove">Model.prototype.remove()</a><a class="headerlink" href="#modelprototyperemove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_54">Parameters<a class="headerlink" href="#parameters_54" title="Permanent link">&para;</a></h5>
<ul>
<li>[fn] «function(err,product)» optional callback</li>
</ul>
<h5 id="returns_34">Returns:<a class="headerlink" href="#returns_34" title="Permanent link">&para;</a></h5>
<p>Removes this document from the db.</p>
<h4 id="example_36">Example:<a class="headerlink" href="#example_36" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.remove(function (err, product) {
  if (err) return handleError(err);
  Product.findById(product._id, function (err, product) {
    console.log(product)
  })
})
</pre></div>


<p>As an extra measure of flow control, remove will return a Promise (bound to <code>fn</code> if passed) so it could be chained, or hooked to recive errors</p>
<h4 id="example_37">Example:<a class="headerlink" href="#example_37" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>product.remove().then(function (product) {
   ...
}).catch(function (err) {
   assert.ok(err)
})
</pre></div>


<hr />
<h3 id="modelprototypemodel"><a href="http://mongoosejs.com#model_Model-model">Model.prototype.model()</a><a class="headerlink" href="#modelprototypemodel" title="Permanent link">&para;</a></h3>
<h5 id="parameters_55">Parameters<a class="headerlink" href="#parameters_55" title="Permanent link">&para;</a></h5>
<ul>
<li>name «String» model name</li>
</ul>
<p>Returns another Model instance.</p>
<h4 id="example_38">Example:<a class="headerlink" href="#example_38" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var doc = new Tank;
doc.model(&#39;User&#39;).findById(id, callback);
</pre></div>


<hr />
<h3 id="modeldiscriminator"><a href="http://mongoosejs.com#discriminator_discriminator">Model.discriminator()</a><a class="headerlink" href="#modeldiscriminator" title="Permanent link">&para;</a></h3>
<h5 id="parameters_56">Parameters<a class="headerlink" href="#parameters_56" title="Permanent link">&para;</a></h5>
<ul>
<li>schema «Schema» discriminator model schema</li>
</ul>
<p>Adds a discriminator type.</p>
<h4 id="example_39">Example:<a class="headerlink" href="#example_39" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">BaseSchema() {</span>
  <span class="nx">Schema</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span>
    <span class="nx">name</span>: <span class="kt">String</span><span class="p">,</span>
    <span class="nx">createdAt</span>: <span class="kt">Date</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="nx">util</span><span class="p">.</span><span class="nx">inherits</span><span class="p">(</span><span class="nx">BaseSchema</span><span class="p">,</span> <span class="nx">Schema</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">PersonSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BaseSchema</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">BossSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BaseSchema</span><span class="p">({</span> <span class="nx">department</span>: <span class="kt">String</span> <span class="p">});</span>

<span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;Person&#39;</span><span class="p">,</span> <span class="nx">PersonSchema</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">Boss</span> <span class="o">=</span> <span class="nx">Person</span><span class="p">.</span><span class="nx">discriminator</span><span class="p">(</span><span class="s1">&#39;Boss&#39;</span><span class="p">,</span> <span class="nx">BossSchema</span><span class="p">);</span>
</pre></div>


<hr />
<h3 id="modelinit"><a href="http://mongoosejs.com#init_init">Model.init()</a><a class="headerlink" href="#modelinit" title="Permanent link">&para;</a></h3>
<h5 id="parameters_57">Parameters<a class="headerlink" href="#parameters_57" title="Permanent link">&para;</a></h5>
<p>Performs any async initialization of this model against MongoDB. Currently, this function is only responsible for building <a href="https://docs.mongodb.com/manual/indexes/">indexes</a>, unless <a href="http://mongoosejs.com/docs/guide.html#autoIndex"><code>autoIndex</code></a> is turned off.</p>
<p>This function is called automatically, so you don't need to call it. This function is also idempotent, so you may call it to get back a promise that will resolve when your indexes are finished building as an alternative to <code>MyModel.on('index')</code></p>
<h4 id="example_40">Example:<a class="headerlink" href="#example_40" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var eventSchema = new Schema({ thing: { type: &#39;string&#39;, unique: true }})


var Event = mongoose.model(&#39;Event&#39;, eventSchema);

Event.init().then(function(Event) {


  console.log(&#39;Indexes are done building!&#39;);
});
</pre></div>


<hr />
<h3 id="modelensureindexes"><a href="http://mongoosejs.com#ensureindexes_ensureIndexes">Model.ensureIndexes()</a><a class="headerlink" href="#modelensureindexes" title="Permanent link">&para;</a></h3>
<h5 id="parameters_58">Parameters<a class="headerlink" href="#parameters_58" title="Permanent link">&para;</a></h5>
<ul>
<li>[cb] «Function» optional callback</li>
</ul>
<h5 id="returns_35">Returns:<a class="headerlink" href="#returns_35" title="Permanent link">&para;</a></h5>
<p>Sends <code>createIndex</code> commands to mongo for each index declared in the schema. The <code>createIndex</code> commands are sent in series.</p>
<h4 id="example_41">Example:<a class="headerlink" href="#example_41" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Event.ensureIndexes(function (err) {
  if (err) return handleError(err);
});
</pre></div>


<p>After completion, an <code>index</code> event is emitted on this <code>Model</code> passing an error if one occurred.</p>
<h4 id="example_42">Example:<a class="headerlink" href="#example_42" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var eventSchema = new Schema({ thing: { type: &#39;string&#39;, unique: true }})
var Event = mongoose.model(&#39;Event&#39;, eventSchema);

Event.on(&#39;index&#39;, function (err) {
  if (err) console.error(err);
})
</pre></div>


<p><em>NOTE: It is not recommended that you run this in production. Index creation may impact database performance depending on your load. Use with caution.</em></p>
<hr />
<h3 id="modelcreateindexes"><a href="http://mongoosejs.com#createindexes_createIndexes">Model.createIndexes()</a><a class="headerlink" href="#modelcreateindexes" title="Permanent link">&para;</a></h3>
<h5 id="parameters_59">Parameters<a class="headerlink" href="#parameters_59" title="Permanent link">&para;</a></h5>
<ul>
<li>[cb] «Function» optional callback</li>
</ul>
<h5 id="returns_36">Returns:<a class="headerlink" href="#returns_36" title="Permanent link">&para;</a></h5>
<p>Similar to <code>ensureIndexes()</code>, except for it uses the <a href="http://mongodb.github.io/node-mongodb-native/2.2/api/Collection.html#createIndex"><code>createIndex</code></a> function. The <code>ensureIndex()</code> function checks to see if an index with that name already exists, and, if not, does not attempt to create the index. <code>createIndex()</code> bypasses this check.</p>
<hr />
<h3 id="modelprototypeschema"><a href="http://mongoosejs.com#model_Model-schema">Model.prototype.schema</a><a class="headerlink" href="#modelprototypeschema" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="modelprototypebase"><a href="http://mongoosejs.com#model_Model-base">Model.prototype.base</a><a class="headerlink" href="#modelprototypebase" title="Permanent link">&para;</a></h3>
<p>Base Mongoose instance the model uses.</p>
<hr />
<h3 id="modelprototypediscriminators"><a href="http://mongoosejs.com#model_Model-discriminators">Model.prototype.discriminators</a><a class="headerlink" href="#modelprototypediscriminators" title="Permanent link">&para;</a></h3>
<p>Registered discriminators for this model.</p>
<hr />
<h3 id="modeltranslatealiases"><a href="http://mongoosejs.com#translatealiases_translateAliases">Model.translateAliases()</a><a class="headerlink" href="#modeltranslatealiases" title="Permanent link">&para;</a></h3>
<h5 id="parameters_60">Parameters<a class="headerlink" href="#parameters_60" title="Permanent link">&para;</a></h5>
<ul>
<li>raw «Object» fields/conditions that may contain aliased keys</li>
</ul>
<h5 id="returns_37">Returns:<a class="headerlink" href="#returns_37" title="Permanent link">&para;</a></h5>
<ul>
<li>«Object» the translated 'pure' fields/conditions</li>
</ul>
<p>Translate any aliases fields/conditions so the final query or document object is pure</p>
<h4 id="example_43">Example:<a class="headerlink" href="#example_43" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Character
  .find(Character.translateAliases({
    &#39;名&#39;: &#39;Eddard Stark&#39;
  })
  .exec(function(err, characters) {})
</pre></div>


<h4 id="note_5">Note:<a class="headerlink" href="#note_5" title="Permanent link">&para;</a></h4>
<p>Only translate arguments of object type anything else is returned raw</p>
<hr />
<h3 id="modelremove"><a href="http://mongoosejs.com#remove_remove">Model.remove()</a><a class="headerlink" href="#modelremove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_61">Parameters<a class="headerlink" href="#parameters_61" title="Permanent link">&para;</a></h5>
<h5 id="returns_38">Returns:<a class="headerlink" href="#returns_38" title="Permanent link">&para;</a></h5>
<p>Removes all documents that match <code>conditions</code> from the collection. To remove just the first document that matches <code>conditions</code>, set the <code>single</code> option to true.</p>
<h4 id="example_44">Example:<a class="headerlink" href="#example_44" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Character</span><span class="p">.</span><span class="nc">remove</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Eddard Stark&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>
</pre></div>


<h4 id="note_6">Note:<a class="headerlink" href="#note_6" title="Permanent link">&para;</a></h4>
<p>This method sends a remove command directly to MongoDB, no Mongoose documents are involved. Because no Mongoose documents are involved, <em>no middleware (hooks) are executed</em>.</p>
<hr />
<h3 id="modeldeleteone"><a href="http://mongoosejs.com#deleteone_deleteOne">Model.deleteOne()</a><a class="headerlink" href="#modeldeleteone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_62">Parameters<a class="headerlink" href="#parameters_62" title="Permanent link">&para;</a></h5>
<h5 id="returns_39">Returns:<a class="headerlink" href="#returns_39" title="Permanent link">&para;</a></h5>
<p>Deletes the first document that matches <code>conditions</code> from the collection. Behaves like <code>remove()</code>, but deletes at most one document regardless of the <code>single</code> option.</p>
<h4 id="example_45">Example:<a class="headerlink" href="#example_45" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Character</span><span class="p">.</span><span class="nc">deleteOne</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Eddard Stark&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>
</pre></div>


<h4 id="note_7">Note:<a class="headerlink" href="#note_7" title="Permanent link">&para;</a></h4>
<p>Like <code>Model.remove()</code>, this function does <strong>not</strong> trigger <code>pre('remove')</code> or <code>post('remove')</code> hooks.</p>
<hr />
<h3 id="modeldeletemany"><a href="http://mongoosejs.com#deletemany_deleteMany">Model.deleteMany()</a><a class="headerlink" href="#modeldeletemany" title="Permanent link">&para;</a></h3>
<h5 id="parameters_63">Parameters<a class="headerlink" href="#parameters_63" title="Permanent link">&para;</a></h5>
<h5 id="returns_40">Returns:<a class="headerlink" href="#returns_40" title="Permanent link">&para;</a></h5>
<p>Deletes all of the documents that match <code>conditions</code> from the collection. Behaves like <code>remove()</code>, but deletes all documents that match <code>conditions</code> regardless of the <code>single</code> option.</p>
<h4 id="example_46">Example:<a class="headerlink" href="#example_46" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Character</span><span class="p">.</span><span class="nc">deleteMany</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Stark</span><span class="o">/</span><span class="p">,</span> <span class="n">age</span><span class="o">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">18</span> <span class="p">}</span> <span class="err">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>
</pre></div>


<h4 id="note_8">Note:<a class="headerlink" href="#note_8" title="Permanent link">&para;</a></h4>
<p>Like <code>Model.remove()</code>, this function does <strong>not</strong> trigger <code>pre('remove')</code> or <code>post('remove')</code> hooks.</p>
<hr />
<h3 id="modelfind"><a href="http://mongoosejs.com#find_find">Model.find()</a><a class="headerlink" href="#modelfind" title="Permanent link">&para;</a></h3>
<h5 id="parameters_64">Parameters<a class="headerlink" href="#parameters_64" title="Permanent link">&para;</a></h5>
<h5 id="returns_41">Returns:<a class="headerlink" href="#returns_41" title="Permanent link">&para;</a></h5>
<p>Finds documents</p>
<p>The <code>conditions</code> are cast to their respective SchemaTypes before the command is sent.</p>
<h4 id="examples">Examples:<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">18</span> <span class="p">}</span><span class="err">}</span><span class="o">);</span>


<span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">18</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">docs</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">john</span><span class="o">/</span><span class="n">i</span> <span class="p">}</span><span class="o">,</span> <span class="s1">&#39;name friends&#39;</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">docs</span><span class="o">)</span> <span class="p">{</span> <span class="p">}</span><span class="o">)</span>


<span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">john</span><span class="o">/</span><span class="n">i</span> <span class="p">}</span><span class="o">,</span> <span class="nt">null</span><span class="o">,</span> <span class="p">{</span> <span class="n">skip</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span><span class="o">)</span>


<span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">john</span><span class="o">/</span><span class="n">i</span> <span class="p">}</span><span class="o">,</span> <span class="nt">null</span><span class="o">,</span> <span class="p">{</span> <span class="n">skip</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">docs</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">john</span><span class="o">/</span><span class="n">i</span> <span class="p">}</span><span class="o">,</span> <span class="nt">null</span><span class="o">,</span> <span class="p">{</span> <span class="n">skip</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">docs</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="nt">MyModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">john</span><span class="o">/</span><span class="n">i</span> <span class="p">}</span><span class="o">,</span> <span class="nt">null</span><span class="o">,</span> <span class="p">{</span> <span class="n">skip</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">promise</span> <span class="o">=</span> <span class="nt">query</span><span class="p">.</span><span class="nc">exec</span><span class="o">();</span>
<span class="nt">promise</span><span class="p">.</span><span class="nc">addBack</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">docs</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="modelfindbyid"><a href="http://mongoosejs.com#findbyid_findById">Model.findById()</a><a class="headerlink" href="#modelfindbyid" title="Permanent link">&para;</a></h3>
<h5 id="parameters_65">Parameters<a class="headerlink" href="#parameters_65" title="Permanent link">&para;</a></h5>
<h5 id="returns_42">Returns:<a class="headerlink" href="#returns_42" title="Permanent link">&para;</a></h5>
<p>Finds a single document by its _id field. <code>findById(id)</code> is almost* equivalent to <code>findOne({ _id: id })</code>. If you want to query by a document's <code>_id</code>, use <code>findById()</code> instead of <code>findOne()</code>.</p>
<p>The <code>id</code> is cast based on the Schema before sending the command.</p>
<p>This function triggers the following middleware.</p>
<ul>
<li>Except for how it treats <code>undefined</code>. If you use <code>findOne()</code>, you'll see that <code>findOne(undefined)</code> and <code>findOne({ _id: undefined })</code> are equivalent to <code>findOne({})</code> and return arbitrary documents. However, mongoose translates <code>findById(undefined)</code> into <code>findOne({ _id: null })</code>.</li>
</ul>
<h4 id="example_47">Example:<a class="headerlink" href="#example_47" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">,</span> <span class="s1">&#39;name length&#39;</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">,</span> <span class="s1">&#39;name length&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">,</span> <span class="s1">&#39;-length&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="n">lean</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">doc</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findById</span><span class="o">(</span><span class="nt">id</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">lean</span><span class="o">()</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">doc</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="modelfindone"><a href="http://mongoosejs.com#findone_findOne">Model.findOne()</a><a class="headerlink" href="#modelfindone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_66">Parameters<a class="headerlink" href="#parameters_66" title="Permanent link">&para;</a></h5>
<h5 id="returns_43">Returns:<a class="headerlink" href="#returns_43" title="Permanent link">&para;</a></h5>
<p>Finds one document.</p>
<p>The <code>conditions</code> are cast to their respective SchemaTypes before the command is sent.</p>
<p><em>Note:</em> <code>conditions</code> is optional, and if <code>conditions</code> is null or undefined, mongoose will send an empty <code>findOne</code> command to MongoDB, which will return an arbitrary document. If you're querying by <code>_id</code>, use <code>findById()</code> instead.</p>
<h4 id="example_48">Example:<a class="headerlink" href="#example_48" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">adventure</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="n">lean</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="n">lean</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span>


<span class="nt">Adventure</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;iphone&#39;</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">lean</span><span class="o">()</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="modelcount"><a href="http://mongoosejs.com#count_count">Model.count()</a><a class="headerlink" href="#modelcount" title="Permanent link">&para;</a></h3>
<h5 id="parameters_67">Parameters<a class="headerlink" href="#parameters_67" title="Permanent link">&para;</a></h5>
<h5 id="returns_44">Returns:<a class="headerlink" href="#returns_44" title="Permanent link">&para;</a></h5>
<p>Counts number of matching documents in a database collection.</p>
<h4 id="example_49">Example:<a class="headerlink" href="#example_49" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Adventure.count({ type: &#39;jungle&#39; }, function (err, count) {
  if (err) ..
  console.log(&#39;there are %d jungle adventures&#39;, count);
});
</pre></div>


<hr />
<h3 id="modeldistinct"><a href="http://mongoosejs.com#distinct_distinct">Model.distinct()</a><a class="headerlink" href="#modeldistinct" title="Permanent link">&para;</a></h3>
<h5 id="parameters_68">Parameters<a class="headerlink" href="#parameters_68" title="Permanent link">&para;</a></h5>
<h5 id="returns_45">Returns:<a class="headerlink" href="#returns_45" title="Permanent link">&para;</a></h5>
<p>Creates a Query for a <code>distinct</code> operation.</p>
<p>Passing a <code>callback</code> immediately executes the query.</p>
<h4 id="example_50">Example<a class="headerlink" href="#example_50" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="x">Link.distinct(&#39;url&#39;, </span><span class="cp">{</span> <span class="na">clicks</span><span class="o">:</span> <span class="cp">{</span><span class="nv">$gt</span><span class="o">:</span> <span class="m">100</span><span class="cp">}}</span><span class="x">, function (err, result) </span><span class="cp">{</span>
  <span class="na">if</span> <span class="o">(</span><span class="na">err</span><span class="o">)</span> <span class="na">return</span> <span class="na">handleError</span><span class="o">(</span><span class="na">err</span><span class="o">);</span>

  <span class="na">assert</span><span class="o">(</span><span class="na">Array</span><span class="o">.</span><span class="na">isArray</span><span class="o">(</span><span class="na">result</span><span class="o">));</span>
  <span class="na">console</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s1">&#39;unique urls with more than 100 clicks&#39;</span><span class="o">,</span> <span class="na">result</span><span class="o">);</span>
<span class="cp">}</span><span class="x">)</span>

<span class="x">var query = Link.distinct(&#39;url&#39;);</span>
<span class="x">query.exec(callback);</span>
</pre></div>


<hr />
<h3 id="modelwhere"><a href="http://mongoosejs.com#where_where">Model.where()</a><a class="headerlink" href="#modelwhere" title="Permanent link">&para;</a></h3>
<h5 id="parameters_69">Parameters<a class="headerlink" href="#parameters_69" title="Permanent link">&para;</a></h5>
<ul>
<li>[val] «Object» optional value</li>
</ul>
<h5 id="returns_46">Returns:<a class="headerlink" href="#returns_46" title="Permanent link">&para;</a></h5>
<p>Creates a Query, applies the passed conditions, and returns the Query.</p>
<p>For example, instead of writing:</p>
<div class="codehilite"><pre><span></span><span class="nt">User</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span><span class="n">age</span><span class="p">:</span> <span class="err">{$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">21</span><span class="p">,</span> <span class="err">$</span><span class="n">lte</span><span class="o">:</span> <span class="mi">65</span><span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">);</span>
</pre></div>


<p>we can instead write:</p>
<div class="codehilite"><pre><span></span>User.where(&#39;age&#39;).gte(21).lte(65).exec(callback);
</pre></div>


<p>Since the Query class also supports <code>where</code> you can continue chaining</p>
<div class="codehilite"><pre><span></span>User
.where(&#39;age&#39;).gte(21).lte(65)
.where(&#39;name&#39;, /^b/i)
... etc
</pre></div>


<hr />
<h3 id="modelprototypewhere_1"><a href="http://mongoosejs.com#model_Model-$where">Model.prototype.$where()</a><a class="headerlink" href="#modelprototypewhere_1" title="Permanent link">&para;</a></h3>
<h5 id="parameters_70">Parameters<a class="headerlink" href="#parameters_70" title="Permanent link">&para;</a></h5>
<ul>
<li>argument «String,Function» is a javascript string or anonymous function</li>
</ul>
<h5 id="returns_47">Returns:<a class="headerlink" href="#returns_47" title="Permanent link">&para;</a></h5>
<p>Creates a <code>Query</code> and specifies a <code>$where</code> condition.</p>
<p>Sometimes you need to query for things in mongodb using a JavaScript expression. You can do so via <code>find({ $where: javascript })</code>, or you can use the mongoose shortcut method $where via a Query chain or from your mongoose Model.</p>
<div class="codehilite"><pre><span></span>Blog.$where(&#39;this.username.indexOf(&quot;val&quot;) !== -1&#39;).exec(function (err, docs) {});
</pre></div>


<hr />
<h3 id="modelfindoneandupdate"><a href="http://mongoosejs.com#findoneandupdate_findOneAndUpdate">Model.findOneAndUpdate()</a><a class="headerlink" href="#modelfindoneandupdate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_71">Parameters<a class="headerlink" href="#parameters_71" title="Permanent link">&para;</a></h5>
<h5 id="returns_48">Returns:<a class="headerlink" href="#returns_48" title="Permanent link">&para;</a></h5>
<p>Issues a mongodb findAndModify update command.</p>
<p>Finds a matching document, updates it according to the <code>update</code> arg, passing any <code>options</code>, and returns the found document (if any) to the callback. The query executes immediately if <code>callback</code> is passed else a Query object is returned.</p>
<h4 id="options_2">Options:<a class="headerlink" href="#options_2" title="Permanent link">&para;</a></h4>
<ul>
<li><code>new</code>: bool - if true, return the modified document rather than the original. defaults to false (changed in 4.0)</li>
<li><code>upsert</code>: bool - creates the object if it doesn't exist. defaults to false.</li>
<li><code>fields</code>: {Object|String} - Field selection. Equivalent to <code>.select(fields).findOneAndUpdate()</code></li>
<li><code>maxTimeMS</code>: puts a time limit on the query - requires mongodb &gt;= 2.6.0</li>
<li><code>sort</code>: if multiple docs are found by the conditions, sets the sort order to choose which doc to update</li>
<li><code>runValidators</code>: if true, runs <a href="http://mongoosejs.com/docs/validation.html#update-validators">update validators</a> on this command. Update validators validate the update operation against the model's schema.</li>
<li><code>setDefaultsOnInsert</code>: if this and <code>upsert</code> are true, mongoose will apply the <a href="http://mongoosejs.com/docs/defaults.html">defaults</a> specified in the model's schema if a new document is created. This option only works on MongoDB &gt;= 2.4 because it relies on <a href="https://docs.mongodb.org/v2.4/reference/operator/update/setOnInsert/">MongoDB's <code>$setOnInsert</code> operator</a>.</li>
<li><code>rawResult</code>: if true, returns the <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findAndModify">raw result from the MongoDB driver</a></li>
<li><code>strict</code>: overwrites the schema's <a href="http://mongoosejs.com/docs/guide.html#strict">strict mode option</a> for this update</li>
</ul>
<h4 id="examples_1">Examples:<a class="headerlink" href="#examples_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>A.findOneAndUpdate(conditions, update, options, callback)
A.findOneAndUpdate(conditions, update, options)
A.findOneAndUpdate(conditions, update, callback)
A.findOneAndUpdate(conditions, update)
A.findOneAndUpdate()
</pre></div>


<h4 id="note_9">Note:<a class="headerlink" href="#note_9" title="Permanent link">&para;</a></h4>
<p>All top level update keys which are not <code>atomic</code> operation names are treated as set operations:</p>
<h4 id="example_51">Example:<a class="headerlink" href="#example_51" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;borne&#39;</span> <span class="p">}</span><span class="o">;</span>
<span class="nt">Model</span><span class="p">.</span><span class="nc">findOneAndUpdate</span><span class="o">(</span><span class="nt">query</span><span class="o">,</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;jason bourne&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">options</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>


<span class="nt">Model</span><span class="p">.</span><span class="nc">findOneAndUpdate</span><span class="o">(</span><span class="nt">query</span><span class="o">,</span> <span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">name</span><span class="o">:</span> <span class="s1">&#39;jason bourne&#39;</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">options</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>
</pre></div>


<p>This helps prevent accidentally overwriting your document with <code>{ name: 'jason bourne' }</code>.</p>
<h4 id="note_10">Note:<a class="headerlink" href="#note_10" title="Permanent link">&para;</a></h4>
<p>Values are cast to their appropriate types when using the findAndModify helpers. However, the below are not executed by default.</p>
<ul>
<li>defaults. Use the <code>setDefaultsOnInsert</code> option to override.</li>
</ul>
<p><code>findAndModify</code> helpers support limited validation. You can enable these by setting the <code>runValidators</code> options, respectively.</p>
<p>If you need full-fledged validation, use the traditional approach of first retrieving the document.</p>
<div class="codehilite"><pre><span></span>Model.findById(id, function (err, doc) {
  if (err) ..
  doc.name = &#39;jason bourne&#39;;
  doc.save(callback);
});
</pre></div>


<hr />
<h3 id="modelfindbyidandupdate"><a href="http://mongoosejs.com#findbyidandupdate_findByIdAndUpdate">Model.findByIdAndUpdate()</a><a class="headerlink" href="#modelfindbyidandupdate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_72">Parameters<a class="headerlink" href="#parameters_72" title="Permanent link">&para;</a></h5>
<h5 id="returns_49">Returns:<a class="headerlink" href="#returns_49" title="Permanent link">&para;</a></h5>
<p>Issues a mongodb findAndModify update command by a document's _id field. <code>findByIdAndUpdate(id, ...)</code> is equivalent to <code>findOneAndUpdate({ _id: id }, ...)</code>.</p>
<p>Finds a matching document, updates it according to the <code>update</code> arg, passing any <code>options</code>, and returns the found document (if any) to the callback. The query executes immediately if <code>callback</code> is passed else a Query object is returned.</p>
<p>This function triggers the following middleware.</p>
<h4 id="options_3">Options:<a class="headerlink" href="#options_3" title="Permanent link">&para;</a></h4>
<ul>
<li><code>new</code>: bool - true to return the modified document rather than the original. defaults to false</li>
<li><code>upsert</code>: bool - creates the object if it doesn't exist. defaults to false.</li>
<li><code>runValidators</code>: if true, runs <a href="http://mongoosejs.com/docs/validation.html#update-validators">update validators</a> on this command. Update validators validate the update operation against the model's schema.</li>
<li><code>setDefaultsOnInsert</code>: if this and <code>upsert</code> are true, mongoose will apply the <a href="http://mongoosejs.com/docs/defaults.html">defaults</a> specified in the model's schema if a new document is created. This option only works on MongoDB &gt;= 2.4 because it relies on <a href="https://docs.mongodb.org/v2.4/reference/operator/update/setOnInsert/">MongoDB's <code>$setOnInsert</code> operator</a>.</li>
<li><code>sort</code>: if multiple docs are found by the conditions, sets the sort order to choose which doc to update</li>
<li><code>select</code>: sets the document fields to return</li>
<li><code>rawResult</code>: if true, returns the <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findAndModify">raw result from the MongoDB driver</a></li>
<li><code>strict</code>: overwrites the schema's <a href="http://mongoosejs.com/docs/guide.html#strict">strict mode option</a> for this update</li>
</ul>
<h4 id="examples_2">Examples:<a class="headerlink" href="#examples_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>A.findByIdAndUpdate(id, update, options, callback)
A.findByIdAndUpdate(id, update, options)
A.findByIdAndUpdate(id, update, callback)
A.findByIdAndUpdate(id, update)
A.findByIdAndUpdate()
</pre></div>


<h4 id="note_11">Note:<a class="headerlink" href="#note_11" title="Permanent link">&para;</a></h4>
<p>All top level update keys which are not <code>atomic</code> operation names are treated as set operations:</p>
<h4 id="example_52">Example:<a class="headerlink" href="#example_52" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.findByIdAndUpdate(id, { name: &#39;jason bourne&#39; }, options, callback)


Model.findByIdAndUpdate(id, { $set: { name: &#39;jason bourne&#39; }}, options, callback)
</pre></div>


<p>This helps prevent accidentally overwriting your document with <code>{ name: 'jason bourne' }</code>.</p>
<h4 id="note_12">Note:<a class="headerlink" href="#note_12" title="Permanent link">&para;</a></h4>
<p>Values are cast to their appropriate types when using the findAndModify helpers. However, the below are not executed by default.</p>
<ul>
<li>defaults. Use the <code>setDefaultsOnInsert</code> option to override.</li>
</ul>
<p><code>findAndModify</code> helpers support limited validation. You can enable these by setting the <code>runValidators</code> options, respectively.</p>
<p>If you need full-fledged validation, use the traditional approach of first retrieving the document.</p>
<div class="codehilite"><pre><span></span>Model.findById(id, function (err, doc) {
  if (err) ..
  doc.name = &#39;jason bourne&#39;;
  doc.save(callback);
});
</pre></div>


<hr />
<h3 id="modelfindoneandremove"><a href="http://mongoosejs.com#findoneandremove_findOneAndRemove">Model.findOneAndRemove()</a><a class="headerlink" href="#modelfindoneandremove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_73">Parameters<a class="headerlink" href="#parameters_73" title="Permanent link">&para;</a></h5>
<h5 id="returns_50">Returns:<a class="headerlink" href="#returns_50" title="Permanent link">&para;</a></h5>
<p>Issue a mongodb findAndModify remove command.</p>
<p>Finds a matching document, removes it, passing the found document (if any) to the callback.</p>
<p>Executes immediately if <code>callback</code> is passed else a Query object is returned.</p>
<p>This function triggers the following middleware.</p>
<h4 id="options_4">Options:<a class="headerlink" href="#options_4" title="Permanent link">&para;</a></h4>
<ul>
<li><code>sort</code>: if multiple docs are found by the conditions, sets the sort order to choose which doc to update</li>
<li><code>maxTimeMS</code>: puts a time limit on the query - requires mongodb &gt;= 2.6.0</li>
<li><code>select</code>: sets the document fields to return</li>
<li><code>rawResult</code>: if true, returns the <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findAndModify">raw result from the MongoDB driver</a></li>
<li><code>strict</code>: overwrites the schema's <a href="http://mongoosejs.com/docs/guide.html#strict">strict mode option</a> for this update</li>
</ul>
<h4 id="examples_3">Examples:<a class="headerlink" href="#examples_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>A.findOneAndRemove(conditions, options, callback)
A.findOneAndRemove(conditions, options)
A.findOneAndRemove(conditions, callback)
A.findOneAndRemove(conditions)
A.findOneAndRemove()
</pre></div>


<p>Values are cast to their appropriate types when using the findAndModify helpers. However, the below are not executed by default.</p>
<ul>
<li>defaults. Use the <code>setDefaultsOnInsert</code> option to override.</li>
</ul>
<p><code>findAndModify</code> helpers support limited validation. You can enable these by setting the <code>runValidators</code> options, respectively.</p>
<p>If you need full-fledged validation, use the traditional approach of first retrieving the document.</p>
<div class="codehilite"><pre><span></span>Model.findById(id, function (err, doc) {
  if (err) ..
  doc.name = &#39;jason bourne&#39;;
  doc.save(callback);
});
</pre></div>


<hr />
<h3 id="modelfindbyidandremove"><a href="http://mongoosejs.com#findbyidandremove_findByIdAndRemove">Model.findByIdAndRemove()</a><a class="headerlink" href="#modelfindbyidandremove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_74">Parameters<a class="headerlink" href="#parameters_74" title="Permanent link">&para;</a></h5>
<h5 id="returns_51">Returns:<a class="headerlink" href="#returns_51" title="Permanent link">&para;</a></h5>
<p>Issue a mongodb findAndModify remove command by a document's _id field. <code>findByIdAndRemove(id, ...)</code> is equivalent to <code>findOneAndRemove({ _id: id }, ...)</code>.</p>
<p>Finds a matching document, removes it, passing the found document (if any) to the callback.</p>
<p>Executes immediately if <code>callback</code> is passed, else a <code>Query</code> object is returned.</p>
<p>This function triggers the following middleware.</p>
<h4 id="options_5">Options:<a class="headerlink" href="#options_5" title="Permanent link">&para;</a></h4>
<ul>
<li><code>sort</code>: if multiple docs are found by the conditions, sets the sort order to choose which doc to update</li>
<li><code>select</code>: sets the document fields to return</li>
<li><code>rawResult</code>: if true, returns the <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findAndModify">raw result from the MongoDB driver</a></li>
<li><code>strict</code>: overwrites the schema's <a href="http://mongoosejs.com/docs/guide.html#strict">strict mode option</a> for this update</li>
</ul>
<h4 id="examples_4">Examples:<a class="headerlink" href="#examples_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>A.findByIdAndRemove(id, options, callback)
A.findByIdAndRemove(id, options)
A.findByIdAndRemove(id, callback)
A.findByIdAndRemove(id)
A.findByIdAndRemove()
</pre></div>


<hr />
<h3 id="modelcreate"><a href="http://mongoosejs.com#create_create">Model.create()</a><a class="headerlink" href="#modelcreate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_75">Parameters<a class="headerlink" href="#parameters_75" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» callback</li>
</ul>
<h5 id="returns_52">Returns:<a class="headerlink" href="#returns_52" title="Permanent link">&para;</a></h5>
<p>Shortcut for saving one or more documents to the database. <code>MyModel.create(docs)</code> does <code>new MyModel(doc).save()</code> for every doc in docs.</p>
<p>This function triggers the following middleware.</p>
<h4 id="example_53">Example:<a class="headerlink" href="#example_53" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Candy</span><span class="p">.</span><span class="nc">create</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;jelly bean&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;snickers&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">jellybean</span><span class="o">,</span> <span class="nt">snickers</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">if</span> <span class="err">(err)</span>
<span class="p">}</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">array</span> <span class="o">=</span> <span class="cp">[</span><span class="p">{</span> <span class="k">type</span><span class="p">:</span> <span class="s1">&#39;jelly bean&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="k">type</span><span class="p">:</span> <span class="s1">&#39;snickers&#39;</span> <span class="p">}</span><span class="cp">]</span><span class="o">;</span>
<span class="nt">Candy</span><span class="p">.</span><span class="nc">create</span><span class="o">(</span><span class="nt">array</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">candies</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">if</span> <span class="err">(err)</span>

  <span class="err">var</span> <span class="err">jellybean</span> <span class="err">=</span> <span class="err">candies</span><span class="cp">[</span><span class="mi">0</span><span class="cp">]</span><span class="p">;</span>
  <span class="err">var</span> <span class="err">snickers</span> <span class="err">=</span> <span class="err">candies</span><span class="cp">[</span><span class="mi">1</span><span class="cp">]</span><span class="p">;</span>

<span class="p">}</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">promise</span> <span class="o">=</span> <span class="nt">Candy</span><span class="p">.</span><span class="nc">create</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;jawbreaker&#39;</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">promise</span><span class="p">.</span><span class="nc">then</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">jawbreaker</span><span class="o">)</span> <span class="p">{</span>

<span class="p">}</span><span class="o">)</span>
</pre></div>


<hr />
<h3 id="modelwatch"><a href="http://mongoosejs.com#watch_watch">Model.watch()</a><a class="headerlink" href="#modelwatch" title="Permanent link">&para;</a></h3>
<h5 id="parameters_76">Parameters<a class="headerlink" href="#parameters_76" title="Permanent link">&para;</a></h5>
<h5 id="returns_53">Returns:<a class="headerlink" href="#returns_53" title="Permanent link">&para;</a></h5>
<ul>
<li>«ChangeStream» mongoose-specific change stream wrapper</li>
</ul>
<p><em>Requires a replica set running MongoDB &gt;= 3.6.0.</em> Watches the underlying collection for changes using <a href="https://docs.mongodb.com/manual/changeStreams/">MongoDB change streams</a>.</p>
<p>This function does <strong>not</strong> trigger any middleware. In particular, it does <strong>not</strong> trigger aggregate middleware.</p>
<h4 id="example_54">Example:<a class="headerlink" href="#example_54" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">const</span> <span class="nt">doc</span> <span class="o">=</span> <span class="nt">await</span> <span class="nt">Person</span><span class="p">.</span><span class="nc">create</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Ned Stark&#39;</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">Person</span><span class="p">.</span><span class="nc">watch</span><span class="o">()</span><span class="p">.</span><span class="nc">on</span><span class="o">(</span><span class="s1">&#39;change&#39;</span><span class="o">,</span> <span class="nt">change</span> <span class="o">=&gt;</span> <span class="nt">console</span><span class="p">.</span><span class="nc">log</span><span class="o">(</span><span class="nt">change</span><span class="o">));</span>





<span class="nt">await</span> <span class="nt">doc</span><span class="p">.</span><span class="nc">remove</span><span class="o">();</span>
</pre></div>


<hr />
<h3 id="modelinsertmany"><a href="http://mongoosejs.com#insertmany_insertMany">Model.insertMany()</a><a class="headerlink" href="#modelinsertmany" title="Permanent link">&para;</a></h3>
<h5 id="parameters_77">Parameters<a class="headerlink" href="#parameters_77" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» callback</li>
</ul>
<h5 id="returns_54">Returns:<a class="headerlink" href="#returns_54" title="Permanent link">&para;</a></h5>
<p>Shortcut for validating an array of documents and inserting them into MongoDB if they're all valid. This function is faster than <code>.create()</code> because it only sends one operation to the server, rather than one for each document.</p>
<p>Mongoose always validates each document <strong>before</strong> sending <code>insertMany</code> to MongoDB. So if one document has a validation error, no documents will be saved, unless you set <a href="https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#error-handling">the <code>ordered</code> option to false</a>.</p>
<p>This function does <strong>not</strong> trigger save middleware.</p>
<p>This function triggers the following middleware.</p>
<h4 id="example_55">Example:<a class="headerlink" href="#example_55" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">arr</span> <span class="o">=</span> <span class="cp">[</span><span class="p">{</span> <span class="nx">name</span><span class="p">:</span> <span class="s1">&#39;Star Wars&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">name</span><span class="p">:</span> <span class="s1">&#39;The Empire Strikes Back&#39;</span> <span class="p">}</span><span class="cp">]</span><span class="o">;</span>
<span class="nt">Movies</span><span class="p">.</span><span class="nc">insertMany</span><span class="o">(</span><span class="nt">arr</span><span class="o">,</span> <span class="nt">function</span><span class="o">(</span><span class="nt">error</span><span class="o">,</span> <span class="nt">docs</span><span class="o">)</span> <span class="p">{}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="modelbulkwrite"><a href="http://mongoosejs.com#bulkwrite_bulkWrite">Model.bulkWrite()</a><a class="headerlink" href="#modelbulkwrite" title="Permanent link">&para;</a></h3>
<h5 id="parameters_78">Parameters<a class="headerlink" href="#parameters_78" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» callback <code>function(error, bulkWriteOpResult) {}</code></li>
</ul>
<h5 id="returns_55">Returns:<a class="headerlink" href="#returns_55" title="Permanent link">&para;</a></h5>
<ul>
<li>«Promise» resolves to a <code>BulkWriteOpResult</code> if the operation succeeds</li>
</ul>
<p>Sends multiple <code>insertOne</code>, <code>updateOne</code>, <code>updateMany</code>, <code>replaceOne</code>, <code>deleteOne</code>, and/or <code>deleteMany</code> operations to the MongoDB server in one command. This is faster than sending multiple independent operations (like) if you use <code>create()</code>) because with <code>bulkWrite()</code> there is only one round trip to MongoDB.</p>
<p>Mongoose will perform casting on all operations you provide.</p>
<p>This function does <strong>not</strong> trigger any middleware, not <code>save()</code> nor <code>update()</code>. If you need to trigger <code>save()</code> middleware for every document use <a href="http://mongoosejs.com/docs/api.html#model_Model.create"><code>create()</code></a> instead.</p>
<h4 id="example_56">Example:<a class="headerlink" href="#example_56" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Character.bulkWrite([
  {
    insertOne: {
      document: {
        name: &#39;Eddard Stark&#39;,
        title: &#39;Warden of the North&#39;
      }
    }
  },
  {
    updateOne: {
      filter: { name: &#39;Eddard Stark&#39; },



      update: { title: &#39;Hand of the King&#39; }
    }
  },
  {
    deleteOne: {
      {
        filter: { name: &#39;Eddard Stark&#39; }
      }
    }
  }
]).then(handleResult);
</pre></div>


<hr />
<h3 id="modelhydrate"><a href="http://mongoosejs.com#hydrate_hydrate">Model.hydrate()</a><a class="headerlink" href="#modelhydrate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_79">Parameters<a class="headerlink" href="#parameters_79" title="Permanent link">&para;</a></h5>
<h5 id="returns_56">Returns:<a class="headerlink" href="#returns_56" title="Permanent link">&para;</a></h5>
<ul>
<li>«Model» document instance</li>
</ul>
<p>Shortcut for creating a new Document from existing raw data, pre-saved in the DB. The document returned has no paths marked as modified initially.</p>
<h4 id="example_57">Example:<a class="headerlink" href="#example_57" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">mongooseCandy</span> <span class="o">=</span> <span class="nt">Candy</span><span class="p">.</span><span class="nc">hydrate</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="s1">&#39;54108337212ffb6d459f854c&#39;</span><span class="p">,</span> <span class="n">type</span><span class="o">:</span> <span class="s1">&#39;jelly bean&#39;</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="modelupdate"><a href="http://mongoosejs.com#update_update">Model.update()</a><a class="headerlink" href="#modelupdate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_80">Parameters<a class="headerlink" href="#parameters_80" title="Permanent link">&para;</a></h5>
<h5 id="returns_57">Returns:<a class="headerlink" href="#returns_57" title="Permanent link">&para;</a></h5>
<p>Updates one document in the database without returning it.</p>
<p>This function triggers the following middleware.</p>
<h4 id="examples_5">Examples:<a class="headerlink" href="#examples_5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">MyModel</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="n">age</span><span class="p">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">gt</span><span class="o">:</span> <span class="mi">18</span> <span class="p">}</span> <span class="err">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">oldEnough</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">,</span> <span class="nt">fn</span><span class="o">);</span>
<span class="nt">MyModel</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Tobi&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">ferret</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">multi</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">raw</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">if</span> <span class="err">(err)</span> <span class="err">return</span> <span class="err">handleError(err)</span><span class="p">;</span>
  <span class="err">console.log(&#39;The</span> <span class="err">raw</span> <span class="err">response</span> <span class="err">from</span> <span class="err">Mongo</span> <span class="err">was</span> <span class="err">&#39;,</span> <span class="err">raw)</span><span class="p">;</span>
<span class="p">}</span><span class="o">);</span>
</pre></div>


<h4 id="valid-options_1">Valid options:<a class="headerlink" href="#valid-options_1" title="Permanent link">&para;</a></h4>
<ul>
<li><code>safe</code> (boolean) safe mode (defaults to value set in schema (true))</li>
<li><code>upsert</code> (boolean) whether to create the doc if it doesn't match (false)</li>
<li><code>multi</code> (boolean) whether multiple documents should be updated (false)</li>
<li><code>runValidators</code>: if true, runs <a href="http://mongoosejs.com/docs/validation.html#update-validators">update validators</a> on this command. Update validators validate the update operation against the model's schema.</li>
<li><code>setDefaultsOnInsert</code>: if this and <code>upsert</code> are true, mongoose will apply the <a href="http://mongoosejs.com/docs/defaults.html">defaults</a> specified in the model's schema if a new document is created. This option only works on MongoDB &gt;= 2.4 because it relies on <a href="https://docs.mongodb.org/v2.4/reference/operator/update/setOnInsert/">MongoDB's <code>$setOnInsert</code> operator</a>.</li>
<li><code>strict</code> (boolean) overrides the <code>strict</code> option for this update</li>
<li><code>overwrite</code> (boolean) disables update-only mode, allowing you to overwrite the doc (false)</li>
</ul>
<p>All <code>update</code> values are cast to their appropriate SchemaTypes before being sent.</p>
<p>The <code>callback</code> function receives <code>(err, rawResponse)</code>.</p>
<ul>
<li><code>err</code> is the error if any occurred</li>
<li><code>rawResponse</code> is the full response from Mongo</li>
</ul>
<h4 id="note_13">Note:<a class="headerlink" href="#note_13" title="Permanent link">&para;</a></h4>
<p>All top level keys which are not <code>atomic</code> operation names are treated as set operations:</p>
<h4 id="example_58">Example:<a class="headerlink" href="#example_58" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;borne&#39;</span> <span class="p">}</span><span class="o">;</span>
<span class="nt">Model</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="nt">query</span><span class="o">,</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;jason bourne&#39;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">options</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>


<span class="nt">Model</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="nt">query</span><span class="o">,</span> <span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">name</span><span class="o">:</span> <span class="s1">&#39;jason bourne&#39;</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">options</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>
</pre></div>


<p>This helps prevent accidentally overwriting all documents in your collection with <code>{ name: 'jason bourne' }</code>.</p>
<h4 id="note_14">Note:<a class="headerlink" href="#note_14" title="Permanent link">&para;</a></h4>
<p>Be careful to not use an existing model instance for the update clause (this won't work and can cause weird behavior like infinite loops). Also, ensure that the update clause does not have an _id property, which causes Mongo to return a "Mod on _id not allowed" error.</p>
<h4 id="note_15">Note:<a class="headerlink" href="#note_15" title="Permanent link">&para;</a></h4>
<p>To update documents without waiting for a response from MongoDB, do not pass a <code>callback</code>, then call <code>exec</code> on the returned <a href="http://mongoosejs.com#query-js">Query</a>:</p>
<div class="codehilite"><pre><span></span><span class="nt">Comment</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="n">id</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="kc">text</span><span class="o">:</span> <span class="s1">&#39;changed&#39;</span> <span class="p">}</span><span class="err">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">();</span>
</pre></div>


<h4 id="note_16">Note:<a class="headerlink" href="#note_16" title="Permanent link">&para;</a></h4>
<p>Although values are casted to their appropriate types when using update, the following are <em>not</em> applied:</p>
<ul>
<li>defaults</li>
<li>setters</li>
<li>validators</li>
<li>middleware</li>
</ul>
<p>If you need those features, use the traditional approach of first retrieving the document.</p>
<div class="codehilite"><pre><span></span>Model.findOne({ name: &#39;borne&#39; }, function (err, doc) {
  if (err) ..
  doc.name = &#39;jason bourne&#39;;
  doc.save(callback);
})
</pre></div>


<hr />
<h3 id="modelupdatemany"><a href="http://mongoosejs.com#updatemany_updateMany">Model.updateMany()</a><a class="headerlink" href="#modelupdatemany" title="Permanent link">&para;</a></h3>
<h5 id="parameters_81">Parameters<a class="headerlink" href="#parameters_81" title="Permanent link">&para;</a></h5>
<h5 id="returns_58">Returns:<a class="headerlink" href="#returns_58" title="Permanent link">&para;</a></h5>
<p>Same as <code>update()</code>, except MongoDB will update <em>all</em> documents that match <code>criteria</code> (as opposed to just the first one) regardless of the value of the <code>multi</code> option.</p>
<p><strong>Note</strong> updateMany will <em>not</em> fire update middleware. Use <code>pre('updateMany')</code> and <code>post('updateMany')</code> instead.</p>
<p>This function triggers the following middleware.</p>
<hr />
<h3 id="modelupdateone"><a href="http://mongoosejs.com#updateone_updateOne">Model.updateOne()</a><a class="headerlink" href="#modelupdateone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_82">Parameters<a class="headerlink" href="#parameters_82" title="Permanent link">&para;</a></h5>
<h5 id="returns_59">Returns:<a class="headerlink" href="#returns_59" title="Permanent link">&para;</a></h5>
<p>Same as <code>update()</code>, except MongoDB will update <em>only</em> the first document that matches <code>criteria</code> regardless of the value of the <code>multi</code> option.</p>
<p>This function triggers the following middleware.</p>
<hr />
<h3 id="modelreplaceone"><a href="http://mongoosejs.com#replaceone_replaceOne">Model.replaceOne()</a><a class="headerlink" href="#modelreplaceone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_83">Parameters<a class="headerlink" href="#parameters_83" title="Permanent link">&para;</a></h5>
<h5 id="returns_60">Returns:<a class="headerlink" href="#returns_60" title="Permanent link">&para;</a></h5>
<p>Same as <code>update()</code>, except MongoDB replace the existing document with the given document (no atomic operators like <code>$set</code>).</p>
<p>This function triggers the following middleware.</p>
<hr />
<h3 id="modelmapreduce"><a href="http://mongoosejs.com#mapreduce_mapReduce">Model.mapReduce()</a><a class="headerlink" href="#modelmapreduce" title="Permanent link">&para;</a></h3>
<h5 id="parameters_84">Parameters<a class="headerlink" href="#parameters_84" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional callback</li>
</ul>
<h5 id="returns_61">Returns:<a class="headerlink" href="#returns_61" title="Permanent link">&para;</a></h5>
<p>Executes a mapReduce command.</p>
<p><code>o</code> is an object specifying all mapReduce options as well as the map and reduce functions. All options are delegated to the driver implementation. See <a href="http://mongodb.github.io/node-mongodb-native/api-generated/collection.html#mapreduce">node-mongodb-native mapReduce() documentation</a> for more detail about options.</p>
<p>This function does not trigger any middleware.</p>
<h4 id="example_59">Example:<a class="headerlink" href="#example_59" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var o = {};
o.map = function () { emit(this.name, 1) }
o.reduce = function (k, vals) { return vals.length }
User.mapReduce(o, function (err, results) {
  console.log(results)
})
</pre></div>


<h4 id="other-options">Other options:<a class="headerlink" href="#other-options" title="Permanent link">&para;</a></h4>
<ul>
<li><code>query</code> {Object} query filter object.</li>
<li><code>sort</code> {Object} sort input objects using this key</li>
<li><code>limit</code> {Number} max number of documents</li>
<li><code>keeptemp</code> {Boolean, default:false} keep temporary data</li>
<li><code>finalize</code> {Function} finalize function</li>
<li><code>scope</code> {Object} scope variables exposed to map/reduce/finalize during execution</li>
<li><code>jsMode</code> {Boolean, default:false} it is possible to make the execution stay in JS. Provided in MongoDB &gt; 2.0.X</li>
<li><code>verbose</code> {Boolean, default:false} provide statistics on job execution time.</li>
<li><code>readPreference</code> {String}</li>
<li><code>out*</code> {Object, default: {inline:1}} sets the output target for the map reduce job.</li>
</ul>
<h4 id="out-options">* out options:<a class="headerlink" href="#out-options" title="Permanent link">&para;</a></h4>
<ul>
<li><code>{inline:1}</code> the results are returned in an array</li>
<li><code>{replace: 'collectionName'}</code> add the results to collectionName: the results replace the collection</li>
<li><code>{reduce: 'collectionName'}</code> add the results to collectionName: if dups are detected, uses the reducer / finalize functions</li>
<li><code>{merge: 'collectionName'}</code> add the results to collectionName: if dups exist the new docs overwrite the old</li>
</ul>
<p>If <code>options.out</code> is set to <code>replace</code>, <code>merge</code>, or <code>reduce</code>, a Model instance is returned that can be used for further querying. Queries run against this model are all executed with the <code>lean</code> option; meaning only the js object is returned and no Mongoose magic is applied (getters, setters, etc).</p>
<h4 id="example_60">Example:<a class="headerlink" href="#example_60" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var o = {};
o.map = function () { emit(this.name, 1) }
o.reduce = function (k, vals) { return vals.length }
o.out = { replace: &#39;createdCollectionNameForResults&#39; }
o.verbose = true;

User.mapReduce(o, function (err, model, stats) {
  console.log(&#39;map reduce took %d ms&#39;, stats.processtime)
  model.find().where(&#39;value&#39;).gt(10).exec(function (err, docs) {
    console.log(docs);
  });
})



o.resolveToObject = true;
var promise = User.mapReduce(o);
promise.then(function (res) {
  var model = res.model;
  var stats = res.stats;
  console.log(&#39;map reduce took %d ms&#39;, stats.processtime)
  return model.find().where(&#39;value&#39;).gt(10).exec();
}).then(function (docs) {
   console.log(docs);
}).then(null, handleError).end()
</pre></div>


<hr />
<h3 id="modelaggregate"><a href="http://mongoosejs.com#aggregate_aggregate">Model.aggregate()</a><a class="headerlink" href="#modelaggregate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_85">Parameters<a class="headerlink" href="#parameters_85" title="Permanent link">&para;</a></h5>
<h5 id="returns_62">Returns:<a class="headerlink" href="#returns_62" title="Permanent link">&para;</a></h5>
<p>Performs <a href="http://docs.mongodb.org/manual/applications/aggregation/">aggregations</a> on the models collection.</p>
<p>If a <code>callback</code> is passed, the <code>aggregate</code> is executed and a <code>Promise</code> is returned. If a callback is not passed, the <code>aggregate</code> itself is returned.</p>
<p>This function does not trigger any middleware.</p>
<h4 id="example_61">Example:<a class="headerlink" href="#example_61" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Users.aggregate(
  { $group: { _id: null, maxBalance: { $max: &#39;$balance&#39; }}},
  { $project: { _id: 0, maxBalance: 1 }},
  function (err, res) {
    if (err) return handleError(err);
    console.log(res);
  });


Users.aggregate()
  .group({ _id: null, maxBalance: { $max: &#39;$balance&#39; } })
  .select(&#39;-id maxBalance&#39;)
  .exec(function (err, res) {
    if (err) return handleError(err);
    console.log(res);
});
</pre></div>


<h4 id="note_17">NOTE:<a class="headerlink" href="#note_17" title="Permanent link">&para;</a></h4>
<ul>
<li>Arguments are not cast to the model's schema because <code>$project</code> operators allow redefining the "shape" of the documents at any stage of the pipeline, which may leave documents in an incompatible format.</li>
<li>The documents returned are plain javascript objects, not mongoose documents (since any shape of document can be returned).</li>
<li>Requires MongoDB &gt;= 2.1</li>
</ul>
<hr />
<h3 id="modelgeosearch"><a href="http://mongoosejs.com#geosearch_geoSearch">Model.geoSearch()</a><a class="headerlink" href="#modelgeosearch" title="Permanent link">&para;</a></h3>
<h5 id="parameters_86">Parameters<a class="headerlink" href="#parameters_86" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional callback</li>
</ul>
<h5 id="returns_63">Returns:<a class="headerlink" href="#returns_63" title="Permanent link">&para;</a></h5>
<p>Implements <code>$geoSearch</code> functionality for Mongoose</p>
<p>This function does not trigger any middleware</p>
<h4 id="example_62">Example:<a class="headerlink" href="#example_62" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">options</span> <span class="o">=</span> <span class="p">{</span> <span class="n">near</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">,</span> <span class="n">maxDistance</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span><span class="o">;</span>
<span class="nt">Locations</span><span class="p">.</span><span class="nc">geoSearch</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span> <span class="p">:</span> <span class="s2">&quot;house&quot;</span> <span class="p">}</span><span class="o">,</span> <span class="nt">options</span><span class="o">,</span> <span class="nt">function</span><span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">res</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">console.log(res)</span><span class="p">;</span>
<span class="p">}</span><span class="o">);</span>
</pre></div>


<h4 id="options_6">Options:<a class="headerlink" href="#options_6" title="Permanent link">&para;</a></h4>
<ul>
<li><code>near</code> {Array} x,y point to search for</li>
<li><code>maxDistance</code> {Number} the maximum distance from the point near that a result can be</li>
<li><code>limit</code> {Number} The maximum number of results to return</li>
<li><code>lean</code> {Boolean} return the raw object instead of the Mongoose Model</li>
</ul>
<hr />
<h3 id="modelpopulate"><a href="http://mongoosejs.com#populate_populate">Model.populate()</a><a class="headerlink" href="#modelpopulate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_87">Parameters<a class="headerlink" href="#parameters_87" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback(err,doc)] «Function» Optional callback, executed upon completion. Receives <code>err</code> and the <code>doc(s)</code>.</li>
</ul>
<h5 id="returns_64">Returns:<a class="headerlink" href="#returns_64" title="Permanent link">&para;</a></h5>
<p>Populates document references.</p>
<h4 id="available-options">Available options:<a class="headerlink" href="#available-options" title="Permanent link">&para;</a></h4>
<ul>
<li>path: space delimited path(s) to populate</li>
<li>select: optional fields to select</li>
<li>match: optional query conditions to match</li>
<li>model: optional name of the model to use for population</li>
<li>options: optional query options like sort, limit, etc</li>
</ul>
<h4 id="examples_6">Examples:<a class="headerlink" href="#examples_6" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>User.findById(id, function (err, user) {
  var opts = [
      { path: &#39;company&#39;, match: { x: 1 }, select: &#39;name&#39; }
    , { path: &#39;notes&#39;, options: { limit: 10 }, model: &#39;override&#39; }
  ]

  User.populate(user, opts, function (err, user) {
    console.log(user);
  });
});


User.find(match, function (err, users) {
  var opts = [{ path: &#39;company&#39;, match: { x: 1 }, select: &#39;name&#39; }]

  var promise = User.populate(users, opts);
  promise.then(console.log).end();
})










var user = { name: &#39;Indiana Jones&#39;, weapon: 389 }
Weapon.populate(user, { path: &#39;weapon&#39;, model: &#39;Weapon&#39; }, function (err, user) {
  console.log(user.weapon.name)
})


var users = [{ name: &#39;Indiana Jones&#39;, weapon: 389 }]
users.push({ name: &#39;Batman&#39;, weapon: 8921 })
Weapon.populate(users, { path: &#39;weapon&#39; }, function (err, users) {
  users.forEach(function (user) {
    console.log(&#39;%s uses a %s&#39;, users.name, user.weapon.name)


  });
});
</pre></div>


<hr />
<hr />
<h3 id="query"><a href="http://mongoosejs.com#query_Query">Query()</a><a class="headerlink" href="#query" title="Permanent link">&para;</a></h3>
<h5 id="parameters_88">Parameters<a class="headerlink" href="#parameters_88" title="Permanent link">&para;</a></h5>
<ul>
<li>[collection] «Object» Mongoose collection</li>
</ul>
<p>Query constructor used for building queries. You do not need to instantiate a <code>Query</code> directly. Instead use Model functions like <a href="http://mongoosejs.com/docs/api.html#find_find"><code>Model.find()</code></a>.</p>
<h4 id="example_63">Example:<a class="headerlink" href="#example_63" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>const query = MyModel.find();
query.setOptions({ lean : true });
query.collection(model.collection);
query.where(&#39;age&#39;).gte(21).exec(callback);



const query = new mongoose.Query();
</pre></div>


<hr />
<h3 id="queryprototypeusegeowithin"><a href="http://mongoosejs.com#query_Query-use$geoWithin">Query.prototype.use$geoWithin</a><a class="headerlink" href="#queryprototypeusegeowithin" title="Permanent link">&para;</a></h3>
<p>Flag to opt out of using <code>$geoWithin</code>.</p>
<div class="codehilite"><pre><span></span>mongoose.Query.use$geoWithin = false;
</pre></div>


<p>MongoDB 2.4 deprecated the use of <code>$within</code>, replacing it with <code>$geoWithin</code>. Mongoose uses <code>$geoWithin</code> by default (which is 100% backward compatible with $within). If you are running an older version of MongoDB, set this flag to <code>false</code> so your <code>within()</code> queries continue to work.</p>
<hr />
<h3 id="queryprototypetoconstructor"><a href="http://mongoosejs.com#query_Query-toConstructor">Query.prototype.toConstructor()</a><a class="headerlink" href="#queryprototypetoconstructor" title="Permanent link">&para;</a></h3>
<h5 id="returns_65">Returns:<a class="headerlink" href="#returns_65" title="Permanent link">&para;</a></h5>
<ul>
<li>«Query» subclass-of-Query</li>
</ul>
<p>Converts this query to a customized, reusable query constructor with all arguments and options retained.</p>
<h4 id="example_64">Example<a class="headerlink" href="#example_64" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="nt">Movie</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">tags</span><span class="p">:</span> <span class="s1">&#39;adventure&#39;</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">read</span><span class="o">(</span><span class="s1">&#39;primaryPreferred&#39;</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">Adventure</span> <span class="o">=</span> <span class="nt">query</span><span class="p">.</span><span class="nc">toConstructor</span><span class="o">();</span>



<span class="nt">Adventure</span><span class="o">()</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">)</span>


<span class="nt">Adventure</span><span class="o">()</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/^</span><span class="n">Life</span><span class="o">/</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span>



<span class="nt">Adventure</span><span class="p">.</span><span class="nc">prototype</span><span class="p">.</span><span class="nc">startsWith</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">prefix</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">this.where({</span> <span class="n">name</span><span class="p">:</span> <span class="n">new</span> <span class="nf">RegExp</span><span class="p">(</span><span class="s1">&#39;^&#39;</span> <span class="o">+</span> <span class="n">prefix</span><span class="p">)</span> <span class="p">}</span><span class="o">)</span>
  <span class="nt">return</span> <span class="nt">this</span><span class="o">;</span>
<span class="err">}</span>
<span class="nt">Object</span><span class="p">.</span><span class="nc">defineProperty</span><span class="o">(</span><span class="nt">Adventure</span><span class="p">.</span><span class="nc">prototype</span><span class="o">,</span> <span class="s1">&#39;highlyRated&#39;</span><span class="o">,</span> <span class="p">{</span>
  <span class="n">get</span><span class="p">:</span> <span class="n">function</span> <span class="p">()</span> <span class="err">{</span>
    <span class="n">this</span><span class="o">.</span><span class="nf">where</span><span class="p">(</span><span class="err">{</span> <span class="n">rating</span><span class="err">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">gt</span><span class="err">:</span> <span class="mf">4.5</span> <span class="err">}}</span><span class="p">);</span>
    <span class="err">return</span> <span class="err">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="err">}</span><span class="o">)</span>
<span class="nt">Adventure</span><span class="o">()</span><span class="p">.</span><span class="nc">highlyRated</span><span class="p">.</span><span class="nc">startsWith</span><span class="o">(</span><span class="s1">&#39;Life&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">)</span>
</pre></div>


<p>New in 3.7.3</p>
<hr />
<h3 id="queryprototypewhere"><a href="http://mongoosejs.com#query_Query-$where">Query.prototype.$where()</a><a class="headerlink" href="#queryprototypewhere" title="Permanent link">&para;</a></h3>
<h5 id="parameters_89">Parameters<a class="headerlink" href="#parameters_89" title="Permanent link">&para;</a></h5>
<ul>
<li>js «String,Function» javascript string or function</li>
</ul>
<h5 id="returns_66">Returns:<a class="headerlink" href="#returns_66" title="Permanent link">&para;</a></h5>
<p>Specifies a javascript function or expression to pass to MongoDBs query system.</p>
<h4 id="example_65">Example<a class="headerlink" href="#example_65" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.$where(&#39;this.comments.length === 10 || this.name.length === 5&#39;)



query.$where(function () {
  return this.comments.length === 10 || this.name.length === 5;
})
</pre></div>


<h4 id="note_18">NOTE:<a class="headerlink" href="#note_18" title="Permanent link">&para;</a></h4>
<p>Only use <code>$where</code> when you have a condition that cannot be met using other MongoDB operators like <code>$lt</code>. <strong>Be sure to read about all of <a href="http://docs.mongodb.org/manual/reference/operator/where/">its caveats</a> before using.</strong></p>
<hr />
<h3 id="queryprototypewhere_1"><a href="http://mongoosejs.com#query_Query-where">Query.prototype.where()</a><a class="headerlink" href="#queryprototypewhere_1" title="Permanent link">&para;</a></h3>
<h5 id="parameters_90">Parameters<a class="headerlink" href="#parameters_90" title="Permanent link">&para;</a></h5>
<h5 id="returns_67">Returns:<a class="headerlink" href="#returns_67" title="Permanent link">&para;</a></h5>
<p>Specifies a <code>path</code> for use with chaining.</p>
<h4 id="example_66">Example<a class="headerlink" href="#example_66" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">User</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span><span class="n">age</span><span class="p">:</span> <span class="err">{$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">21</span><span class="p">,</span> <span class="err">$</span><span class="n">lte</span><span class="o">:</span> <span class="mi">65</span><span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">);</span>


<span class="nt">User</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">gte</span><span class="o">(</span><span class="nt">21</span><span class="o">)</span><span class="p">.</span><span class="nc">lte</span><span class="o">(</span><span class="nt">65</span><span class="o">);</span>


<span class="nt">User</span><span class="p">.</span><span class="nc">find</span><span class="o">()</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;vonderful&#39;</span> <span class="p">}</span><span class="o">)</span>


<span class="nt">User</span>
<span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">gte</span><span class="o">(</span><span class="nt">21</span><span class="o">)</span><span class="p">.</span><span class="nc">lte</span><span class="o">(</span><span class="nt">65</span><span class="o">)</span>
<span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="o">/^</span><span class="nt">vonderful</span><span class="o">/</span><span class="nt">i</span><span class="o">)</span>
<span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;friends&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">slice</span><span class="o">(</span><span class="nt">10</span><span class="o">)</span>
<span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">)</span>
</pre></div>


<hr />
<h3 id="queryprototypeequals"><a href="http://mongoosejs.com#query_Query-equals">Query.prototype.equals()</a><a class="headerlink" href="#queryprototypeequals" title="Permanent link">&para;</a></h3>
<h5 id="parameters_91">Parameters<a class="headerlink" href="#parameters_91" title="Permanent link">&para;</a></h5>
<h5 id="returns_68">Returns:<a class="headerlink" href="#returns_68" title="Permanent link">&para;</a></h5>
<p>Specifies the complementary comparison value for paths specified with <code>where()</code></p>
<h4 id="example_67">Example<a class="headerlink" href="#example_67" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>User.where(&#39;age&#39;).equals(49);



User.where(&#39;age&#39;, 49);
</pre></div>


<hr />
<h3 id="queryprototypeor"><a href="http://mongoosejs.com#query_Query-or">Query.prototype.or()</a><a class="headerlink" href="#queryprototypeor" title="Permanent link">&para;</a></h3>
<h5 id="parameters_92">Parameters<a class="headerlink" href="#parameters_92" title="Permanent link">&para;</a></h5>
<ul>
<li>array «Array» array of conditions</li>
</ul>
<h5 id="returns_69">Returns:<a class="headerlink" href="#returns_69" title="Permanent link">&para;</a></h5>
<p>Specifies arguments for an <code>$or</code> condition.</p>
<h4 id="example_68">Example<a class="headerlink" href="#example_68" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.or([{ color: &#39;red&#39; }, { status: &#39;emergency&#39; }])
</pre></div>


<hr />
<h3 id="queryprototypenor"><a href="http://mongoosejs.com#query_Query-nor">Query.prototype.nor()</a><a class="headerlink" href="#queryprototypenor" title="Permanent link">&para;</a></h3>
<h5 id="parameters_93">Parameters<a class="headerlink" href="#parameters_93" title="Permanent link">&para;</a></h5>
<ul>
<li>array «Array» array of conditions</li>
</ul>
<h5 id="returns_70">Returns:<a class="headerlink" href="#returns_70" title="Permanent link">&para;</a></h5>
<p>Specifies arguments for a <code>$nor</code> condition.</p>
<h4 id="example_69">Example<a class="headerlink" href="#example_69" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.nor([{ color: &#39;green&#39; }, { status: &#39;ok&#39; }])
</pre></div>


<hr />
<h3 id="queryprototypeand"><a href="http://mongoosejs.com#query_Query-and">Query.prototype.and()</a><a class="headerlink" href="#queryprototypeand" title="Permanent link">&para;</a></h3>
<h5 id="parameters_94">Parameters<a class="headerlink" href="#parameters_94" title="Permanent link">&para;</a></h5>
<ul>
<li>array «Array» array of conditions</li>
</ul>
<h5 id="returns_71">Returns:<a class="headerlink" href="#returns_71" title="Permanent link">&para;</a></h5>
<p>Specifies arguments for a <code>$and</code> condition.</p>
<h4 id="example_70">Example<a class="headerlink" href="#example_70" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.and([{ color: &#39;green&#39; }, { status: &#39;ok&#39; }])
</pre></div>


<hr />
<h3 id="queryprototypegt"><a href="http://mongoosejs.com#query_Query-gt">Query.prototype.gt()</a><a class="headerlink" href="#queryprototypegt" title="Permanent link">&para;</a></h3>
<h5 id="parameters_95">Parameters<a class="headerlink" href="#parameters_95" title="Permanent link">&para;</a></h5>
<p>Specifies a $gt query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<h4 id="example_71">Example<a class="headerlink" href="#example_71" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Thing.find().where(&#39;age&#39;).gt(21)


Thing.find().gt(&#39;age&#39;, 21)
</pre></div>


<hr />
<h3 id="queryprototypegte"><a href="http://mongoosejs.com#query_Query-gte">Query.prototype.gte()</a><a class="headerlink" href="#queryprototypegte" title="Permanent link">&para;</a></h3>
<h5 id="parameters_96">Parameters<a class="headerlink" href="#parameters_96" title="Permanent link">&para;</a></h5>
<p>Specifies a $gte query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypelt"><a href="http://mongoosejs.com#query_Query-lt">Query.prototype.lt()</a><a class="headerlink" href="#queryprototypelt" title="Permanent link">&para;</a></h3>
<h5 id="parameters_97">Parameters<a class="headerlink" href="#parameters_97" title="Permanent link">&para;</a></h5>
<p>Specifies a $lt query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypelte"><a href="http://mongoosejs.com#query_Query-lte">Query.prototype.lte()</a><a class="headerlink" href="#queryprototypelte" title="Permanent link">&para;</a></h3>
<h5 id="parameters_98">Parameters<a class="headerlink" href="#parameters_98" title="Permanent link">&para;</a></h5>
<p>Specifies a $lte query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypene"><a href="http://mongoosejs.com#query_Query-ne">Query.prototype.ne()</a><a class="headerlink" href="#queryprototypene" title="Permanent link">&para;</a></h3>
<h5 id="parameters_99">Parameters<a class="headerlink" href="#parameters_99" title="Permanent link">&para;</a></h5>
<p>Specifies a $ne query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypein"><a href="http://mongoosejs.com#query_Query-in">Query.prototype.in()</a><a class="headerlink" href="#queryprototypein" title="Permanent link">&para;</a></h3>
<h5 id="parameters_100">Parameters<a class="headerlink" href="#parameters_100" title="Permanent link">&para;</a></h5>
<p>Specifies an $in query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypenin"><a href="http://mongoosejs.com#query_Query-nin">Query.prototype.nin()</a><a class="headerlink" href="#queryprototypenin" title="Permanent link">&para;</a></h3>
<h5 id="parameters_101">Parameters<a class="headerlink" href="#parameters_101" title="Permanent link">&para;</a></h5>
<p>Specifies an $nin query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypeall"><a href="http://mongoosejs.com#query_Query-all">Query.prototype.all()</a><a class="headerlink" href="#queryprototypeall" title="Permanent link">&para;</a></h3>
<h5 id="parameters_102">Parameters<a class="headerlink" href="#parameters_102" title="Permanent link">&para;</a></h5>
<p>Specifies an $all query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypesize"><a href="http://mongoosejs.com#query_Query-size">Query.prototype.size()</a><a class="headerlink" href="#queryprototypesize" title="Permanent link">&para;</a></h3>
<h5 id="parameters_103">Parameters<a class="headerlink" href="#parameters_103" title="Permanent link">&para;</a></h5>
<p>Specifies a $size query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<h4 id="example_72">Example<a class="headerlink" href="#example_72" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>MyModel.where(&#39;tags&#39;).size(0).exec(function (err, docs) {
  if (err) return handleError(err);

  assert(Array.isArray(docs));
  console.log(&#39;documents with 0 tags&#39;, docs);
})
</pre></div>


<hr />
<h3 id="queryprototyperegex"><a href="http://mongoosejs.com#query_Query-regex">Query.prototype.regex()</a><a class="headerlink" href="#queryprototyperegex" title="Permanent link">&para;</a></h3>
<h5 id="parameters_104">Parameters<a class="headerlink" href="#parameters_104" title="Permanent link">&para;</a></h5>
<p>Specifies a $regex query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypemaxdistance"><a href="http://mongoosejs.com#query_Query-maxDistance">Query.prototype.maxDistance()</a><a class="headerlink" href="#queryprototypemaxdistance" title="Permanent link">&para;</a></h3>
<h5 id="parameters_105">Parameters<a class="headerlink" href="#parameters_105" title="Permanent link">&para;</a></h5>
<p>Specifies a $maxDistance query condition.</p>
<p>When called with one argument, the most recent path passed to <code>where()</code> is used.</p>
<hr />
<h3 id="queryprototypemod"><a href="http://mongoosejs.com#query_Query-mod">Query.prototype.mod()</a><a class="headerlink" href="#queryprototypemod" title="Permanent link">&para;</a></h3>
<h5 id="parameters_106">Parameters<a class="headerlink" href="#parameters_106" title="Permanent link">&para;</a></h5>
<ul>
<li>val «Array» must be of length 2, first element is <code>divisor</code>, 2nd element is <code>remainder</code>.</li>
</ul>
<h5 id="returns_72">Returns:<a class="headerlink" href="#returns_72" title="Permanent link">&para;</a></h5>
<p>Specifies a <code>$mod</code> condition, filters documents for documents whose <code>path</code> property is a number that is equal to <code>remainder</code> modulo <code>divisor</code>.</p>
<h4 id="example_73">Example<a class="headerlink" href="#example_73" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Product.find().mod(&#39;inventory&#39;, [2, 1]);
Product.find().where(&#39;inventory&#39;).mod([2, 1]);

Product.find().where(&#39;inventory&#39;).mod(2, 1);
</pre></div>


<hr />
<h3 id="queryprototypeexists"><a href="http://mongoosejs.com#query_Query-exists">Query.prototype.exists()</a><a class="headerlink" href="#queryprototypeexists" title="Permanent link">&para;</a></h3>
<h5 id="parameters_107">Parameters<a class="headerlink" href="#parameters_107" title="Permanent link">&para;</a></h5>
<h5 id="returns_73">Returns:<a class="headerlink" href="#returns_73" title="Permanent link">&para;</a></h5>
<p>Specifies an <code>$exists</code> condition</p>
<h4 id="example_74">Example<a class="headerlink" href="#example_74" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Thing.where(&#39;name&#39;).exists()
Thing.where(&#39;name&#39;).exists(true)
Thing.find().exists(&#39;name&#39;)


Thing.where(&#39;name&#39;).exists(false);
Thing.find().exists(&#39;name&#39;, false);
</pre></div>


<hr />
<h3 id="queryprototypeelemmatch"><a href="http://mongoosejs.com#query_Query-elemMatch">Query.prototype.elemMatch()</a><a class="headerlink" href="#queryprototypeelemmatch" title="Permanent link">&para;</a></h3>
<h5 id="parameters_108">Parameters<a class="headerlink" href="#parameters_108" title="Permanent link">&para;</a></h5>
<ul>
<li>criteria «Object,Function»</li>
</ul>
<h5 id="returns_74">Returns:<a class="headerlink" href="#returns_74" title="Permanent link">&para;</a></h5>
<p>Specifies an <code>$elemMatch</code> condition</p>
<h4 id="example_75">Example<a class="headerlink" href="#example_75" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">elemMatch</span><span class="o">(</span><span class="s1">&#39;comment&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="n">author</span><span class="p">:</span> <span class="s1">&#39;autobot&#39;</span><span class="p">,</span> <span class="n">votes</span><span class="o">:</span> <span class="err">{$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">5</span><span class="p">}</span><span class="err">}</span><span class="o">)</span>

<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;comment&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">elemMatch</span><span class="o">(</span><span class="p">{</span> <span class="n">author</span><span class="p">:</span> <span class="s1">&#39;autobot&#39;</span><span class="p">,</span> <span class="n">votes</span><span class="o">:</span> <span class="err">{$</span><span class="n">gte</span><span class="o">:</span> <span class="mi">5</span><span class="p">}</span><span class="err">}</span><span class="o">)</span>

<span class="nt">query</span><span class="p">.</span><span class="nc">elemMatch</span><span class="o">(</span><span class="s1">&#39;comment&#39;</span><span class="o">,</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">elem</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">elem.where(&#39;author&#39;).equals(&#39;autobot&#39;)</span><span class="p">;</span>
  <span class="err">elem.where(&#39;votes&#39;).gte(5)</span><span class="p">;</span>
<span class="p">}</span><span class="o">)</span>

<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;comment&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">elemMatch</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">elem</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">elem.where({</span> <span class="n">author</span><span class="p">:</span> <span class="s1">&#39;autobot&#39;</span> <span class="p">}</span><span class="o">);</span>
  <span class="nt">elem</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;votes&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">gte</span><span class="o">(</span><span class="nt">5</span><span class="o">);</span>
<span class="err">}</span><span class="o">)</span>
</pre></div>


<hr />
<h3 id="queryprototypewithin"><a href="http://mongoosejs.com#query_Query-within">Query.prototype.within()</a><a class="headerlink" href="#queryprototypewithin" title="Permanent link">&para;</a></h3>
<h5 id="returns_75">Returns:<a class="headerlink" href="#returns_75" title="Permanent link">&para;</a></h5>
<p>Defines a <code>$within</code> or <code>$geoWithin</code> argument for geo-spatial queries.</p>
<h4 id="example_76">Example<a class="headerlink" href="#example_76" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="nt">path</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">()</span><span class="p">.</span><span class="nc">box</span><span class="o">()</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="nt">path</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">()</span><span class="p">.</span><span class="nc">circle</span><span class="o">()</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="nt">path</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">()</span><span class="p">.</span><span class="nc">geometry</span><span class="o">()</span>

<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">(</span><span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="cp">]</span><span class="p">,</span> <span class="n">radius</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">unique</span><span class="o">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">spherical</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">(</span><span class="p">{</span> <span class="n">box</span><span class="p">:</span> <span class="cp">[</span><span class="err">[</span><span class="mf">40.73</span><span class="p">,</span> <span class="o">-</span><span class="mf">73.9</span><span class="cp">]</span><span class="p">,</span> <span class="cp">[</span><span class="mf">40.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">73.988</span><span class="cp">]</span><span class="p">]</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">(</span><span class="p">{</span> <span class="n">polygon</span><span class="p">:</span> <span class="cp">[</span><span class="err">[</span><span class="cp">]</span><span class="p">,</span><span class="cp">[]</span><span class="p">,</span><span class="cp">[]</span><span class="p">,</span><span class="cp">[]</span><span class="p">]</span> <span class="p">}</span><span class="o">);</span>

<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">(</span><span class="cp">[]</span><span class="o">,</span> <span class="cp">[]</span><span class="o">,</span> <span class="cp">[]</span><span class="o">)</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">(</span><span class="cp">[]</span><span class="o">,</span> <span class="cp">[]</span><span class="o">)</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">(</span><span class="p">{</span> <span class="n">type</span><span class="p">:</span> <span class="s1">&#39;LineString&#39;</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">:</span> <span class="cp">[</span><span class="nx">...</span><span class="cp">]</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<p><strong>MUST</strong> be used after <code>where()</code>.</p>
<h4 id="note_19">NOTE:<a class="headerlink" href="#note_19" title="Permanent link">&para;</a></h4>
<p>As of Mongoose 3.7, <code>$geoWithin</code> is always used for queries. To change this behavior, see <a href="http://mongoosejs.com#query_Query-use%2524geoWithin">Query.use$geoWithin</a>.</p>
<h4 id="note_20">NOTE:<a class="headerlink" href="#note_20" title="Permanent link">&para;</a></h4>
<p>In Mongoose 3.7, <code>within</code> changed from a getter to a function. If you need the old syntax, use <a href="https://github.com/ebensing/mongoose-within">this</a>.</p>
<hr />
<h3 id="queryprototypeslice"><a href="http://mongoosejs.com#query_Query-slice">Query.prototype.slice()</a><a class="headerlink" href="#queryprototypeslice" title="Permanent link">&para;</a></h3>
<h5 id="parameters_109">Parameters<a class="headerlink" href="#parameters_109" title="Permanent link">&para;</a></h5>
<ul>
<li>val «Number» number/range of elements to slice</li>
</ul>
<h5 id="returns_76">Returns:<a class="headerlink" href="#returns_76" title="Permanent link">&para;</a></h5>
<p>Specifies a $slice projection for an array.</p>
<h4 id="example_77">Example<a class="headerlink" href="#example_77" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.slice(&#39;comments&#39;, 5)
query.slice(&#39;comments&#39;, -5)
query.slice(&#39;comments&#39;, [10, 5])
query.where(&#39;comments&#39;).slice(5)
query.where(&#39;comments&#39;).slice([-10, 5])
</pre></div>


<hr />
<h3 id="queryprototypelimit"><a href="http://mongoosejs.com#query_Query-limit">Query.prototype.limit()</a><a class="headerlink" href="#queryprototypelimit" title="Permanent link">&para;</a></h3>
<h5 id="parameters_110">Parameters<a class="headerlink" href="#parameters_110" title="Permanent link">&para;</a></h5>
<p>Specifies the maximum number of documents the query will return.</p>
<h4 id="example_78">Example<a class="headerlink" href="#example_78" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.limit(20)
</pre></div>


<h4 id="note_21">Note<a class="headerlink" href="#note_21" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypeskip"><a href="http://mongoosejs.com#query_Query-skip">Query.prototype.skip()</a><a class="headerlink" href="#queryprototypeskip" title="Permanent link">&para;</a></h3>
<h5 id="parameters_111">Parameters<a class="headerlink" href="#parameters_111" title="Permanent link">&para;</a></h5>
<p>Specifies the number of documents to skip.</p>
<h4 id="example_79">Example<a class="headerlink" href="#example_79" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.skip(100).limit(20)
</pre></div>


<h4 id="note_22">Note<a class="headerlink" href="#note_22" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypemaxscan"><a href="http://mongoosejs.com#query_Query-maxScan">Query.prototype.maxScan()</a><a class="headerlink" href="#queryprototypemaxscan" title="Permanent link">&para;</a></h3>
<h5 id="parameters_112">Parameters<a class="headerlink" href="#parameters_112" title="Permanent link">&para;</a></h5>
<p>Specifies the maxScan option.</p>
<h4 id="example_80">Example<a class="headerlink" href="#example_80" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.maxScan(100)
</pre></div>


<h4 id="note_23">Note<a class="headerlink" href="#note_23" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypebatchsize"><a href="http://mongoosejs.com#query_Query-batchSize">Query.prototype.batchSize()</a><a class="headerlink" href="#queryprototypebatchsize" title="Permanent link">&para;</a></h3>
<h5 id="parameters_113">Parameters<a class="headerlink" href="#parameters_113" title="Permanent link">&para;</a></h5>
<p>Specifies the batchSize option.</p>
<h4 id="example_81">Example<a class="headerlink" href="#example_81" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.batchSize(100)
</pre></div>


<h4 id="note_24">Note<a class="headerlink" href="#note_24" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h5 id="parameters_114">Parameters<a class="headerlink" href="#parameters_114" title="Permanent link">&para;</a></h5>
<p>Specifies the <code>comment</code> option.</p>
<h4 id="example_82">Example<a class="headerlink" href="#example_82" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.comment(&#39;login query&#39;)
</pre></div>


<h4 id="note_25">Note<a class="headerlink" href="#note_25" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypesnapshot"><a href="http://mongoosejs.com#query_Query-snapshot">Query.prototype.snapshot()</a><a class="headerlink" href="#queryprototypesnapshot" title="Permanent link">&para;</a></h3>
<h5 id="returns_77">Returns:<a class="headerlink" href="#returns_77" title="Permanent link">&para;</a></h5>
<p>Specifies this query as a <code>snapshot</code> query.</p>
<h4 id="example_83">Example<a class="headerlink" href="#example_83" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.snapshot()
query.snapshot(true)
query.snapshot(false)
</pre></div>


<h4 id="note_26">Note<a class="headerlink" href="#note_26" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypehint"><a href="http://mongoosejs.com#query_Query-hint">Query.prototype.hint()</a><a class="headerlink" href="#queryprototypehint" title="Permanent link">&para;</a></h3>
<h5 id="parameters_115">Parameters<a class="headerlink" href="#parameters_115" title="Permanent link">&para;</a></h5>
<ul>
<li>val «Object» a hint object</li>
</ul>
<h5 id="returns_78">Returns:<a class="headerlink" href="#returns_78" title="Permanent link">&para;</a></h5>
<p>Sets query hints.</p>
<h4 id="example_84">Example<a class="headerlink" href="#example_84" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.hint({ indexA: 1, indexB: -1})
</pre></div>


<h4 id="note_27">Note<a class="headerlink" href="#note_27" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypeselect"><a href="http://mongoosejs.com#query_Query-select">Query.prototype.select()</a><a class="headerlink" href="#queryprototypeselect" title="Permanent link">&para;</a></h3>
<h5 id="parameters_116">Parameters<a class="headerlink" href="#parameters_116" title="Permanent link">&para;</a></h5>
<h5 id="returns_79">Returns:<a class="headerlink" href="#returns_79" title="Permanent link">&para;</a></h5>
<p>Specifies which document fields to include or exclude (also known as the query "projection")</p>
<p>When using string syntax, prefixing a path with <code>-</code> will flag that path as excluded. When a path does not have the <code>-</code> prefix, it is included. Lastly, if a path is prefixed with <code>+</code>, it forces inclusion of the path, which is useful for paths excluded at the <a href="http://mongoosejs.com/docs/api.html#schematype_SchemaType-select">schema level</a>.</p>
<p>A projection <em>must</em> be either inclusive or exclusive. In other words, you must either list the fields to include (which excludes all others), or list the fields to exclude (which implies all other fields are included). The <a href="https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/#suppress-id-field"><code>_id</code> field is the only exception because MongoDB includes it by default</a>.</p>
<h4 id="example_85">Example<a class="headerlink" href="#example_85" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s1">&#39;a b&#39;</span><span class="o">);</span>


<span class="nt">query</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s1">&#39;-c -d&#39;</span><span class="o">);</span>



<span class="nt">query</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="p">{</span> <span class="n">c</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span><span class="o">);</span>


<span class="nt">query</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s1">&#39;+path&#39;</span><span class="o">)</span>
</pre></div>


<hr />
<h3 id="queryprototypeslaveok"><a href="http://mongoosejs.com#query_Query-slaveOk">Query.prototype.slaveOk()</a><a class="headerlink" href="#queryprototypeslaveok" title="Permanent link">&para;</a></h3>
<h5 id="parameters_117">Parameters<a class="headerlink" href="#parameters_117" title="Permanent link">&para;</a></h5>
<ul>
<li>v «Boolean» defaults to true</li>
</ul>
<h5 id="returns_80">Returns:<a class="headerlink" href="#returns_80" title="Permanent link">&para;</a></h5>
<p><em>DEPRECATED</em> Sets the slaveOk option.</p>
<p><strong>Deprecated</strong> in MongoDB 2.2 in favor of <a href="http://mongoosejs.com#query_Query-read">read preferences</a>.</p>
<h4 id="example_86">Example:<a class="headerlink" href="#example_86" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.slaveOk()
query.slaveOk(true)
query.slaveOk(false)
</pre></div>


<hr />
<h3 id="queryprototyperead"><a href="http://mongoosejs.com#query_Query-read">Query.prototype.read()</a><a class="headerlink" href="#queryprototyperead" title="Permanent link">&para;</a></h3>
<h5 id="parameters_118">Parameters<a class="headerlink" href="#parameters_118" title="Permanent link">&para;</a></h5>
<ul>
<li>[tags] «Array» optional tags for this query</li>
</ul>
<h5 id="returns_81">Returns:<a class="headerlink" href="#returns_81" title="Permanent link">&para;</a></h5>
<p>Determines the MongoDB nodes from which to read.</p>
<h4 id="preferences">Preferences:<a class="headerlink" href="#preferences" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>primary - (default) Read from primary only. Operations will produce an error if primary is unavailable. Cannot be combined with tags.
secondary            Read from secondary if available, otherwise error.
primaryPreferred     Read from primary if available, otherwise a secondary.
secondaryPreferred   Read from a secondary if available, otherwise read from the primary.
nearest              All operations read from among the nearest candidates, but unlike other modes, this option will include both the primary and all secondaries in the random selection.
</pre></div>


<p>Aliases</p>
<div class="codehilite"><pre><span></span>p   primary
pp  primaryPreferred
s   secondary
sp  secondaryPreferred
n   nearest
</pre></div>


<h4 id="example_87">Example:<a class="headerlink" href="#example_87" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>new Query().read(&#39;primary&#39;)
new Query().read(&#39;p&#39;)

new Query().read(&#39;primaryPreferred&#39;)
new Query().read(&#39;pp&#39;)

new Query().read(&#39;secondary&#39;)
new Query().read(&#39;s&#39;)

new Query().read(&#39;secondaryPreferred&#39;)
new Query().read(&#39;sp&#39;)

new Query().read(&#39;nearest&#39;)
new Query().read(&#39;n&#39;)


new Query().read(&#39;s&#39;, [{ dc:&#39;sf&#39;, s: 1 },{ dc:&#39;ma&#39;, s: 2 }])
</pre></div>


<p>Read more about how to use read preferrences <a href="http://docs.mongodb.org/manual/applications/replication/#read-preference">here</a> and <a href="http://mongodb.github.com/node-mongodb-native/driver-articles/anintroductionto1_1and2_2.html#read-preferences">here</a>.</p>
<hr />
<h3 id="queryprototypemerge"><a href="http://mongoosejs.com#query_Query-merge">Query.prototype.merge()</a><a class="headerlink" href="#queryprototypemerge" title="Permanent link">&para;</a></h3>
<h5 id="parameters_119">Parameters<a class="headerlink" href="#parameters_119" title="Permanent link">&para;</a></h5>
<h5 id="returns_82">Returns:<a class="headerlink" href="#returns_82" title="Permanent link">&para;</a></h5>
<p>Merges another Query or conditions object into this one.</p>
<p>When a Query is passed, conditions, field selection and options are merged.</p>
<p>New in 3.7.0</p>
<hr />
<h3 id="queryprototypesetoptions"><a href="http://mongoosejs.com#query_Query-setOptions">Query.prototype.setOptions()</a><a class="headerlink" href="#queryprototypesetoptions" title="Permanent link">&para;</a></h3>
<h5 id="parameters_120">Parameters<a class="headerlink" href="#parameters_120" title="Permanent link">&para;</a></h5>
<p>Sets query options. Some options only make sense for certain operations.</p>
<h4 id="options_7">Options:<a class="headerlink" href="#options_7" title="Permanent link">&para;</a></h4>
<p>The following options are only for <code>find()</code>: - <a href="http://www.mongodb.org/display/DOCS/Tailable+Cursors">tailable</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort()%7D%7D">sort</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Blimit%28%29%7D%7D">limit</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bskip%28%29%7D%7D">skip</a> - <a href="https://docs.mongodb.org/v3.2/reference/operator/meta/maxScan/#metaOp._S_maxScan">maxscan</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7BbatchSize%28%29%7D%7D">batchSize</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24comment">comment</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsnapshot%28%29%7D%7D">snapshot</a> - <a href="http://docs.mongodb.org/manual/applications/replication/#read-preference">readPreference</a> - <a href="http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24hint">hint</a></p>
<p>The following options are only for <code>update()</code>, <code>updateOne()</code>, <code>updateMany()</code>, <code>replaceOne()</code>, <code>findOneAndUpdate()</code>, and <code>findByIdAndUpdate()</code>: - <a href="https://docs.mongodb.com/manual/reference/method/db.collection.update/">upsert</a> - <a href="https://docs.mongodb.com/manual/reference/method/db.collection.update/">writeConcern</a></p>
<p>The following options are only for <code>find()</code>, <code>findOne()</code>, <code>findById()</code>, <code>findOneAndUpdate()</code>, <code>findByIdAndUpdate()</code>, and <code>geoSearch()</code>: - <a href="http://mongoosejs.com/api.html#query_Query-lean">lean</a></p>
<h2 id="the-following-options-are-for-all-operations">The following options are for all operations<a class="headerlink" href="#the-following-options-are-for-all-operations" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="queryprototypegetquery"><a href="http://mongoosejs.com#query_Query-getQuery">Query.prototype.getQuery()</a><a class="headerlink" href="#queryprototypegetquery" title="Permanent link">&para;</a></h3>
<h5 id="returns_83">Returns:<a class="headerlink" href="#returns_83" title="Permanent link">&para;</a></h5>
<ul>
<li>«Object» current query conditions</li>
</ul>
<p>Returns the current query conditions as a JSON object.</p>
<h4 id="example_88">Example:<a class="headerlink" href="#example_88" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Query</span><span class="o">();</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;b&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">gt</span><span class="o">(</span><span class="nt">2</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">getQuery</span><span class="o">();</span>
</pre></div>


<hr />
<h3 id="queryprototypegetupdate"><a href="http://mongoosejs.com#query_Query-getUpdate">Query.prototype.getUpdate()</a><a class="headerlink" href="#queryprototypegetupdate" title="Permanent link">&para;</a></h3>
<h5 id="returns_84">Returns:<a class="headerlink" href="#returns_84" title="Permanent link">&para;</a></h5>
<ul>
<li>«Object» current update operations</li>
</ul>
<p>Returns the current update operations as a JSON object.</p>
<h4 id="example_89">Example:<a class="headerlink" href="#example_89" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">query</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Query</span><span class="o">();</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{}</span><span class="o">,</span> <span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">a</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span> <span class="err">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">getUpdate</span><span class="o">();</span>
</pre></div>


<hr />
<h3 id="queryprototypelean"><a href="http://mongoosejs.com#query_Query-lean">Query.prototype.lean()</a><a class="headerlink" href="#queryprototypelean" title="Permanent link">&para;</a></h3>
<h5 id="parameters_121">Parameters<a class="headerlink" href="#parameters_121" title="Permanent link">&para;</a></h5>
<ul>
<li>bool «Boolean,Object» defaults to true</li>
</ul>
<h5 id="returns_85">Returns:<a class="headerlink" href="#returns_85" title="Permanent link">&para;</a></h5>
<p>Sets the lean option.</p>
<p>Documents returned from queries with the <code>lean</code> option enabled are plain javascript objects, not <a href="http://mongoosejs.com#document-js">MongooseDocuments</a>. They have no <code>save</code> method, getters/setters or other Mongoose magic applied.</p>
<h4 id="example_90">Example:<a class="headerlink" href="#example_90" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>new Query().lean()
new Query().lean(true)
new Query().lean(false)

Model.find().lean().exec(function (err, docs) {
  docs[0] instanceof mongoose.Document
});
</pre></div>


<p>This is a <a href="https://groups.google.com/forum/#!topic/mongoose-orm/u2_DzDydcnA/discussion">great</a> option in high-performance read-only scenarios, especially when combined with <a href="http://mongoosejs.com#query_Query-stream">stream</a>.</p>
<hr />
<h3 id="queryprototypeerror"><a href="http://mongoosejs.com#query_Query-error">Query.prototype.error()</a><a class="headerlink" href="#queryprototypeerror" title="Permanent link">&para;</a></h3>
<h5 id="parameters_122">Parameters<a class="headerlink" href="#parameters_122" title="Permanent link">&para;</a></h5>
<ul>
<li>err «Error,null» if set, <code>exec()</code> will fail fast before sending the query to MongoDB</li>
</ul>
<p>Gets/sets the error flag on this query. If this flag is not null or undefined, the <code>exec()</code> promise will reject without executing.</p>
<h4 id="example_91">Example:<a class="headerlink" href="#example_91" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Query().error();
Query().error(null);
Query().error(new Error(&#39;test&#39;));
Schema.pre(&#39;find&#39;, function() {
  if (!this.getQuery().userId) {
    this.error(new Error(&#39;Not allowed to query without setting userId&#39;));
  }
});
</pre></div>


<p>Note that query casting runs <strong>after</strong> hooks, so cast errors will override custom errors.</p>
<h4 id="example_92">Example:<a class="headerlink" href="#example_92" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">TestSchema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">num</span><span class="p">:</span> <span class="n">Number</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">TestModel</span> <span class="o">=</span> <span class="nt">db</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;Test&#39;</span><span class="o">,</span> <span class="nt">TestSchema</span><span class="o">);</span>
<span class="nt">TestModel</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">num</span><span class="p">:</span> <span class="s1">&#39;not a number&#39;</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">error</span><span class="o">(</span><span class="nt">new</span> <span class="nt">Error</span><span class="o">(</span><span class="s1">&#39;woops&#39;</span><span class="o">))</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">function</span><span class="o">(</span><span class="nt">error</span><span class="o">)</span> <span class="p">{</span>

<span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="queryprototypemongooseoptions"><a href="http://mongoosejs.com#query_Query-mongooseOptions">Query.prototype.mongooseOptions()</a><a class="headerlink" href="#queryprototypemongooseoptions" title="Permanent link">&para;</a></h3>
<h5 id="parameters_123">Parameters<a class="headerlink" href="#parameters_123" title="Permanent link">&para;</a></h5>
<ul>
<li>options «Object» if specified, overwrites the current options</li>
</ul>
<p>Getter/setter around the current mongoose-specific options for this query (populate, lean, etc.)</p>
<hr />
<h3 id="queryprototypefind"><a href="http://mongoosejs.com#query_Query-find">Query.prototype.find()</a><a class="headerlink" href="#queryprototypefind" title="Permanent link">&para;</a></h3>
<h5 id="parameters_124">Parameters<a class="headerlink" href="#parameters_124" title="Permanent link">&para;</a></h5>
<h5 id="returns_86">Returns:<a class="headerlink" href="#returns_86" title="Permanent link">&para;</a></h5>
<p>Finds documents.</p>
<p>When no <code>callback</code> is passed, the query is not executed. When the query is executed, the result will be an array of documents.</p>
<h4 id="example_93">Example<a class="headerlink" href="#example_93" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.find({ name: &#39;Los Pollos Hermanos&#39; }).find(callback)
</pre></div>


<hr />
<h3 id="queryprototypemerge_1"><a href="http://mongoosejs.com#query_Query-merge">Query.prototype.merge()</a><a class="headerlink" href="#queryprototypemerge_1" title="Permanent link">&para;</a></h3>
<h5 id="parameters_125">Parameters<a class="headerlink" href="#parameters_125" title="Permanent link">&para;</a></h5>
<h5 id="returns_87">Returns:<a class="headerlink" href="#returns_87" title="Permanent link">&para;</a></h5>
<p>Merges another Query or conditions object into this one.</p>
<p>When a Query is passed, conditions, field selection and options are merged.</p>
<hr />
<h3 id="queryprototypecollation"><a href="http://mongoosejs.com#query_Query-collation">Query.prototype.collation()</a><a class="headerlink" href="#queryprototypecollation" title="Permanent link">&para;</a></h3>
<h5 id="parameters_126">Parameters<a class="headerlink" href="#parameters_126" title="Permanent link">&para;</a></h5>
<h5 id="returns_88">Returns:<a class="headerlink" href="#returns_88" title="Permanent link">&para;</a></h5>
<p>Adds a collation to this op (MongoDB 3.4 and up)</p>
<hr />
<h3 id="queryprototypefindone"><a href="http://mongoosejs.com#query_Query-findOne">Query.prototype.findOne()</a><a class="headerlink" href="#queryprototypefindone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_127">Parameters<a class="headerlink" href="#parameters_127" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, document)</li>
</ul>
<h5 id="returns_89">Returns:<a class="headerlink" href="#returns_89" title="Permanent link">&para;</a></h5>
<p>Declares the query a findOne operation. When executed, the first found document is passed to the callback.</p>
<p>Passing a <code>callback</code> executes the query. The result of the query is a single document.</p>
<ul>
<li><em>Note:</em> <code>conditions</code> is optional, and if <code>conditions</code> is null or undefined, mongoose will send an empty <code>findOne</code> command to MongoDB, which will return an arbitrary document. If you're querying by <code>_id</code>, use <code>Model.findById()</code> instead.</li>
</ul>
<p>This function triggers the following middleware.</p>
<h4 id="example_94">Example<a class="headerlink" href="#example_94" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">query</span>  <span class="o">=</span> <span class="nt">Kitten</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="s1">&#39;white&#39;</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">findOne</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">err</span><span class="o">,</span> <span class="nt">kitten</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">if</span> <span class="err">(err)</span> <span class="err">return</span> <span class="err">handleError(err)</span><span class="p">;</span>
  <span class="err">if</span> <span class="err">(kitten)</span> <span class="err">{</span>

  <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="queryprototypecount"><a href="http://mongoosejs.com#query_Query-count">Query.prototype.count()</a><a class="headerlink" href="#queryprototypecount" title="Permanent link">&para;</a></h3>
<h5 id="parameters_128">Parameters<a class="headerlink" href="#parameters_128" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, count)</li>
</ul>
<h5 id="returns_90">Returns:<a class="headerlink" href="#returns_90" title="Permanent link">&para;</a></h5>
<p>Specifying this query as a <code>count</code> query.</p>
<p>Passing a <code>callback</code> executes the query.</p>
<p>This function triggers the following middleware.</p>
<h4 id="example_95">Example:<a class="headerlink" href="#example_95" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var countQuery = model.where({ &#39;color&#39;: &#39;black&#39; }).count();

query.count({ color: &#39;black&#39; }).count(callback)

query.count({ color: &#39;black&#39; }, callback)

query.where(&#39;color&#39;, &#39;black&#39;).count(function (err, count) {
  if (err) return handleError(err);
  console.log(&#39;there are %d kittens&#39;, count);
})
</pre></div>


<hr />
<h3 id="queryprototypedistinct"><a href="http://mongoosejs.com#query_Query-distinct">Query.prototype.distinct()</a><a class="headerlink" href="#queryprototypedistinct" title="Permanent link">&para;</a></h3>
<h5 id="parameters_129">Parameters<a class="headerlink" href="#parameters_129" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, arr)</li>
</ul>
<h5 id="returns_91">Returns:<a class="headerlink" href="#returns_91" title="Permanent link">&para;</a></h5>
<p>Declares or executes a distict() operation.</p>
<p>Passing a <code>callback</code> executes the query.</p>
<p>This function does not trigger any middleware.</p>
<h4 id="example_96">Example<a class="headerlink" href="#example_96" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>distinct(field, conditions, callback)
distinct(field, conditions)
distinct(field, callback)
distinct(field)
distinct(callback)
distinct()
</pre></div>


<hr />
<h3 id="queryprototypesort"><a href="http://mongoosejs.com#query_Query-sort">Query.prototype.sort()</a><a class="headerlink" href="#queryprototypesort" title="Permanent link">&para;</a></h3>
<h5 id="parameters_130">Parameters<a class="headerlink" href="#parameters_130" title="Permanent link">&para;</a></h5>
<h5 id="returns_92">Returns:<a class="headerlink" href="#returns_92" title="Permanent link">&para;</a></h5>
<p>Sets the sort order</p>
<p>If an object is passed, values allowed are <code>asc</code>, <code>desc</code>, <code>ascending</code>, <code>descending</code>, <code>1</code>, and <code>-1</code>.</p>
<p>If a string is passed, it must be a space delimited list of path names. The sort order of each path is ascending unless the path name is prefixed with <code>-</code> which will be treated as descending.</p>
<h4 id="example_97">Example<a class="headerlink" href="#example_97" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">sort</span><span class="o">(</span><span class="p">{</span> <span class="n">field</span><span class="p">:</span> <span class="s1">&#39;asc&#39;</span><span class="p">,</span> <span class="n">test</span><span class="o">:</span> <span class="mi">-1</span> <span class="p">}</span><span class="o">);</span>


<span class="nt">query</span><span class="p">.</span><span class="nc">sort</span><span class="o">(</span><span class="s1">&#39;field -test&#39;</span><span class="o">);</span>
</pre></div>


<h4 id="note_28">Note<a class="headerlink" href="#note_28" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototyperemove"><a href="http://mongoosejs.com#query_Query-remove">Query.prototype.remove()</a><a class="headerlink" href="#queryprototyperemove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_131">Parameters<a class="headerlink" href="#parameters_131" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_93">Returns:<a class="headerlink" href="#returns_93" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as a remove() operation.</p>
<p>This function does not trigger any middleware</p>
<h4 id="example_98">Example<a class="headerlink" href="#example_98" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.remove({ artist: &#39;Anne Murray&#39; }, callback)
</pre></div>


<h4 id="note_29">Note<a class="headerlink" href="#note_29" title="Permanent link">&para;</a></h4>
<p>The operation is only executed when a callback is passed. To force execution without a callback, you must first call <code>remove()</code> and then execute it by using the <code>exec()</code> method.</p>
<div class="codehilite"><pre><span></span>var query = Model.find().remove({ name: &#39;Anne Murray&#39; })


query.remove({ name: &#39;Anne Murray&#39; }, callback)
query.remove({ name: &#39;Anne Murray&#39; }).remove(callback)


query.exec()


query.remove(conds, fn);
query.remove(conds)
query.remove(fn)
query.remove()
</pre></div>


<hr />
<h3 id="queryprototypedeleteone"><a href="http://mongoosejs.com#query_Query-deleteOne">Query.prototype.deleteOne()</a><a class="headerlink" href="#queryprototypedeleteone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_132">Parameters<a class="headerlink" href="#parameters_132" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_94">Returns:<a class="headerlink" href="#returns_94" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as a <code>deleteOne()</code> operation. Works like remove, except it deletes at most one document regardless of the <code>single</code> option.</p>
<p>This function does not trigger any middleware.</p>
<h4 id="example_99">Example<a class="headerlink" href="#example_99" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Character.deleteOne({ name: &#39;Eddard Stark&#39; }, callback)
Character.deleteOne({ name: &#39;Eddard Stark&#39; }).then(next)
</pre></div>


<hr />
<h3 id="queryprototypedeletemany"><a href="http://mongoosejs.com#query_Query-deleteMany">Query.prototype.deleteMany()</a><a class="headerlink" href="#queryprototypedeletemany" title="Permanent link">&para;</a></h3>
<h5 id="parameters_133">Parameters<a class="headerlink" href="#parameters_133" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_95">Returns:<a class="headerlink" href="#returns_95" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as a <code>deleteMany()</code> operation. Works like remove, except it deletes <em>every</em> document that matches <code>criteria</code> in the collection, regardless of the value of <code>single</code>.</p>
<p>This function does not trigger any middleware</p>
<h4 id="example_100">Example<a class="headerlink" href="#example_100" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Character.deleteMany({ name: /Stark/, age: { $gte: 18 } }, callback)
Character.deleteMany({ name: /Stark/, age: { $gte: 18 } }).then(next)
</pre></div>


<hr />
<h3 id="queryprototypefindoneandupdate"><a href="http://mongoosejs.com#query_Query-findOneAndUpdate">Query.prototype.findOneAndUpdate()</a><a class="headerlink" href="#queryprototypefindoneandupdate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_134">Parameters<a class="headerlink" href="#parameters_134" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, doc), <em>unless</em> <code>rawResult</code> is used, in which case params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_96">Returns:<a class="headerlink" href="#returns_96" title="Permanent link">&para;</a></h5>
<p>Issues a mongodb <a href="http://www.mongodb.org/display/DOCS/findAndModify+Command">findAndModify</a> update command.</p>
<p>Finds a matching document, updates it according to the <code>update</code> arg, passing any <code>options</code>, and returns the found document (if any) to the callback. The query executes immediately if <code>callback</code> is passed.</p>
<p>This function triggers the following middleware.</p>
<h4 id="available-options_1">Available options<a class="headerlink" href="#available-options_1" title="Permanent link">&para;</a></h4>
<ul>
<li><code>new</code>: bool - if true, return the modified document rather than the original. defaults to false (changed in 4.0)</li>
<li><code>upsert</code>: bool - creates the object if it doesn't exist. defaults to false.</li>
<li><code>fields</code>: {Object|String} - Field selection. Equivalent to <code>.select(fields).findOneAndUpdate()</code></li>
<li><code>sort</code>: if multiple docs are found by the conditions, sets the sort order to choose which doc to update</li>
<li><code>maxTimeMS</code>: puts a time limit on the query - requires mongodb &gt;= 2.6.0</li>
<li><code>runValidators</code>: if true, runs <a href="http://mongoosejs.com/docs/validation.html#update-validators">update validators</a> on this command. Update validators validate the update operation against the model's schema.</li>
<li><code>setDefaultsOnInsert</code>: if this and <code>upsert</code> are true, mongoose will apply the <a href="http://mongoosejs.com/docs/defaults.html">defaults</a> specified in the model's schema if a new document is created. This option only works on MongoDB &gt;= 2.4 because it relies on <a href="https://docs.mongodb.org/v2.4/reference/operator/update/setOnInsert/">MongoDB's <code>$setOnInsert</code> operator</a>.</li>
<li><code>rawResult</code>: if true, returns the <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findAndModify">raw result from the MongoDB driver</a></li>
<li><code>context</code> (string) if set to 'query' and <code>runValidators</code> is on, <code>this</code> will refer to the query in custom validator functions that update validation runs. Does nothing if <code>runValidators</code> is false.</li>
</ul>
<h4 id="callback-signature">Callback Signature<a class="headerlink" href="#callback-signature" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>function(error, doc) {


}
</pre></div>


<h4 id="examples_7">Examples<a class="headerlink" href="#examples_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.findOneAndUpdate(conditions, update, options, callback)
query.findOneAndUpdate(conditions, update, options)
query.findOneAndUpdate(conditions, update, callback)
query.findOneAndUpdate(conditions, update)
query.findOneAndUpdate(update, callback)
query.findOneAndUpdate(update)
query.findOneAndUpdate(callback)
query.findOneAndUpdate()
</pre></div>


<hr />
<h3 id="queryprototypefindoneandremove"><a href="http://mongoosejs.com#query_Query-findOneAndRemove">Query.prototype.findOneAndRemove()</a><a class="headerlink" href="#queryprototypefindoneandremove" title="Permanent link">&para;</a></h3>
<h5 id="parameters_135">Parameters<a class="headerlink" href="#parameters_135" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, document)</li>
</ul>
<h5 id="returns_97">Returns:<a class="headerlink" href="#returns_97" title="Permanent link">&para;</a></h5>
<p>Issues a mongodb <a href="http://www.mongodb.org/display/DOCS/findAndModify+Command">findAndModify</a> remove command.</p>
<p>Finds a matching document, removes it, passing the found document (if any) to the callback. Executes immediately if <code>callback</code> is passed.</p>
<p>This function triggers the following middleware.</p>
<h4 id="available-options_2">Available options<a class="headerlink" href="#available-options_2" title="Permanent link">&para;</a></h4>
<ul>
<li><code>sort</code>: if multiple docs are found by the conditions, sets the sort order to choose which doc to update</li>
<li><code>maxTimeMS</code>: puts a time limit on the query - requires mongodb &gt;= 2.6.0</li>
<li><code>rawResult</code>: if true, resolves to the <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findAndModify">raw result from the MongoDB driver</a></li>
</ul>
<h4 id="callback-signature_1">Callback Signature<a class="headerlink" href="#callback-signature_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>function(error, doc) {


}
</pre></div>


<h4 id="examples_8">Examples<a class="headerlink" href="#examples_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>A.where().findOneAndRemove(conditions, options, callback)
A.where().findOneAndRemove(conditions, options)
A.where().findOneAndRemove(conditions, callback)
A.where().findOneAndRemove(conditions)
A.where().findOneAndRemove(callback)
A.where().findOneAndRemove()
</pre></div>


<hr />
<h3 id="queryprototypeupdate"><a href="http://mongoosejs.com#query_Query-update">Query.prototype.update()</a><a class="headerlink" href="#queryprototypeupdate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_136">Parameters<a class="headerlink" href="#parameters_136" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional, params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_98">Returns:<a class="headerlink" href="#returns_98" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as an update() operation.</p>
<p><em>All paths passed that are not $atomic operations will become $set ops.</em></p>
<p>This function triggers the following middleware.</p>
<h4 id="example_101">Example<a class="headerlink" href="#example_101" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.where({ _id: id }).update({ title: &#39;words&#39; })



Model.where({ _id: id }).update({ $set: { title: &#39;words&#39; }})
</pre></div>


<h4 id="valid-options_2">Valid options:<a class="headerlink" href="#valid-options_2" title="Permanent link">&para;</a></h4>
<ul>
<li><code>safe</code> (boolean) safe mode (defaults to value set in schema (true))</li>
<li><code>upsert</code> (boolean) whether to create the doc if it doesn't match (false)</li>
<li><code>multi</code> (boolean) whether multiple documents should be updated (false)</li>
<li><code>runValidators</code>: if true, runs <a href="http://mongoosejs.com/docs/validation.html#update-validators">update validators</a> on this command. Update validators validate the update operation against the model's schema.</li>
<li><code>setDefaultsOnInsert</code>: if this and <code>upsert</code> are true, mongoose will apply the <a href="http://mongoosejs.com/docs/defaults.html">defaults</a> specified in the model's schema if a new document is created. This option only works on MongoDB &gt;= 2.4 because it relies on <a href="https://docs.mongodb.org/v2.4/reference/operator/update/setOnInsert/">MongoDB's <code>$setOnInsert</code> operator</a>.</li>
<li><code>strict</code> (boolean) overrides the <code>strict</code> option for this update</li>
<li><code>overwrite</code> (boolean) disables update-only mode, allowing you to overwrite the doc (false)</li>
<li><code>context</code> (string) if set to 'query' and <code>runValidators</code> is on, <code>this</code> will refer to the query in custom validator functions that update validation runs. Does nothing if <code>runValidators</code> is false.</li>
</ul>
<h4 id="note_30">Note<a class="headerlink" href="#note_30" title="Permanent link">&para;</a></h4>
<p>Passing an empty object <code>{}</code> as the doc will result in a no-op unless the <code>overwrite</code> option is passed. Without the <code>overwrite</code> option set, the update operation will be ignored and the callback executed without sending the command to MongoDB so as to prevent accidently overwritting documents in the collection.</p>
<h4 id="note_31">Note<a class="headerlink" href="#note_31" title="Permanent link">&para;</a></h4>
<p>The operation is only executed when a callback is passed. To force execution without a callback, we must first call update() and then execute it by using the <code>exec()</code> method.</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">q</span> <span class="o">=</span> <span class="nt">Model</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="n">id</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">q</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">name</span><span class="o">:</span> <span class="s1">&#39;bob&#39;</span> <span class="p">}</span><span class="err">}</span><span class="o">)</span><span class="p">.</span><span class="nc">update</span><span class="o">();</span> <span class="o">//</span> <span class="nt">not</span> <span class="nt">executed</span>

<span class="nt">q</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">name</span><span class="o">:</span> <span class="s1">&#39;bob&#39;</span> <span class="p">}</span><span class="err">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">();</span> <span class="o">//</span> <span class="nt">executed</span>

<span class="o">//</span> <span class="nt">keys</span> <span class="nt">that</span> <span class="nt">are</span> <span class="nt">not</span> <span class="o">$</span><span class="nt">atomic</span> <span class="nt">ops</span> <span class="nt">become</span> <span class="o">$</span><span class="nt">set</span><span class="o">.</span>
<span class="o">//</span> <span class="nt">this</span> <span class="nt">executes</span> <span class="nt">the</span> <span class="nt">same</span> <span class="nt">command</span> <span class="nt">as</span> <span class="nt">the</span> <span class="nt">previous</span> <span class="nt">example</span><span class="o">.</span>
<span class="nt">q</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;bob&#39;</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">();</span>

<span class="o">//</span> <span class="nt">overwriting</span> <span class="nt">with</span> <span class="nt">empty</span> <span class="nt">docs</span>
<span class="nt">var</span> <span class="nt">q</span> <span class="o">=</span> <span class="nt">Model</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="n">id</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">setOptions</span><span class="o">(</span><span class="p">{</span> <span class="n">overwrite</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">q</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="p">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">);</span> <span class="o">//</span> <span class="nt">executes</span>

<span class="o">//</span> <span class="nt">multi</span> <span class="nt">update</span> <span class="nt">with</span> <span class="nt">overwrite</span> <span class="nt">to</span> <span class="nt">empty</span> <span class="nt">doc</span>
<span class="nt">var</span> <span class="nt">q</span> <span class="o">=</span> <span class="nt">Model</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="n">id</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">q</span><span class="p">.</span><span class="nc">setOptions</span><span class="o">(</span><span class="p">{</span> <span class="n">multi</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">q</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">q</span><span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span> <span class="o">//</span> <span class="nt">executed</span>

<span class="o">//</span> <span class="nt">multi</span> <span class="nt">updates</span>
<span class="nt">Model</span><span class="p">.</span><span class="nc">where</span><span class="o">()</span>
     <span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/^</span><span class="n">match</span><span class="o">/</span> <span class="p">}</span><span class="o">,</span> <span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">arr</span><span class="o">:</span> <span class="cp">[]</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="p">{</span> <span class="n">multi</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>

<span class="o">//</span> <span class="nt">more</span> <span class="nt">multi</span> <span class="nt">updates</span>
<span class="nt">Model</span><span class="p">.</span><span class="nc">where</span><span class="o">()</span>
     <span class="p">.</span><span class="nc">setOptions</span><span class="o">(</span><span class="p">{</span> <span class="n">multi</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>
     <span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="err">$</span><span class="n">set</span><span class="p">:</span> <span class="err">{</span> <span class="n">arr</span><span class="o">:</span> <span class="cp">[]</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>

<span class="o">//</span> <span class="nt">single</span> <span class="nt">update</span> <span class="nt">by</span> <span class="nt">default</span>
<span class="nt">Model</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="p">{</span> <span class="n">email</span><span class="p">:</span> <span class="s1">&#39;</span><span class="cp">[</span><span class="nx">address</span><span class="p">@</span><span class="nx">example.com</span><span class="cp">][</span><span class="mi">210</span><span class="cp">]</span><span class="s1">&#39;</span> <span class="p">}</span><span class="o">)</span>
     <span class="p">.</span><span class="nc">update</span><span class="o">(</span><span class="p">{</span> <span class="err">$</span><span class="n">inc</span><span class="p">:</span> <span class="err">{</span> <span class="n">counter</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="nt">callback</span><span class="o">)</span>
</pre></div>


<p>API summary</p>
<div class="codehilite"><pre><span></span>update(criteria, doc, options, cb)
update(criteria, doc, options)
update(criteria, doc, cb)
update(criteria, doc)
update(doc, cb)
update(doc)
update(cb)
update(true)
update()
</pre></div>


<hr />
<h3 id="queryprototypeupdatemany"><a href="http://mongoosejs.com#query_Query-updateMany">Query.prototype.updateMany()</a><a class="headerlink" href="#queryprototypeupdatemany" title="Permanent link">&para;</a></h3>
<h5 id="parameters_137">Parameters<a class="headerlink" href="#parameters_137" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_99">Returns:<a class="headerlink" href="#returns_99" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as an updateMany() operation. Same as <code>update()</code>, except MongoDB will update <em>all</em> documents that match <code>criteria</code> (as opposed to just the first one) regardless of the value of the <code>multi</code> option.</p>
<p><strong>Note</strong> updateMany will <em>not</em> fire update middleware. Use <code>pre('updateMany')</code> and <code>post('updateMany')</code> instead.</p>
<p>This function triggers the following middleware.</p>
<hr />
<h3 id="queryprototypeupdateone"><a href="http://mongoosejs.com#query_Query-updateOne">Query.prototype.updateOne()</a><a class="headerlink" href="#queryprototypeupdateone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_138">Parameters<a class="headerlink" href="#parameters_138" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_100">Returns:<a class="headerlink" href="#returns_100" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as an updateOne() operation. Same as <code>update()</code>, except MongoDB will update <em>only</em> the first document that matches <code>criteria</code> regardless of the value of the <code>multi</code> option.</p>
<p><strong>Note</strong> updateOne will <em>not</em> fire update middleware. Use <code>pre('updateOne')</code> and <code>post('updateOne')</code> instead.</p>
<p>This function triggers the following middleware.</p>
<hr />
<h3 id="queryprototypereplaceone"><a href="http://mongoosejs.com#query_Query-replaceOne">Query.prototype.replaceOne()</a><a class="headerlink" href="#queryprototypereplaceone" title="Permanent link">&para;</a></h3>
<h5 id="parameters_139">Parameters<a class="headerlink" href="#parameters_139" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params are (error, writeOpResult)</li>
</ul>
<h5 id="returns_101">Returns:<a class="headerlink" href="#returns_101" title="Permanent link">&para;</a></h5>
<p>Declare and/or execute this query as a replaceOne() operation. Same as <code>update()</code>, except MongoDB will replace the existing document and will not accept any atomic operators (<code>$set</code>, etc.)</p>
<p><strong>Note</strong> replaceOne will <em>not</em> fire update middleware. Use <code>pre('replaceOne')</code> and <code>post('replaceOne')</code> instead.</p>
<p>This function triggers the following middleware.</p>
<hr />
<h3 id="queryprototypeexec"><a href="http://mongoosejs.com#query_Query-exec">Query.prototype.exec()</a><a class="headerlink" href="#queryprototypeexec" title="Permanent link">&para;</a></h3>
<h5 id="parameters_140">Parameters<a class="headerlink" href="#parameters_140" title="Permanent link">&para;</a></h5>
<ul>
<li>[callback] «Function» optional params depend on the function being called</li>
</ul>
<h5 id="returns_102">Returns:<a class="headerlink" href="#returns_102" title="Permanent link">&para;</a></h5>
<p>Executes the query</p>
<h4 id="examples_9">Examples:<a class="headerlink" href="#examples_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var promise = query.exec();
var promise = query.exec(&#39;update&#39;);

query.exec(callback);
query.exec(&#39;find&#39;, callback);
</pre></div>


<hr />
<h3 id="queryprototypethen"><a href="http://mongoosejs.com#query_Query-then">Query.prototype.then()</a><a class="headerlink" href="#queryprototypethen" title="Permanent link">&para;</a></h3>
<h5 id="parameters_141">Parameters<a class="headerlink" href="#parameters_141" title="Permanent link">&para;</a></h5>
<h5 id="returns_103">Returns:<a class="headerlink" href="#returns_103" title="Permanent link">&para;</a></h5>
<p>Executes the query returning a <code>Promise</code> which will be resolved with either the doc(s) or rejected with the error.</p>
<hr />
<h3 id="queryprototypecatch"><a href="http://mongoosejs.com#query_Query-catch">Query.prototype.catch()</a><a class="headerlink" href="#queryprototypecatch" title="Permanent link">&para;</a></h3>
<h5 id="parameters_142">Parameters<a class="headerlink" href="#parameters_142" title="Permanent link">&para;</a></h5>
<h5 id="returns_104">Returns:<a class="headerlink" href="#returns_104" title="Permanent link">&para;</a></h5>
<p>Executes the query returning a <code>Promise</code> which will be resolved with either the doc(s) or rejected with the error. Like <code>.then()</code>, but only takes a rejection handler.</p>
<hr />
<h3 id="queryprototypepopulate"><a href="http://mongoosejs.com#query_Query-populate">Query.prototype.populate()</a><a class="headerlink" href="#queryprototypepopulate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_143">Parameters<a class="headerlink" href="#parameters_143" title="Permanent link">&para;</a></h5>
<ul>
<li>[options] «Object» Options for the population query (sort, etc)</li>
</ul>
<h5 id="returns_105">Returns:<a class="headerlink" href="#returns_105" title="Permanent link">&para;</a></h5>
<p>Specifies paths which should be populated with other documents.</p>
<h4 id="example_102">Example:<a class="headerlink" href="#example_102" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Kitten.findOne().populate(&#39;owner&#39;).exec(function (err, kitten) {
  console.log(kitten.owner.name)
})

Kitten.find().populate({
    path: &#39;owner&#39;
  , select: &#39;name&#39;
  , match: { color: &#39;black&#39; }
  , options: { sort: { name: -1 }}
}).exec(function (err, kittens) {
  console.log(kittens[0].owner.name)
})


Kitten.find().populate(&#39;owner&#39;, &#39;name&#39;, null, {sort: { name: -1 }}).exec(function (err, kittens) {
  console.log(kittens[0].owner.name)
})
</pre></div>


<p>Paths are populated after the query executes and a response is received. A separate query is then executed for each path specified for population. After a response for each query has also been returned, the results are passed to the callback.</p>
<hr />
<h3 id="queryprototypecast"><a href="http://mongoosejs.com#query_Query-cast">Query.prototype.cast()</a><a class="headerlink" href="#queryprototypecast" title="Permanent link">&para;</a></h3>
<h5 id="parameters_144">Parameters<a class="headerlink" href="#parameters_144" title="Permanent link">&para;</a></h5>
<h5 id="returns_106">Returns:<a class="headerlink" href="#returns_106" title="Permanent link">&para;</a></h5>
<p>Casts this query to the schema of <code>model</code></p>
<h4 id="note_32">Note<a class="headerlink" href="#note_32" title="Permanent link">&para;</a></h4>
<p>If <code>obj</code> is present, it is cast instead of this query.</p>
<hr />
<h3 id="queryprototypecursor"><a href="http://mongoosejs.com#query_Query-cursor">Query.prototype.cursor()</a><a class="headerlink" href="#queryprototypecursor" title="Permanent link">&para;</a></h3>
<h5 id="parameters_145">Parameters<a class="headerlink" href="#parameters_145" title="Permanent link">&para;</a></h5>
<h5 id="returns_107">Returns:<a class="headerlink" href="#returns_107" title="Permanent link">&para;</a></h5>
<p>Returns a wrapper around a <a href="http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html">mongodb driver cursor</a>. A QueryCursor exposes a <a href="https://strongloop.com/strongblog/whats-new-io-js-beta-streams3/">Streams3</a>-compatible interface, as well as a <code>.next()</code> function.</p>
<p>The <code>.cursor()</code> function triggers pre find hooks, but <strong>not</strong> post find hooks.</p>
<h4 id="example_103">Example<a class="headerlink" href="#example_103" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Thing</span><span class="o">.</span>
  <span class="nt">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/^</span><span class="n">hello</span><span class="o">/</span> <span class="p">}</span><span class="o">).</span>
  <span class="nt">cursor</span><span class="o">().</span>
  <span class="nt">on</span><span class="o">(</span><span class="s1">&#39;data&#39;</span><span class="o">,</span> <span class="nt">function</span><span class="o">(</span><span class="nt">doc</span><span class="o">)</span> <span class="p">{</span> <span class="err">console.log(doc)</span><span class="p">;</span> <span class="p">}</span><span class="o">).</span>
  <span class="nt">on</span><span class="o">(</span><span class="s1">&#39;end&#39;</span><span class="o">,</span> <span class="nt">function</span><span class="o">()</span> <span class="p">{</span> <span class="err">console.log(&#39;Done!&#39;)</span><span class="p">;</span> <span class="p">}</span><span class="o">);</span>



<span class="nt">var</span> <span class="nt">cursor</span> <span class="o">=</span> <span class="nt">Thing</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="o">/^</span><span class="n">hello</span><span class="o">/</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">cursor</span><span class="o">();</span>
<span class="nt">cursor</span><span class="p">.</span><span class="nc">next</span><span class="o">(</span><span class="nt">function</span><span class="o">(</span><span class="nt">error</span><span class="o">,</span> <span class="nt">doc</span><span class="o">)</span> <span class="p">{</span>
  <span class="err">console.log(doc)</span><span class="p">;</span>
<span class="p">}</span><span class="o">);</span>




<span class="nt">co</span><span class="o">(</span><span class="nt">function</span><span class="o">*()</span> <span class="p">{</span>
  <span class="err">const</span> <span class="err">cursor</span> <span class="err">=</span> <span class="err">Thing.find({</span> <span class="n">name</span><span class="p">:</span> <span class="o">/^</span><span class="n">hello</span><span class="o">/</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">cursor</span><span class="o">();</span>
  <span class="nt">for</span> <span class="o">(</span><span class="nt">let</span> <span class="nt">doc</span> <span class="o">=</span> <span class="nt">yield</span> <span class="nt">cursor</span><span class="p">.</span><span class="nc">next</span><span class="o">();</span> <span class="nt">doc</span> <span class="o">!=</span> <span class="nt">null</span><span class="o">;</span> <span class="nt">doc</span> <span class="o">=</span> <span class="nt">yield</span> <span class="nt">cursor</span><span class="p">.</span><span class="nc">next</span><span class="o">())</span> <span class="p">{</span>
    <span class="err">console.log(doc)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>
</pre></div>


<h4 id="valid-options_3">Valid options<a class="headerlink" href="#valid-options_3" title="Permanent link">&para;</a></h4>
<ul>
<li><code>transform</code>: optional function which accepts a mongoose document. The return value of the function will be emitted on <code>data</code> and returned by <code>.next()</code>.</li>
</ul>
<hr />
<h3 id="queryprototypemaxscan_1"><a href="http://mongoosejs.com#query_Query-maxscan">Query.prototype.maxscan()</a><a class="headerlink" href="#queryprototypemaxscan_1" title="Permanent link">&para;</a></h3>
<p><em>DEPRECATED</em> Alias of <code>maxScan</code></p>
<hr />
<h3 id="queryprototypetailable"><a href="http://mongoosejs.com#query_Query-tailable">Query.prototype.tailable()</a><a class="headerlink" href="#queryprototypetailable" title="Permanent link">&para;</a></h3>
<h5 id="parameters_146">Parameters<a class="headerlink" href="#parameters_146" title="Permanent link">&para;</a></h5>
<ul>
<li>[opts.tailableRetryInterval] «Number» if cursor is exhausted, wait this many milliseconds before retrying</li>
</ul>
<p>Sets the tailable option (for use with capped collections).</p>
<h4 id="example_104">Example<a class="headerlink" href="#example_104" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.tailable()
query.tailable(true)
query.tailable(false)
</pre></div>


<h4 id="note_33">Note<a class="headerlink" href="#note_33" title="Permanent link">&para;</a></h4>
<p>Cannot be used with <code>distinct()</code></p>
<hr />
<h3 id="queryprototypeintersects"><a href="http://mongoosejs.com#query_Query-intersects">Query.prototype.intersects()</a><a class="headerlink" href="#queryprototypeintersects" title="Permanent link">&para;</a></h3>
<h5 id="parameters_147">Parameters<a class="headerlink" href="#parameters_147" title="Permanent link">&para;</a></h5>
<h5 id="returns_108">Returns:<a class="headerlink" href="#returns_108" title="Permanent link">&para;</a></h5>
<p>Declares an intersects query for <code>geometry()</code>.</p>
<h4 id="example_105">Example<a class="headerlink" href="#example_105" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.where(&#39;path&#39;).intersects().geometry({
    type: &#39;LineString&#39;
  , coordinates: [[180.0, 11.0], [180, 9.0]]
})

query.where(&#39;path&#39;).intersects({
    type: &#39;LineString&#39;
  , coordinates: [[180.0, 11.0], [180, 9.0]]
})
</pre></div>


<h4 id="note_34">NOTE:<a class="headerlink" href="#note_34" title="Permanent link">&para;</a></h4>
<p><strong>MUST</strong> be used after <code>where()</code>.</p>
<h4 id="note_35">NOTE:<a class="headerlink" href="#note_35" title="Permanent link">&para;</a></h4>
<p>In Mongoose 3.7, <code>intersects</code> changed from a getter to a function. If you need the old syntax, use <a href="https://github.com/ebensing/mongoose-within">this</a>.</p>
<hr />
<h3 id="queryprototypegeometry"><a href="http://mongoosejs.com#query_Query-geometry">Query.prototype.geometry()</a><a class="headerlink" href="#queryprototypegeometry" title="Permanent link">&para;</a></h3>
<h5 id="parameters_148">Parameters<a class="headerlink" href="#parameters_148" title="Permanent link">&para;</a></h5>
<ul>
<li>object «Object» Must contain a <code>type</code> property which is a String and a <code>coordinates</code> property which is an Array. See the examples.</li>
</ul>
<h5 id="returns_109">Returns:<a class="headerlink" href="#returns_109" title="Permanent link">&para;</a></h5>
<p>Specifies a <code>$geometry</code> condition</p>
<h4 id="example_106">Example<a class="headerlink" href="#example_106" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var polyA = [[[ 10, 20 ], [ 10, 40 ], [ 30, 40 ], [ 30, 20 ]]]
query.where(&#39;loc&#39;).within().geometry({ type: &#39;Polygon&#39;, coordinates: polyA })


var polyB = [[ 0, 0 ], [ 1, 1 ]]
query.where(&#39;loc&#39;).within().geometry({ type: &#39;LineString&#39;, coordinates: polyB })


var polyC = [ 0, 0 ]
query.where(&#39;loc&#39;).within().geometry({ type: &#39;Point&#39;, coordinates: polyC })


query.where(&#39;loc&#39;).intersects().geometry({ type: &#39;Point&#39;, coordinates: polyC })
</pre></div>


<p>The argument is assigned to the most recent path passed to <code>where()</code>.</p>
<h4 id="note_36">NOTE:<a class="headerlink" href="#note_36" title="Permanent link">&para;</a></h4>
<p><code>geometry()</code> <strong>must</strong> come after either <code>intersects()</code> or <code>within()</code>.</p>
<p>The <code>object</code> argument must contain <code>type</code> and <code>coordinates</code> properties. - type {String} - coordinates {Array}</p>
<hr />
<h3 id="queryprototypenear"><a href="http://mongoosejs.com#query_Query-near">Query.prototype.near()</a><a class="headerlink" href="#queryprototypenear" title="Permanent link">&para;</a></h3>
<h5 id="parameters_149">Parameters<a class="headerlink" href="#parameters_149" title="Permanent link">&para;</a></h5>
<h5 id="returns_110">Returns:<a class="headerlink" href="#returns_110" title="Permanent link">&para;</a></h5>
<p>Specifies a <code>$near</code> or <code>$nearSphere</code> condition</p>
<p>These operators return documents sorted by distance.</p>
<h4 id="example_107">Example<a class="headerlink" href="#example_107" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">near</span><span class="o">(</span><span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">near</span><span class="o">(</span><span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">,</span> <span class="n">maxDistance</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">near</span><span class="o">(</span><span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">,</span> <span class="n">maxDistance</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">spherical</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">near</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">,</span> <span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">,</span> <span class="n">maxDistance</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="queryprototypenearsphere"><a href="http://mongoosejs.com#query_Query-nearSphere">Query.prototype.nearSphere()</a><a class="headerlink" href="#queryprototypenearsphere" title="Permanent link">&para;</a></h3>
<p><em>DEPRECATED</em> Specifies a <code>$nearSphere</code> condition</p>
<h4 id="example_108">Example<a class="headerlink" href="#example_108" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">nearSphere</span><span class="o">(</span><span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">,</span> <span class="n">maxDistance</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<p><strong>Deprecated.</strong> Use <code>query.near()</code> instead with the <code>spherical</code> option set to <code>true</code>.</p>
<h4 id="example_109">Example<a class="headerlink" href="#example_109" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">near</span><span class="o">(</span><span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">,</span> <span class="n">spherical</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="queryprototypepolygon"><a href="http://mongoosejs.com#query_Query-polygon">Query.prototype.polygon()</a><a class="headerlink" href="#queryprototypepolygon" title="Permanent link">&para;</a></h3>
<h5 id="parameters_150">Parameters<a class="headerlink" href="#parameters_150" title="Permanent link">&para;</a></h5>
<ul>
<li>[coordinatePairs...] «Array,Object»</li>
</ul>
<h5 id="returns_111">Returns:<a class="headerlink" href="#returns_111" title="Permanent link">&para;</a></h5>
<p>Specifies a $polygon condition</p>
<h4 id="example_110">Example<a class="headerlink" href="#example_110" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>query.where(&#39;loc&#39;).within().polygon([10,20], [13, 25], [7,15])
query.polygon(&#39;loc&#39;, [10,20], [13, 25], [7,15])
</pre></div>


<hr />
<h3 id="queryprototypebox"><a href="http://mongoosejs.com#query_Query-box">Query.prototype.box()</a><a class="headerlink" href="#queryprototypebox" title="Permanent link">&para;</a></h3>
<h5 id="parameters_151">Parameters<a class="headerlink" href="#parameters_151" title="Permanent link">&para;</a></h5>
<ul>
<li>Upper «[Array]» Right Coords</li>
</ul>
<h5 id="returns_112">Returns:<a class="headerlink" href="#returns_112" title="Permanent link">&para;</a></h5>
<p>Specifies a $box condition</p>
<h4 id="example_111">Example<a class="headerlink" href="#example_111" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var lowerLeft = [40.73083, -73.99756]
var upperRight= [40.741404,  -73.988135]

query.where(&#39;loc&#39;).within().box(lowerLeft, upperRight)
query.box({ ll : lowerLeft, ur : upperRight })
</pre></div>


<hr />
<h3 id="queryprototypecircle"><a href="http://mongoosejs.com#query_Query-circle">Query.prototype.circle()</a><a class="headerlink" href="#queryprototypecircle" title="Permanent link">&para;</a></h3>
<h5 id="parameters_152">Parameters<a class="headerlink" href="#parameters_152" title="Permanent link">&para;</a></h5>
<h5 id="returns_113">Returns:<a class="headerlink" href="#returns_113" title="Permanent link">&para;</a></h5>
<p>Specifies a $center or $centerSphere condition.</p>
<h4 id="example_112">Example<a class="headerlink" href="#example_112" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var area = { center: [50, 50], radius: 10, unique: true }
query.where(&#39;loc&#39;).within().circle(area)

query.circle(&#39;loc&#39;, area);


var area = { center: [50, 50], radius: 10, unique: true, spherical: true }
query.where(&#39;loc&#39;).within().circle(area)

query.circle(&#39;loc&#39;, area);
</pre></div>


<p>New in 3.7.0</p>
<hr />
<h3 id="queryprototypecenter"><a href="http://mongoosejs.com#query_Query-center">Query.prototype.center()</a><a class="headerlink" href="#queryprototypecenter" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="queryprototypecentersphere"><a href="http://mongoosejs.com#query_Query-centerSphere">Query.prototype.centerSphere()</a><a class="headerlink" href="#queryprototypecentersphere" title="Permanent link">&para;</a></h3>
<h5 id="parameters_153">Parameters<a class="headerlink" href="#parameters_153" title="Permanent link">&para;</a></h5>
<h5 id="returns_114">Returns:<a class="headerlink" href="#returns_114" title="Permanent link">&para;</a></h5>
<p><em>DEPRECATED</em> Specifies a $centerSphere condition</p>
<p><strong>Deprecated.</strong> Use <a href="http://mongoosejs.com#query_Query-circle">circle</a> instead.</p>
<h4 id="example_113">Example<a class="headerlink" href="#example_113" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">area</span> <span class="o">=</span> <span class="p">{</span> <span class="n">center</span><span class="p">:</span> <span class="cp">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="cp">]</span><span class="p">,</span> <span class="n">radius</span><span class="o">:</span> <span class="mi">10</span> <span class="p">}</span><span class="o">;</span>
<span class="nt">query</span><span class="p">.</span><span class="nc">where</span><span class="o">(</span><span class="s1">&#39;loc&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">within</span><span class="o">()</span><span class="p">.</span><span class="nc">centerSphere</span><span class="o">(</span><span class="nt">area</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="queryprototypeselected"><a href="http://mongoosejs.com#query_Query-selected">Query.prototype.selected()</a><a class="headerlink" href="#queryprototypeselected" title="Permanent link">&para;</a></h3>
<h5 id="returns_115">Returns:<a class="headerlink" href="#returns_115" title="Permanent link">&para;</a></h5>
<p>Determines if field selection has been made.</p>
<hr />
<h3 id="queryprototypeselectedinclusively"><a href="http://mongoosejs.com#query_Query-selectedInclusively">Query.prototype.selectedInclusively()</a><a class="headerlink" href="#queryprototypeselectedinclusively" title="Permanent link">&para;</a></h3>
<h5 id="returns_116">Returns:<a class="headerlink" href="#returns_116" title="Permanent link">&para;</a></h5>
<p>Determines if inclusive field selection has been made.</p>
<div class="codehilite"><pre><span></span>query.selectedInclusively()
query.select(&#39;name&#39;)
query.selectedInclusively()
</pre></div>


<hr />
<h3 id="queryprototypeselectedexclusively"><a href="http://mongoosejs.com#query_Query-selectedExclusively">Query.prototype.selectedExclusively()</a><a class="headerlink" href="#queryprototypeselectedexclusively" title="Permanent link">&para;</a></h3>
<h5 id="returns_117">Returns:<a class="headerlink" href="#returns_117" title="Permanent link">&para;</a></h5>
<p>Determines if exclusive field selection has been made.</p>
<div class="codehilite"><pre><span></span>query.selectedExclusively()
query.select(&#39;-name&#39;)
query.selectedExclusively()
query.selectedInclusively()
</pre></div>


<hr />
<hr />
<h3 id="aggregate"><a href="http://mongoosejs.com#aggregate_aggregate">Aggregate()</a><a class="headerlink" href="#aggregate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_154">Parameters<a class="headerlink" href="#parameters_154" title="Permanent link">&para;</a></h5>
<ul>
<li>[pipeline] «Array» aggregation pipeline as an array of objects</li>
</ul>
<p>Aggregate constructor used for building aggregation pipelines. Do not instantiate this class directly, use <a href="http://mongoosejs.com/docs/api.html#aggregate_aggregate">Model.aggregate()</a> instead.</p>
<h4 id="example_114">Example:<a class="headerlink" href="#example_114" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>const aggregate = Model.aggregate([
  { $project: { a: 1, b: 1 } },
  { $skip: 5 }
]);

Model.
  aggregate({ $match: { age: { $gte: 21 }}}).
  unwind(&#39;tags&#39;).
  exec(callback);
</pre></div>


<h4 id="note_37">Note:<a class="headerlink" href="#note_37" title="Permanent link">&para;</a></h4>
<ul>
<li>The documents returned are plain javascript objects, not mongoose documents (since any shape of document can be returned).</li>
<li>
<p>Mongoose does <strong>not</strong> cast pipeline stages. The below will <strong>not</strong> work unless <code>_id</code> is a string in the database</p>
<p>new Aggregate([{ $match: { _id: '00000000000000000000000a' } }]);
  // Do this instead to cast to an ObjectId
  new Aggregate([{ $match: { _id: mongoose.Types.ObjectId('00000000000000000000000a') } }]);</p>
</li>
</ul>
<hr />
<h3 id="aggregateprototypemodel"><a href="http://mongoosejs.com#aggregate_aggregate-model">Aggregate.prototype.model()</a><a class="headerlink" href="#aggregateprototypemodel" title="Permanent link">&para;</a></h3>
<h5 id="parameters_155">Parameters<a class="headerlink" href="#parameters_155" title="Permanent link">&para;</a></h5>
<ul>
<li>model «Model» the model to which the aggregate is to be bound</li>
</ul>
<h5 id="returns_118">Returns:<a class="headerlink" href="#returns_118" title="Permanent link">&para;</a></h5>
<p>Binds this aggregate to a model.</p>
<hr />
<h3 id="aggregateprototypeappend"><a href="http://mongoosejs.com#aggregate_aggregate-append">Aggregate.prototype.append()</a><a class="headerlink" href="#aggregateprototypeappend" title="Permanent link">&para;</a></h3>
<h5 id="parameters_156">Parameters<a class="headerlink" href="#parameters_156" title="Permanent link">&para;</a></h5>
<ul>
<li>ops «Object» operator(s) to append</li>
</ul>
<h5 id="returns_119">Returns:<a class="headerlink" href="#returns_119" title="Permanent link">&para;</a></h5>
<p>Appends new operators to this aggregate pipeline</p>
<h4 id="examples_10">Examples:<a class="headerlink" href="#examples_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">append</span><span class="o">(</span><span class="p">{</span> <span class="err">$</span><span class="n">project</span><span class="p">:</span> <span class="err">{</span> <span class="n">field</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span><span class="err">}</span><span class="o">,</span> <span class="p">{</span> <span class="err">$</span><span class="n">limit</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">pipeline</span> <span class="o">=</span> <span class="cp">[</span><span class="p">{</span> <span class="nv">$match</span><span class="p">:</span> <span class="p">{</span> <span class="nx">daw</span><span class="p">:</span> <span class="s1">&#39;Logic Audio X&#39;</span> <span class="p">}}</span> <span class="cp">]</span><span class="o">;</span>
<span class="nt">aggregate</span><span class="p">.</span><span class="nc">append</span><span class="o">(</span><span class="nt">pipeline</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypeaddfields"><a href="http://mongoosejs.com#aggregate_aggregate-addFields">Aggregate.prototype.addFields()</a><a class="headerlink" href="#aggregateprototypeaddfields" title="Permanent link">&para;</a></h3>
<h5 id="parameters_157">Parameters<a class="headerlink" href="#parameters_157" title="Permanent link">&para;</a></h5>
<ul>
<li>arg «Object» field specification</li>
</ul>
<h5 id="returns_120">Returns:<a class="headerlink" href="#returns_120" title="Permanent link">&para;</a></h5>
<p>Appends a new $addFields operator to this aggregate pipeline. Requires MongoDB v3.4+ to work</p>
<h4 id="examples_11">Examples:<a class="headerlink" href="#examples_11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">addFields</span><span class="o">(</span><span class="p">{</span>
    <span class="n">newField</span><span class="p">:</span> <span class="s1">&#39;$b.nested&#39;</span>
  <span class="p">,</span> <span class="n">plusTen</span><span class="o">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">add</span><span class="o">:</span> <span class="cp">[</span><span class="s1">&#39;$val&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">}</span>
  <span class="o">,</span> <span class="nt">sub</span><span class="o">:</span> <span class="p">{</span>
       <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;$a&#39;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">)</span>


<span class="nt">aggregate</span><span class="p">.</span><span class="nc">addFields</span><span class="o">(</span><span class="p">{</span> <span class="n">salary_k</span><span class="p">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">divide</span><span class="o">:</span> <span class="cp">[</span> <span class="s2">&quot;$salary&quot;</span><span class="p">,</span> <span class="mi">1000</span> <span class="cp">]</span> <span class="p">}</span> <span class="err">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypeproject"><a href="http://mongoosejs.com#aggregate_aggregate-project">Aggregate.prototype.project()</a><a class="headerlink" href="#aggregateprototypeproject" title="Permanent link">&para;</a></h3>
<h5 id="parameters_158">Parameters<a class="headerlink" href="#parameters_158" title="Permanent link">&para;</a></h5>
<ul>
<li>arg «Object,String» field specification</li>
</ul>
<h5 id="returns_121">Returns:<a class="headerlink" href="#returns_121" title="Permanent link">&para;</a></h5>
<p>Appends a new $project operator to this aggregate pipeline.</p>
<p>Mongoose query <a href="http://mongoosejs.com#query_Query-select">selection syntax</a> is also supported.</p>
<h4 id="examples_12">Examples:<a class="headerlink" href="#examples_12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">project</span><span class="o">(</span><span class="s2">&quot;a b -_id&quot;</span><span class="o">);</span>



<span class="nt">aggregate</span><span class="p">.</span><span class="nc">project</span><span class="o">(</span><span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">_id</span><span class="o">:</span> <span class="mi">0</span><span class="p">}</span><span class="o">);</span>


<span class="nt">aggregate</span><span class="p">.</span><span class="nc">project</span><span class="o">(</span><span class="p">{</span>
    <span class="n">newField</span><span class="p">:</span> <span class="s1">&#39;$b.nested&#39;</span>
  <span class="p">,</span> <span class="n">plusTen</span><span class="o">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">add</span><span class="o">:</span> <span class="cp">[</span><span class="s1">&#39;$val&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span><span class="p">}</span>
  <span class="o">,</span> <span class="nt">sub</span><span class="o">:</span> <span class="p">{</span>
       <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;$a&#39;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">)</span>


<span class="nt">aggregate</span><span class="p">.</span><span class="nc">project</span><span class="o">(</span><span class="p">{</span> <span class="n">salary_k</span><span class="p">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">divide</span><span class="o">:</span> <span class="cp">[</span> <span class="s2">&quot;$salary&quot;</span><span class="p">,</span> <span class="mi">1000</span> <span class="cp">]</span> <span class="p">}</span> <span class="err">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypegroup"><a href="http://mongoosejs.com#aggregate_aggregate-group">Aggregate.prototype.group()</a><a class="headerlink" href="#aggregateprototypegroup" title="Permanent link">&para;</a></h3>
<h5 id="parameters_159">Parameters<a class="headerlink" href="#parameters_159" title="Permanent link">&para;</a></h5>
<ul>
<li>arg «Object» $group operator contents</li>
</ul>
<h5 id="returns_122">Returns:<a class="headerlink" href="#returns_122" title="Permanent link">&para;</a></h5>
<p>Appends a new custom $group operator to this aggregate pipeline.</p>
<h4 id="examples_13">Examples:<a class="headerlink" href="#examples_13" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">group</span><span class="o">(</span><span class="p">{</span> <span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;$department&quot;</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypematch"><a href="http://mongoosejs.com#aggregate_aggregate-match">Aggregate.prototype.match()</a><a class="headerlink" href="#aggregateprototypematch" title="Permanent link">&para;</a></h3>
<h5 id="parameters_160">Parameters<a class="headerlink" href="#parameters_160" title="Permanent link">&para;</a></h5>
<ul>
<li>arg «Object» $match operator contents</li>
</ul>
<h5 id="returns_123">Returns:<a class="headerlink" href="#returns_123" title="Permanent link">&para;</a></h5>
<p>Appends a new custom $match operator to this aggregate pipeline.</p>
<h4 id="examples_14">Examples:<a class="headerlink" href="#examples_14" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">match</span><span class="o">(</span><span class="p">{</span> <span class="n">department</span><span class="p">:</span> <span class="err">{</span> <span class="err">$</span><span class="n">in</span><span class="o">:</span> <span class="cp">[</span> <span class="s2">&quot;sales&quot;</span><span class="p">,</span> <span class="s2">&quot;engineering&quot;</span> <span class="cp">]</span> <span class="p">}</span> <span class="err">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypeskip"><a href="http://mongoosejs.com#aggregate_aggregate-skip">Aggregate.prototype.skip()</a><a class="headerlink" href="#aggregateprototypeskip" title="Permanent link">&para;</a></h3>
<h5 id="parameters_161">Parameters<a class="headerlink" href="#parameters_161" title="Permanent link">&para;</a></h5>
<ul>
<li>num «Number» number of records to skip before next stage</li>
</ul>
<h5 id="returns_124">Returns:<a class="headerlink" href="#returns_124" title="Permanent link">&para;</a></h5>
<p>Appends a new $skip operator to this aggregate pipeline.</p>
<h4 id="examples_15">Examples:<a class="headerlink" href="#examples_15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>aggregate.skip(10);
</pre></div>


<hr />
<h3 id="aggregateprototypelimit"><a href="http://mongoosejs.com#aggregate_aggregate-limit">Aggregate.prototype.limit()</a><a class="headerlink" href="#aggregateprototypelimit" title="Permanent link">&para;</a></h3>
<h5 id="parameters_162">Parameters<a class="headerlink" href="#parameters_162" title="Permanent link">&para;</a></h5>
<ul>
<li>num «Number» maximum number of records to pass to the next stage</li>
</ul>
<h5 id="returns_125">Returns:<a class="headerlink" href="#returns_125" title="Permanent link">&para;</a></h5>
<p>Appends a new $limit operator to this aggregate pipeline.</p>
<h4 id="examples_16">Examples:<a class="headerlink" href="#examples_16" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>aggregate.limit(10);
</pre></div>


<hr />
<h3 id="aggregateprototypenear"><a href="http://mongoosejs.com#aggregate_aggregate-near">Aggregate.prototype.near()</a><a class="headerlink" href="#aggregateprototypenear" title="Permanent link">&para;</a></h3>
<h5 id="parameters_163">Parameters<a class="headerlink" href="#parameters_163" title="Permanent link">&para;</a></h5>
<h5 id="returns_126">Returns:<a class="headerlink" href="#returns_126" title="Permanent link">&para;</a></h5>
<p>Appends a new $geoNear operator to this aggregate pipeline.</p>
<h4 id="note_38">NOTE:<a class="headerlink" href="#note_38" title="Permanent link">&para;</a></h4>
<p><strong>MUST</strong> be used as the first operator in the pipeline.</p>
<h4 id="examples_17">Examples:<a class="headerlink" href="#examples_17" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>aggregate.near({
  near: [40.724, -73.997],
  distanceField: &quot;dist.calculated&quot;,
  maxDistance: 0.008,
  query: { type: &quot;public&quot; },
  includeLocs: &quot;dist.location&quot;,
  uniqueDocs: true,
  num: 5
});
</pre></div>


<hr />
<h3 id="aggregateprototypeunwind"><a href="http://mongoosejs.com#aggregate_aggregate-unwind">Aggregate.prototype.unwind()</a><a class="headerlink" href="#aggregateprototypeunwind" title="Permanent link">&para;</a></h3>
<h5 id="parameters_164">Parameters<a class="headerlink" href="#parameters_164" title="Permanent link">&para;</a></h5>
<ul>
<li>fields «String» the field(s) to unwind</li>
</ul>
<h5 id="returns_127">Returns:<a class="headerlink" href="#returns_127" title="Permanent link">&para;</a></h5>
<p>Appends new custom $unwind operator(s) to this aggregate pipeline.</p>
<p>Note that the <code>$unwind</code> operator requires the path name to start with '$'. Mongoose will prepend '$' if the specified field doesn't start '$'.</p>
<h4 id="examples_18">Examples:<a class="headerlink" href="#examples_18" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>aggregate.unwind(&quot;tags&quot;);
aggregate.unwind(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
</pre></div>


<hr />
<h3 id="aggregateprototypelookup"><a href="http://mongoosejs.com#aggregate_aggregate-lookup">Aggregate.prototype.lookup()</a><a class="headerlink" href="#aggregateprototypelookup" title="Permanent link">&para;</a></h3>
<h5 id="parameters_165">Parameters<a class="headerlink" href="#parameters_165" title="Permanent link">&para;</a></h5>
<ul>
<li>options «Object» to $lookup as described in the above link</li>
</ul>
<h5 id="returns_128">Returns:<a class="headerlink" href="#returns_128" title="Permanent link">&para;</a></h5>
<p>Appends new custom $lookup operator(s) to this aggregate pipeline.</p>
<h4 id="examples_19">Examples:<a class="headerlink" href="#examples_19" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">lookup</span><span class="o">(</span><span class="p">{</span> <span class="n">from</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">localField</span><span class="o">:</span> <span class="s1">&#39;userId&#39;</span><span class="p">,</span> <span class="n">foreignField</span><span class="o">:</span> <span class="s1">&#39;_id&#39;</span><span class="p">,</span> <span class="n">as</span><span class="o">:</span> <span class="s1">&#39;users&#39;</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypegraphlookup"><a href="http://mongoosejs.com#aggregate_aggregate-graphLookup">Aggregate.prototype.graphLookup()</a><a class="headerlink" href="#aggregateprototypegraphlookup" title="Permanent link">&para;</a></h3>
<h5 id="parameters_166">Parameters<a class="headerlink" href="#parameters_166" title="Permanent link">&para;</a></h5>
<ul>
<li>options «Object» to $graphLookup as described in the above link</li>
</ul>
<h5 id="returns_129">Returns:<a class="headerlink" href="#returns_129" title="Permanent link">&para;</a></h5>
<p>Appends new custom $graphLookup operator(s) to this aggregate pipeline, performing a recursive search on a collection.</p>
<p>Note that graphLookup can only consume at most 100MB of memory, and does not allow disk use even if <code>{ allowDiskUse: true }</code> is specified.</p>
<h4 id="examples_20">Examples:<a class="headerlink" href="#examples_20" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span> aggregate.graphLookup({ from: &#39;courses&#39;, startWith: &#39;$prerequisite&#39;, connectFromField: &#39;prerequisite&#39;, connectToField: &#39;name&#39;, as: &#39;prerequisites&#39;, maxDepth: 3 })
</pre></div>


<hr />
<h3 id="aggregateprototypesample"><a href="http://mongoosejs.com#aggregate_aggregate-sample">Aggregate.prototype.sample()</a><a class="headerlink" href="#aggregateprototypesample" title="Permanent link">&para;</a></h3>
<h5 id="parameters_167">Parameters<a class="headerlink" href="#parameters_167" title="Permanent link">&para;</a></h5>
<ul>
<li>size «Number» number of random documents to pick</li>
</ul>
<h5 id="returns_130">Returns:<a class="headerlink" href="#returns_130" title="Permanent link">&para;</a></h5>
<p>Appepnds new custom $sample operator(s) to this aggregate pipeline.</p>
<h4 id="examples_21">Examples:<a class="headerlink" href="#examples_21" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>aggregate.sample(3);
</pre></div>


<hr />
<h3 id="aggregateprototypesort"><a href="http://mongoosejs.com#aggregate_aggregate-sort">Aggregate.prototype.sort()</a><a class="headerlink" href="#aggregateprototypesort" title="Permanent link">&para;</a></h3>
<h5 id="parameters_168">Parameters<a class="headerlink" href="#parameters_168" title="Permanent link">&para;</a></h5>
<h5 id="returns_131">Returns:<a class="headerlink" href="#returns_131" title="Permanent link">&para;</a></h5>
<p>Appends a new $sort operator to this aggregate pipeline.</p>
<p>If an object is passed, values allowed are <code>asc</code>, <code>desc</code>, <code>ascending</code>, <code>descending</code>, <code>1</code>, and <code>-1</code>.</p>
<p>If a string is passed, it must be a space delimited list of path names. The sort order of each path is ascending unless the path name is prefixed with <code>-</code> which will be treated as descending.</p>
<h4 id="examples_22">Examples:<a class="headerlink" href="#examples_22" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">aggregate</span><span class="p">.</span><span class="nc">sort</span><span class="o">(</span><span class="p">{</span> <span class="n">field</span><span class="p">:</span> <span class="s1">&#39;asc&#39;</span><span class="p">,</span> <span class="n">test</span><span class="o">:</span> <span class="mi">-1</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">aggregate</span><span class="p">.</span><span class="nc">sort</span><span class="o">(</span><span class="s1">&#39;field -test&#39;</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototyperead"><a href="http://mongoosejs.com#aggregate_aggregate-read">Aggregate.prototype.read()</a><a class="headerlink" href="#aggregateprototyperead" title="Permanent link">&para;</a></h3>
<h5 id="parameters_169">Parameters<a class="headerlink" href="#parameters_169" title="Permanent link">&para;</a></h5>
<ul>
<li>[tags] «Array» optional tags for this query</li>
</ul>
<p>Sets the readPreference option for the aggregation query.</p>
<h4 id="example_115">Example:<a class="headerlink" href="#example_115" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.aggregate(..).read(&#39;primaryPreferred&#39;).exec(callback)
</pre></div>


<hr />
<h3 id="aggregateprototypeexplain"><a href="http://mongoosejs.com#aggregate_aggregate-explain">Aggregate.prototype.explain()</a><a class="headerlink" href="#aggregateprototypeexplain" title="Permanent link">&para;</a></h3>
<h5 id="parameters_170">Parameters<a class="headerlink" href="#parameters_170" title="Permanent link">&para;</a></h5>
<h5 id="returns_132">Returns:<a class="headerlink" href="#returns_132" title="Permanent link">&para;</a></h5>
<p>Execute the aggregation with explain</p>
<h4 id="example_116">Example:<a class="headerlink" href="#example_116" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.aggregate(..).explain(callback)
</pre></div>


<hr />
<h3 id="aggregateprototypeallowdiskuse"><a href="http://mongoosejs.com#aggregate_aggregate-allowDiskUse">Aggregate.prototype.allowDiskUse()</a><a class="headerlink" href="#aggregateprototypeallowdiskuse" title="Permanent link">&para;</a></h3>
<h5 id="parameters_171">Parameters<a class="headerlink" href="#parameters_171" title="Permanent link">&para;</a></h5>
<ul>
<li>[tags] «Array» optional tags for this query</li>
</ul>
<p>Sets the allowDiskUse option for the aggregation query (ignored for &lt; 2.6.0)</p>
<h4 id="example_117">Example:<a class="headerlink" href="#example_117" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.aggregate(..).allowDiskUse(true).exec(callback)
</pre></div>


<hr />
<h3 id="aggregateprototypeoption"><a href="http://mongoosejs.com#aggregate_aggregate-option">Aggregate.prototype.option()</a><a class="headerlink" href="#aggregateprototypeoption" title="Permanent link">&para;</a></h3>
<h5 id="parameters_172">Parameters<a class="headerlink" href="#parameters_172" title="Permanent link">&para;</a></h5>
<ul>
<li>value «Object» keys to merge into current options</li>
</ul>
<h5 id="returns_133">Returns:<a class="headerlink" href="#returns_133" title="Permanent link">&para;</a></h5>
<p>Lets you set arbitrary options, for middleware or plugins.</p>
<h4 id="example_118">Example:<a class="headerlink" href="#example_118" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">agg</span> <span class="o">=</span> <span class="nt">Model</span><span class="p">.</span><span class="nc">aggregate</span><span class="o">(..)</span><span class="p">.</span><span class="nc">option</span><span class="o">(</span><span class="p">{</span> <span class="n">allowDiskUse</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">agg</span><span class="p">.</span><span class="nc">options</span><span class="o">;</span>
</pre></div>


<hr />
<h3 id="aggregateprototypecursor"><a href="http://mongoosejs.com#aggregate_aggregate-cursor">Aggregate.prototype.cursor()</a><a class="headerlink" href="#aggregateprototypecursor" title="Permanent link">&para;</a></h3>
<h5 id="parameters_173">Parameters<a class="headerlink" href="#parameters_173" title="Permanent link">&para;</a></h5>
<ul>
<li>[options.useMongooseAggCursor] «Boolean» use experimental mongoose-specific aggregation cursor (for <code>eachAsync()</code> and other query cursor semantics)</li>
</ul>
<p>Sets the cursor option option for the aggregation query (ignored for &lt; 2.6.0). Note the different syntax below: .exec() returns a cursor object, and no callback is necessary.</p>
<h4 id="example_119">Example:<a class="headerlink" href="#example_119" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">cursor</span> <span class="o">=</span> <span class="nt">Model</span><span class="p">.</span><span class="nc">aggregate</span><span class="o">(..)</span><span class="p">.</span><span class="nc">cursor</span><span class="o">(</span><span class="p">{</span> <span class="n">batchSize</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">();</span>
<span class="nt">cursor</span><span class="p">.</span><span class="nc">each</span><span class="o">(</span><span class="nt">function</span><span class="o">(</span><span class="nt">error</span><span class="o">,</span> <span class="nt">doc</span><span class="o">)</span> <span class="p">{</span>

<span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="aggregateprototypeaddcursorflag"><a href="http://mongoosejs.com#aggregate_aggregate-addCursorFlag">Aggregate.prototype.addCursorFlag()</a><a class="headerlink" href="#aggregateprototypeaddcursorflag" title="Permanent link">&para;</a></h3>
<h5 id="parameters_174">Parameters<a class="headerlink" href="#parameters_174" title="Permanent link">&para;</a></h5>
<p>Adds a <a href="http://mongodb.github.io/node-mongodb-native/2.2/api/Cursor.html#addCursorFlag">cursor flag</a></p>
<h4 id="example_120">Example:<a class="headerlink" href="#example_120" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.aggregate(..).addCursorFlag(&#39;noCursorTimeout&#39;, true).exec();
</pre></div>


<hr />
<h3 id="aggregateprototypecollation"><a href="http://mongoosejs.com#aggregate_aggregate-collation">Aggregate.prototype.collation()</a><a class="headerlink" href="#aggregateprototypecollation" title="Permanent link">&para;</a></h3>
<h5 id="parameters_175">Parameters<a class="headerlink" href="#parameters_175" title="Permanent link">&para;</a></h5>
<p>Adds a collation</p>
<h4 id="example_121">Example:<a class="headerlink" href="#example_121" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">Model</span><span class="p">.</span><span class="nc">aggregate</span><span class="o">(..)</span><span class="p">.</span><span class="nc">collation</span><span class="o">(</span><span class="p">{</span> <span class="n">locale</span><span class="p">:</span> <span class="s1">&#39;en_US&#39;</span><span class="p">,</span> <span class="n">strength</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">();</span>
</pre></div>


<hr />
<h3 id="aggregateprototypefacet"><a href="http://mongoosejs.com#aggregate_aggregate-facet">Aggregate.prototype.facet()</a><a class="headerlink" href="#aggregateprototypefacet" title="Permanent link">&para;</a></h3>
<h5 id="parameters_176">Parameters<a class="headerlink" href="#parameters_176" title="Permanent link">&para;</a></h5>
<h5 id="returns_134">Returns:<a class="headerlink" href="#returns_134" title="Permanent link">&para;</a></h5>
<p>Combines multiple aggregation pipelines.</p>
<h4 id="example_122">Example:<a class="headerlink" href="#example_122" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.aggregate(...)
 .facet({
   books: [{ groupBy: &#39;$author&#39; }],
   price: [{ $bucketAuto: { groupBy: &#39;$price&#39;, buckets: 2 } }]
 })
 .exec();
</pre></div>


<hr />
<h3 id="aggregateprototypepipeline"><a href="http://mongoosejs.com#aggregate_aggregate-pipeline">Aggregate.prototype.pipeline()</a><a class="headerlink" href="#aggregateprototypepipeline" title="Permanent link">&para;</a></h3>
<h5 id="returns_135">Returns:<a class="headerlink" href="#returns_135" title="Permanent link">&para;</a></h5>
<p>Returns the current pipeline</p>
<h4 id="example_123">Example:<a class="headerlink" href="#example_123" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">MyModel</span><span class="p">.</span><span class="nc">aggregate</span><span class="o">()</span><span class="p">.</span><span class="nc">match</span><span class="o">(</span><span class="p">{</span> <span class="n">test</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">pipeline</span><span class="o">();</span>
</pre></div>


<hr />
<h3 id="aggregateprototypeexec"><a href="http://mongoosejs.com#aggregate_aggregate-exec">Aggregate.prototype.exec()</a><a class="headerlink" href="#aggregateprototypeexec" title="Permanent link">&para;</a></h3>
<h5 id="parameters_177">Parameters<a class="headerlink" href="#parameters_177" title="Permanent link">&para;</a></h5>
<h5 id="returns_136">Returns:<a class="headerlink" href="#returns_136" title="Permanent link">&para;</a></h5>
<p>Executes the aggregate pipeline on the currently bound Model.</p>
<h4 id="example_124">Example:<a class="headerlink" href="#example_124" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>aggregate.exec(callback);


var promise = aggregate.exec();
promise.then(..);
</pre></div>


<hr />
<h3 id="aggregateprototypethen"><a href="http://mongoosejs.com#aggregate_aggregate-then">Aggregate.prototype.then()</a><a class="headerlink" href="#aggregateprototypethen" title="Permanent link">&para;</a></h3>
<h5 id="parameters_178">Parameters<a class="headerlink" href="#parameters_178" title="Permanent link">&para;</a></h5>
<ul>
<li>[reject] «Function» errorCallback</li>
</ul>
<h5 id="returns_137">Returns:<a class="headerlink" href="#returns_137" title="Permanent link">&para;</a></h5>
<p>Provides promise for aggregate.</p>
<h4 id="example_125">Example:<a class="headerlink" href="#example_125" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>Model.aggregate(..).then(successCallback, errorCallback);
</pre></div>


<hr />
<hr />
<h3 id="schematype"><a href="http://mongoosejs.com#schematype_SchemaType">SchemaType()</a><a class="headerlink" href="#schematype" title="Permanent link">&para;</a></h3>
<h5 id="parameters_179">Parameters<a class="headerlink" href="#parameters_179" title="Permanent link">&para;</a></h5>
<p>SchemaType constructor. Do <strong>not</strong> instantiate <code>SchemaType</code> directly. Mongoose converts your schema paths into SchemaTypes automatically.</p>
<h4 id="example_126">Example:<a class="headerlink" href="#example_126" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">const</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span> <span class="nt">instanceof</span> <span class="nt">SchemaType</span><span class="o">;</span>
</pre></div>


<hr />
<h3 id="schematypeprototypedefault"><a href="http://mongoosejs.com#schematype_SchemaType-default">SchemaType.prototype.default()</a><a class="headerlink" href="#schematypeprototypedefault" title="Permanent link">&para;</a></h3>
<h5 id="parameters_180">Parameters<a class="headerlink" href="#parameters_180" title="Permanent link">&para;</a></h5>
<ul>
<li>val «Function,any» the default value</li>
</ul>
<h5 id="returns_138">Returns:<a class="headerlink" href="#returns_138" title="Permanent link">&para;</a></h5>
<p>Sets a default value for this SchemaType.</p>
<h4 id="example_127">Example:<a class="headerlink" href="#example_127" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var schema = new Schema({ n: { type: Number, default: 10 })
var M = db.model(&#39;M&#39;, schema)
var m = new M;
console.log(m.n)
</pre></div>


<p>Defaults can be either <code>functions</code> which return the value to use as the default or the literal value itself. Either way, the value will be cast based on its schema type before being set during document creation.</p>
<h4 id="example_128">Example:<a class="headerlink" href="#example_128" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">aNumber</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">Number</span><span class="p">,</span> <span class="kc">default</span><span class="o">:</span> <span class="mf">4.815162342</span> <span class="p">}</span><span class="err">}</span><span class="o">)</span>
<span class="nt">var</span> <span class="nt">M</span> <span class="o">=</span> <span class="nt">db</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;M&#39;</span><span class="o">,</span> <span class="nt">schema</span><span class="o">)</span>
<span class="nt">var</span> <span class="nt">m</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">M</span><span class="o">;</span>
<span class="nt">console</span><span class="p">.</span><span class="nc">log</span><span class="o">(</span><span class="nt">m</span><span class="p">.</span><span class="nc">aNumber</span><span class="o">)</span>


<span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">mixed</span><span class="p">:</span> <span class="n">Schema</span><span class="o">.</span><span class="n">Types</span><span class="o">.</span><span class="n">Mixed</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;mixed&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">default</span><span class="o">(</span><span class="nt">function</span> <span class="o">()</span> <span class="p">{</span>
  <span class="err">return</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
<span class="err">}</span><span class="o">);</span>




<span class="nt">var</span> <span class="nt">schema</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">mixed</span><span class="p">:</span> <span class="n">Schema</span><span class="o">.</span><span class="n">Types</span><span class="o">.</span><span class="n">Mixed</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;mixed&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">default</span><span class="o">(</span><span class="p">{}</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">M</span> <span class="o">=</span> <span class="nt">db</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;M&#39;</span><span class="o">,</span> <span class="nt">schema</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">m1</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">M</span><span class="o">;</span>
<span class="nt">m1</span><span class="p">.</span><span class="nc">mixed</span><span class="p">.</span><span class="nc">added</span> <span class="o">=</span> <span class="nt">1</span><span class="o">;</span>
<span class="nt">console</span><span class="p">.</span><span class="nc">log</span><span class="o">(</span><span class="nt">m1</span><span class="p">.</span><span class="nc">mixed</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">m2</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">M</span><span class="o">;</span>
<span class="nt">console</span><span class="p">.</span><span class="nc">log</span><span class="o">(</span><span class="nt">m2</span><span class="p">.</span><span class="nc">mixed</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="schematypeprototypeindex"><a href="http://mongoosejs.com#schematype_SchemaType-index">SchemaType.prototype.index()</a><a class="headerlink" href="#schematypeprototypeindex" title="Permanent link">&para;</a></h3>
<h5 id="parameters_181">Parameters<a class="headerlink" href="#parameters_181" title="Permanent link">&para;</a></h5>
<ul>
<li>options «Object,Boolean,String»</li>
</ul>
<h5 id="returns_139">Returns:<a class="headerlink" href="#returns_139" title="Permanent link">&para;</a></h5>
<p>Declares the index options for this schematype.</p>
<h4 id="example_129">Example:<a class="headerlink" href="#example_129" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">index</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">loc</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="cp">[</span><span class="nx">Number</span><span class="cp">]</span><span class="p">,</span> <span class="n">index</span><span class="o">:</span> <span class="s1">&#39;hashed&#39;</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">loc</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="cp">[</span><span class="nx">Number</span><span class="cp">]</span><span class="p">,</span> <span class="n">index</span><span class="o">:</span> <span class="s1">&#39;2d&#39;</span><span class="p">,</span> <span class="n">sparse</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">loc</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="cp">[</span><span class="nx">Number</span><span class="cp">]</span><span class="p">,</span> <span class="n">index</span><span class="o">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="s1">&#39;2dsphere&#39;</span><span class="p">,</span> <span class="n">sparse</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="err">}</span><span class="o">)</span>
<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">date</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">Date</span><span class="p">,</span> <span class="n">index</span><span class="o">:</span> <span class="err">{</span> <span class="n">unique</span><span class="o">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">expires</span><span class="o">:</span> <span class="s1">&#39;1d&#39;</span> <span class="p">}</span><span class="err">}</span><span class="o">)</span>
<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;my.path&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">index</span><span class="o">(</span><span class="nt">true</span><span class="o">);</span>
<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;my.date&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">index</span><span class="o">(</span><span class="p">{</span> <span class="n">expires</span><span class="p">:</span> <span class="mi">60</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;my.path&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">index</span><span class="o">(</span><span class="p">{</span> <span class="n">unique</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">sparse</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<h4 id="note_39">NOTE:<a class="headerlink" href="#note_39" title="Permanent link">&para;</a></h4>
<p><em>Indexes are created in the background by default. Specify <code>background: false</code> to override.</em></p>
<p><a href="http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeysIndexes">Direction doesn't matter for single key indexes</a></p>
<hr />
<h3 id="schematypeprototypeunique"><a href="http://mongoosejs.com#schematype_SchemaType-unique">SchemaType.prototype.unique()</a><a class="headerlink" href="#schematypeprototypeunique" title="Permanent link">&para;</a></h3>
<h5 id="parameters_182">Parameters<a class="headerlink" href="#parameters_182" title="Permanent link">&para;</a></h5>
<h5 id="returns_140">Returns:<a class="headerlink" href="#returns_140" title="Permanent link">&para;</a></h5>
<p>Declares an unique index.</p>
<h4 id="example_130">Example:<a class="headerlink" href="#example_130" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="err">}</span><span class="o">);</span>
<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">index</span><span class="o">(</span><span class="p">{</span> <span class="n">unique</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<p><em>NOTE: violating the constraint returns an <code>E11000</code> error from MongoDB when saving, not a Mongoose validation error.</em></p>
<hr />
<h3 id="schematypeprototypetext"><a href="http://mongoosejs.com#schematype_SchemaType-text">SchemaType.prototype.text()</a><a class="headerlink" href="#schematypeprototypetext" title="Permanent link">&para;</a></h3>
<h5 id="parameters_183">Parameters<a class="headerlink" href="#parameters_183" title="Permanent link">&para;</a></h5>
<h5 id="returns_141">Returns:<a class="headerlink" href="#returns_141" title="Permanent link">&para;</a></h5>
<p>Declares a full text index.</p>
<h3 id="example_131">Example:<a class="headerlink" href="#example_131" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>var s = new Schema({name : {type: String, text : true })
 Schema.path(&#39;name&#39;).index({text : true});
</pre></div>


<hr />
<h3 id="schematypeprototypesparse"><a href="http://mongoosejs.com#schematype_SchemaType-sparse">SchemaType.prototype.sparse()</a><a class="headerlink" href="#schematypeprototypesparse" title="Permanent link">&para;</a></h3>
<h5 id="parameters_184">Parameters<a class="headerlink" href="#parameters_184" title="Permanent link">&para;</a></h5>
<h5 id="returns_142">Returns:<a class="headerlink" href="#returns_142" title="Permanent link">&para;</a></h5>
<p>Declares a sparse index.</p>
<h4 id="example_132">Example:<a class="headerlink" href="#example_132" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">sparse</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>
<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">index</span><span class="o">(</span><span class="p">{</span> <span class="n">sparse</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">);</span>
</pre></div>


<hr />
<h3 id="schematypeprototypeset"><a href="http://mongoosejs.com#schematype_SchemaType-set">SchemaType.prototype.set()</a><a class="headerlink" href="#schematypeprototypeset" title="Permanent link">&para;</a></h3>
<h5 id="parameters_185">Parameters<a class="headerlink" href="#parameters_185" title="Permanent link">&para;</a></h5>
<h5 id="returns_143">Returns:<a class="headerlink" href="#returns_143" title="Permanent link">&para;</a></h5>
<p>Adds a setter to this schematype.</p>
<h4 id="example_133">Example:<a class="headerlink" href="#example_133" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">capitalize</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">val</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="nx">val</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">val</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>


<span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">set</span>: <span class="kt">capitalize</span> <span class="p">}})</span>


<span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">name</span>: <span class="kt">String</span> <span class="p">})</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="nx">capitalize</span><span class="p">)</span>
</pre></div>


<p>Setters allow you to transform the data before it gets to the raw mongodb document and is set as a value on an actual key.</p>
<p>Suppose you are implementing user registration for a website. Users provide an email and password, which gets saved to mongodb. The email is a string that you will want to normalize to lower case, in order to avoid one email having more than one account -- e.g., otherwise, <a href="mailto:avenue%40q.com">avenue@q.com</a> can be registered for 2 accounts via <a href="mailto:avenue%40q.com">avenue@q.com</a> and <a href="mailto:avenue%40q.com">AvEnUe@Q.CoM</a>.</p>
<p>You can set up email lower case normalization easily via a Mongoose setter.</p>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">toLower</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">UserSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
  <span class="nx">email</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">set</span>: <span class="kt">toLower</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">User</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="nx">UserSchema</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">({</span><span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;[AVENUE@Q.COM][271]&#39;</span><span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span> <span class="c1">// &#39;[avenue@q.com][271]&#39;</span>

<span class="c1">// or</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="s1">&#39;[Avenue@Q.com][271]&#39;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span> <span class="c1">// &#39;[avenue@q.com][271]&#39;</span>
<span class="nx">User</span><span class="p">.</span><span class="nx">updateOne</span><span class="p">({</span> <span class="nx">_id</span>: <span class="kt">_id</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span> <span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;[AVENUE@Q.COM][271]&#39;</span> <span class="p">}</span> <span class="p">});</span> <span class="c1">// update to &#39;[avenue@q.com][271]&#39;</span>
</pre></div>


<p>As you can see above, setters allow you to transform the data before it stored in MongoDB.</p>
<p><em>NOTE: we could have also just used the built-in <code>lowercase: true</code> SchemaType option instead of defining our own function.</em></p>
<div class="codehilite"><pre><span></span>new Schema({ email: { type: String, lowercase: true }})
</pre></div>


<p>Setters are also passed a second argument, the schematype on which the setter was defined. This allows for tailored behavior based on options passed in the schema.</p>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">inspector</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">schematype</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">schematype</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">schematype</span><span class="p">.</span><span class="nx">path</span> <span class="o">+</span> <span class="s1">&#39; is required&#39;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">VirusSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">required</span>: <span class="kt">true</span><span class="p">,</span> <span class="nx">set</span>: <span class="kt">inspector</span> <span class="p">},</span>
  <span class="nx">taxonomy</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">set</span>: <span class="kt">inspector</span> <span class="p">}</span>
<span class="p">})</span>

<span class="kd">var</span> <span class="nx">Virus</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;Virus&#39;</span><span class="p">,</span> <span class="nx">VirusSchema</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Virus</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Parvoviridae&#39;</span><span class="p">,</span> <span class="nx">taxonomy</span><span class="o">:</span> <span class="s1">&#39;Parvovirinae&#39;</span> <span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">taxonomy</span><span class="p">);</span>
</pre></div>


<hr />
<h3 id="schematypeprototypeget"><a href="http://mongoosejs.com#schematype_SchemaType-get">SchemaType.prototype.get()</a><a class="headerlink" href="#schematypeprototypeget" title="Permanent link">&para;</a></h3>
<h5 id="parameters_186">Parameters<a class="headerlink" href="#parameters_186" title="Permanent link">&para;</a></h5>
<h5 id="returns_144">Returns:<a class="headerlink" href="#returns_144" title="Permanent link">&para;</a></h5>
<p>Adds a getter to this schematype.</p>
<h4 id="example_134">Example:<a class="headerlink" href="#example_134" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">dob</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">val</span><span class="p">)</span> <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
<span class="p">}</span>


<span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">born</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">Date</span><span class="p">,</span> <span class="nx">get</span>: <span class="kt">dob</span> <span class="p">})</span>


<span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">born</span>: <span class="kt">Date</span> <span class="p">})</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">&#39;born&#39;</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="nx">dob</span><span class="p">)</span>
</pre></div>


<p>Getters allow you to transform the representation of the data as it travels from the raw mongodb document to the value that you see.</p>
<p>Suppose you are storing credit card numbers and you want to hide everything except the last 4 digits to the mongoose user. You can do so by defining a getter in the following way:</p>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">obfuscate</span> <span class="p">(</span><span class="nx">cc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">&#39;****-****-****-&#39;</span> <span class="o">+</span> <span class="nx">cc</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">cc</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="nx">cc</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">AccountSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
  <span class="nx">creditCardNumber</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">get</span>: <span class="kt">obfuscate</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">Account</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;Account&#39;</span><span class="p">,</span> <span class="nx">AccountSchema</span><span class="p">);</span>

<span class="nx">Account</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">found</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">found</span><span class="p">.</span><span class="nx">creditCardNumber</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<p>Getters are also passed a second argument, the schematype on which the getter was defined. This allows for tailored behavior based on options passed in the schema.</p>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">inspector</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">schematype</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">schematype</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">schematype</span><span class="p">.</span><span class="nx">path</span> <span class="o">+</span> <span class="s1">&#39; is required&#39;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">schematype</span><span class="p">.</span><span class="nx">path</span> <span class="o">+</span> <span class="s1">&#39; is not&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">VirusSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">required</span>: <span class="kt">true</span><span class="p">,</span> <span class="nx">get</span>: <span class="kt">inspector</span> <span class="p">},</span>
  <span class="nx">taxonomy</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">get</span>: <span class="kt">inspector</span> <span class="p">}</span>
<span class="p">})</span>

<span class="kd">var</span> <span class="nx">Virus</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;Virus&#39;</span><span class="p">,</span> <span class="nx">VirusSchema</span><span class="p">);</span>

<span class="nx">Virus</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">virus</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">virus</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">virus</span><span class="p">.</span><span class="nx">taxonomy</span><span class="p">);</span>
<span class="p">})</span>
</pre></div>


<hr />
<h3 id="schematypeprototypevalidate"><a href="http://mongoosejs.com#schematype_SchemaType-validate">SchemaType.prototype.validate()</a><a class="headerlink" href="#schematypeprototypevalidate" title="Permanent link">&para;</a></h3>
<h5 id="parameters_187">Parameters<a class="headerlink" href="#parameters_187" title="Permanent link">&para;</a></h5>
<ul>
<li>[type] «String» optional validator type</li>
</ul>
<h5 id="returns_145">Returns:<a class="headerlink" href="#returns_145" title="Permanent link">&para;</a></h5>
<p>Adds validator(s) for this document path.</p>
<p>Validators always receive the value to validate as their first argument and must return <code>Boolean</code>. Returning <code>false</code> means validation failed.</p>
<p>The error message argument is optional. If not passed, the <a href="http://mongoosejs.com#error_messages_MongooseError-messages">default generic error message template</a> will be used.</p>
<h4 id="examples_23">Examples:<a class="headerlink" href="#examples_23" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">validator</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">val</span> <span class="o">==</span> <span class="s1">&#39;something&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">validate</span>: <span class="kt">validator</span> <span class="p">}});</span>



<span class="kd">var</span> <span class="nx">custom</span> <span class="o">=</span> <span class="p">[</span><span class="nx">validator</span><span class="p">,</span> <span class="s1">&#39;Uh oh, {PATH} does not equal &quot;something&quot;.&#39;</span><span class="p">]</span>
<span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">validate</span>: <span class="kt">custom</span> <span class="p">}});</span>



<span class="kd">var</span> <span class="nx">many</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">validator</span>: <span class="kt">validator</span><span class="p">,</span> <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;uh oh&#39;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nx">validator</span>: <span class="kt">anotherValidator</span><span class="p">,</span> <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;failed&#39;</span> <span class="p">}</span>
<span class="p">]</span>
<span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">validate</span>: <span class="kt">many</span> <span class="p">}});</span>



<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span> <span class="p">});</span>
<span class="nx">schema</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">).</span><span class="nx">validate</span><span class="p">(</span><span class="nx">validator</span><span class="p">,</span> <span class="s1">&#39;validation of `{PATH}` failed with value `{VALUE}`&#39;</span><span class="p">);</span>
</pre></div>


<h4 id="error-message-templates">Error message templates:<a class="headerlink" href="#error-message-templates" title="Permanent link">&para;</a></h4>
<p>From the examples above, you may have noticed that error messages support basic templating. There are a few other template keywords besides <code>{PATH}</code> and <code>{VALUE}</code> too. To find out more, details are available <a href="http://mongoosejs.com#error_messages_MongooseError.messages">here</a></p>
<h4 id="asynchronous-validation">Asynchronous validation:<a class="headerlink" href="#asynchronous-validation" title="Permanent link">&para;</a></h4>
<p>Passing a validator function that receives two arguments tells mongoose that the validator is an asynchronous validator. The first argument passed to the validator function is the value being validated. The second argument is a callback function that must called when you finish validating the value and passed either <code>true</code> or <code>false</code> to communicate either success or failure respectively.</p>
<div class="codehilite"><pre><span></span>schema.path(&#39;name&#39;).validate({
  isAsync: true,
  validator: function (value, respond) {
    doStuff(value, function () {
      ...
      respond(false);
    });
  },
  message: &#39;Custom error message!&#39;
});


schema.path(&#39;name&#39;).validate({
  validator: function (value) {
    return new Promise(function (resolve, reject) {
      resolve(false);
    });
  }
});
</pre></div>


<p>You might use asynchronous validators to retreive other documents from the database to validate against or to meet other I/O bound validation needs.</p>
<p>Validation occurs <code>pre('save')</code> or whenever you manually execute <a href="http://mongoosejs.com#document_Document-validate">document#validate</a>.</p>
<p>If validation fails during <code>pre('save')</code> and no callback was passed to receive the error, an <code>error</code> event will be emitted on your Models associated db <a href="http://mongoosejs.com#connection_Connection">connection</a>, passing the validation error object along.</p>
<div class="codehilite"><pre><span></span>var conn = mongoose.createConnection(..);
conn.on(&#39;error&#39;, handleError);

var Product = conn.model(&#39;Product&#39;, yourSchema);
var dvd = new Product(..);
dvd.save();
</pre></div>


<p>If you desire handling these errors at the Model level, attach an <code>error</code> listener to your Model and the event will instead be emitted there.</p>
<div class="codehilite"><pre><span></span>Product.on(&#39;error&#39;, handleError);
</pre></div>


<hr />
<h3 id="schematypeprototyperequired"><a href="http://mongoosejs.com#schematype_SchemaType-required">SchemaType.prototype.required()</a><a class="headerlink" href="#schematypeprototyperequired" title="Permanent link">&para;</a></h3>
<h5 id="parameters_188">Parameters<a class="headerlink" href="#parameters_188" title="Permanent link">&para;</a></h5>
<ul>
<li>[message] «String» optional custom error message</li>
</ul>
<h5 id="returns_146">Returns:<a class="headerlink" href="#returns_146" title="Permanent link">&para;</a></h5>
<p>Adds a required validator to this SchemaType. The validator gets added to the front of this SchemaType's validators array using <code>unshift()</code>.</p>
<h4 id="example_135">Example:<a class="headerlink" href="#example_135" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">born</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">Date</span><span class="p">,</span> <span class="n">required</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="o">)</span>



<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">born</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">Date</span><span class="p">,</span> <span class="n">required</span><span class="o">:</span> <span class="s1">&#39;{PATH} is required!&#39;</span> <span class="p">}</span><span class="o">)</span>



<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span>
  <span class="n">userId</span><span class="p">:</span> <span class="n">ObjectId</span><span class="p">,</span>
  <span class="n">username</span><span class="o">:</span> <span class="err">{</span>
    <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="n">required</span><span class="o">:</span> <span class="nf">function</span><span class="p">()</span> <span class="err">{</span> <span class="n">return</span> <span class="n">this</span><span class="o">.</span><span class="n">userId</span> <span class="o">!=</span> <span class="n">null</span><span class="p">;</span> <span class="p">}</span>
  <span class="err">}</span>
<span class="err">}</span><span class="o">)</span>


<span class="nt">var</span> <span class="nt">s</span> <span class="o">=</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span>
  <span class="n">userId</span><span class="p">:</span> <span class="n">ObjectId</span><span class="p">,</span>
  <span class="n">username</span><span class="o">:</span> <span class="err">{</span>
    <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="n">required</span><span class="o">:</span> <span class="cp">[</span>
      <span class="nx">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">this.userId</span> <span class="o">!=</span> <span class="kt">null</span><span class="p">;</span> <span class="p">},</span>
      <span class="s1">&#39;username is required if id is specified&#39;</span>
    <span class="cp">]</span>
  <span class="p">}</span>
<span class="err">}</span><span class="o">)</span>



<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">required</span><span class="o">(</span><span class="nt">true</span><span class="o">);</span>



<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">required</span><span class="o">(</span><span class="nt">true</span><span class="o">,</span> <span class="s1">&#39;grrr :( &#39;</span><span class="o">);</span>


<span class="nt">var</span> <span class="nt">isOver18</span> <span class="o">=</span> <span class="nt">function</span><span class="o">()</span> <span class="p">{</span> <span class="err">return</span> <span class="err">this.age</span> <span class="err">&gt;=</span> <span class="err">18</span><span class="p">;</span> <span class="p">}</span><span class="o">;</span>
<span class="nt">Schema</span><span class="p">.</span><span class="nc">path</span><span class="o">(</span><span class="s1">&#39;voterRegistrationId&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">required</span><span class="o">(</span><span class="nt">isOver18</span><span class="o">);</span>
</pre></div>


<p>The required validator uses the SchemaType's <code>checkRequired</code> function to determine whether a given value satisfies the required validator. By default, a value satisfies the required validator if <code>val != null</code> (that is, if the value is not null nor undefined). However, most built-in mongoose schema types override the default <code>checkRequired</code> function:</p>
<hr />
<h3 id="schematypeprototypeselect"><a href="http://mongoosejs.com#schematype_SchemaType-select">SchemaType.prototype.select()</a><a class="headerlink" href="#schematypeprototypeselect" title="Permanent link">&para;</a></h3>
<h5 id="parameters_189">Parameters<a class="headerlink" href="#parameters_189" title="Permanent link">&para;</a></h5>
<h5 id="returns_147">Returns:<a class="headerlink" href="#returns_147" title="Permanent link">&para;</a></h5>
<p>Sets default <code>select()</code> behavior for this path.</p>
<p>Set to <code>true</code> if this path should always be included in the results, <code>false</code> if it should be excluded by default. This setting can be overridden at the query level.</p>
<h4 id="example_136">Example:<a class="headerlink" href="#example_136" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nt">T</span> <span class="o">=</span> <span class="nt">db</span><span class="p">.</span><span class="nc">model</span><span class="o">(</span><span class="s1">&#39;T&#39;</span><span class="o">,</span> <span class="nt">new</span> <span class="nt">Schema</span><span class="o">(</span><span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="err">{</span> <span class="n">type</span><span class="o">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">select</span><span class="o">:</span> <span class="n">true</span> <span class="p">}</span><span class="err">}</span><span class="o">));</span>
<span class="nt">T</span><span class="p">.</span><span class="nc">find</span><span class="o">(..);</span>

<span class="nt">T</span><span class="p">.</span><span class="nc">find</span><span class="o">()</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s1">&#39;-x&#39;</span><span class="o">)</span><span class="p">.</span><span class="nc">exec</span><span class="o">(</span><span class="nt">callback</span><span class="o">);</span>
</pre></div>


<hr />
<hr />
<h3 id="virtualtype"><a href="http://mongoosejs.com#virtualtype_VirtualType">VirtualType()</a><a class="headerlink" href="#virtualtype" title="Permanent link">&para;</a></h3>
<p>VirtualType constructor</p>
<p>This is what mongoose uses to define virtual attributes via <code>Schema.prototype.virtual</code>.</p>
<h4 id="example_137">Example:<a class="headerlink" href="#example_137" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var fullname = schema.virtual(&#39;fullname&#39;);
fullname instanceof mongoose.VirtualType
</pre></div>


<hr />
<h3 id="virtualtypeprototypeget"><a href="http://mongoosejs.com#virtualtype_VirtualType-get">VirtualType.prototype.get()</a><a class="headerlink" href="#virtualtypeprototypeget" title="Permanent link">&para;</a></h3>
<h5 id="parameters_190">Parameters<a class="headerlink" href="#parameters_190" title="Permanent link">&para;</a></h5>
<h5 id="returns_148">Returns:<a class="headerlink" href="#returns_148" title="Permanent link">&para;</a></h5>
<p>Defines a getter.</p>
<h4 id="example_138">Example:<a class="headerlink" href="#example_138" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var virtual = schema.virtual(&#39;fullname&#39;);
virtual.get(function () {
  return this.name.first + &#39; &#39; + this.name.last;
});
</pre></div>


<hr />
<h3 id="virtualtypeprototypeset"><a href="http://mongoosejs.com#virtualtype_VirtualType-set">VirtualType.prototype.set()</a><a class="headerlink" href="#virtualtypeprototypeset" title="Permanent link">&para;</a></h3>
<h5 id="parameters_191">Parameters<a class="headerlink" href="#parameters_191" title="Permanent link">&para;</a></h5>
<h5 id="returns_149">Returns:<a class="headerlink" href="#returns_149" title="Permanent link">&para;</a></h5>
<p>Defines a setter.</p>
<h4 id="example_139">Example:<a class="headerlink" href="#example_139" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>var virtual = schema.virtual(&#39;fullname&#39;);
virtual.set(function (v) {
  var parts = v.split(&#39; &#39;);
  this.name.first = parts[0];
  this.name.last = parts[1];
});
</pre></div>


<hr />
<h3 id="virtualtypeprototypeapplygetters"><a href="http://mongoosejs.com#virtualtype_VirtualType-applyGetters">VirtualType.prototype.applyGetters()</a><a class="headerlink" href="#virtualtypeprototypeapplygetters" title="Permanent link">&para;</a></h3>
<h5 id="parameters_192">Parameters<a class="headerlink" href="#parameters_192" title="Permanent link">&para;</a></h5>
<h5 id="returns_150">Returns:<a class="headerlink" href="#returns_150" title="Permanent link">&para;</a></h5>
<ul>
<li>«any» the value after applying all getters</li>
</ul>
<p>Applies getters to <code>value</code> using optional <code>scope</code>.</p>
<hr />
<h3 id="virtualtypeprototypeapplysetters"><a href="http://mongoosejs.com#virtualtype_VirtualType-applySetters">VirtualType.prototype.applySetters()</a><a class="headerlink" href="#virtualtypeprototypeapplysetters" title="Permanent link">&para;</a></h3>
<h5 id="parameters_193">Parameters<a class="headerlink" href="#parameters_193" title="Permanent link">&para;</a></h5>
<h5 id="returns_151">Returns:<a class="headerlink" href="#returns_151" title="Permanent link">&para;</a></h5>
<ul>
<li>«any» the value after applying all setters</li>
</ul>
<p>Applies setters to <code>value</code> using optional <code>scope</code>.</p>
<hr />
<hr />
<h3 id="mongooseerror"><a href="http://mongoosejs.com#mongooseerror_MongooseError">MongooseError()</a><a class="headerlink" href="#mongooseerror" title="Permanent link">&para;</a></h3>
<h5 id="parameters_194">Parameters<a class="headerlink" href="#parameters_194" title="Permanent link">&para;</a></h5>
<ul>
<li>msg «String» Error message</li>
</ul>
<p>MongooseError constructor</p>
<hr />
<h3 id="mongooseerrormessages"><a href="http://mongoosejs.com#messages_messages">MongooseError.messages</a><a class="headerlink" href="#mongooseerrormessages" title="Permanent link">&para;</a></h3>
<p>The default built-in validator error messages.</p>
<hr />
<h3 id="mongooseerrordocumentnotfounderror"><a href="http://mongoosejs.com#documentnotfounderror_DocumentNotFoundError">MongooseError.DocumentNotFoundError</a><a class="headerlink" href="#mongooseerrordocumentnotfounderror" title="Permanent link">&para;</a></h3>
<p>An instance of this error class will be returned when <code>save()</code> fails because the underlying document was not found. The constructor takes one parameter, the conditions that mongoose passed to <code>update()</code> when trying to update the document.</p>
<hr />
<h3 id="mongooseerrorcasterror"><a href="http://mongoosejs.com#casterror_CastError">MongooseError.CastError</a><a class="headerlink" href="#mongooseerrorcasterror" title="Permanent link">&para;</a></h3>
<p>An instance of this error class will be returned when mongoose failed to cast a value.</p>
<hr />
<h3 id="mongooseerrorvalidationerror"><a href="http://mongoosejs.com#validationerror_ValidationError">MongooseError.ValidationError</a><a class="headerlink" href="#mongooseerrorvalidationerror" title="Permanent link">&para;</a></h3>
<p>An instance of this error class will be returned when <a href="http://mongoosejs.com/docs/validation.html">validation</a> failed.</p>
<hr />
<h3 id="mongooseerrorvalidatorerror"><a href="http://mongoosejs.com#validatorerror_ValidatorError">MongooseError.ValidatorError</a><a class="headerlink" href="#mongooseerrorvalidatorerror" title="Permanent link">&para;</a></h3>
<p>A <code>ValidationError</code> has a hash of <code>errors</code> that contain individual <code>ValidatorError</code> instances</p>
<hr />
<h3 id="mongooseerrorversionerror"><a href="http://mongoosejs.com#versionerror_VersionError">MongooseError.VersionError</a><a class="headerlink" href="#mongooseerrorversionerror" title="Permanent link">&para;</a></h3>
<p>An instance of this error class will be returned when you call <code>save()</code> after the document in the database was changed in a potentially unsafe way. See the <a href="http://mongoosejs.com/docs/guide.html#versionKey"><code>versionKey</code> option</a> for more information.</p>
<hr />
<h3 id="mongooseerroroverwritemodelerror"><a href="http://mongoosejs.com#overwritemodelerror_OverwriteModelError">MongooseError.OverwriteModelError</a><a class="headerlink" href="#mongooseerroroverwritemodelerror" title="Permanent link">&para;</a></h3>
<hr />
<h3 id="mongooseerrormissingschemaerror"><a href="http://mongoosejs.com#missingschemaerror_MissingSchemaError">MongooseError.MissingSchemaError</a><a class="headerlink" href="#mongooseerrormissingschemaerror" title="Permanent link">&para;</a></h3>
<p>Thrown when you try to access a model that has not been registered yet</p>
<hr />
<h3 id="mongooseerrordivergentarrayerror"><a href="http://mongoosejs.com#divergentarrayerror_DivergentArrayError">MongooseError.DivergentArrayError</a><a class="headerlink" href="#mongooseerrordivergentarrayerror" title="Permanent link">&para;</a></h3>
<p>An instance of this error will be returned if you used an array projection and then modified the array in an unsafe way.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../guide/Plugins/" title="插件" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                插件
              </span>
            </div>
          </a>
        
        
          <a href="Schema/" title="架构" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                架构
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            版权 &copy; 2018 -  wohugb.github.io
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://wohugb.github.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/wohugb" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/wohugb" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/wohugb" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.6cdc17f0.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../assets/javascripts/lunr/lunr.zh.js"></script>
            
          
          
        
      
      <script>app.initialize({version:"0.17.2",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>